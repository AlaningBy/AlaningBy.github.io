<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>MySQL笔记 | AlaningBy</title><meta name="keywords" content="sql"><meta name="author" content="AlaningBy"><meta name="copyright" content="AlaningBy"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="前言 全文来自于B站千峰涛哥的免费课程，对MySQL有兴趣的可以学习这套课程，相比其他课程优点在于老师讲述得清楚但不冗杂，几乎每个知识点都有相应的案例实操，如果跟着把代码敲过一遍会很有收获，对刚入门的新手很友好。    学习本课程需要的相关软件放在下面的链接，安装和使用教程会和软件放在一起： ​		MySQL去官网下载即可，具体安装步骤在本文第三节。 ​		NAVICAT官网下载地址：https:">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL笔记">
<meta property="og:url" content="http://alaningby.github.io/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="AlaningBy">
<meta property="og:description" content="前言 全文来自于B站千峰涛哥的免费课程，对MySQL有兴趣的可以学习这套课程，相比其他课程优点在于老师讲述得清楚但不冗杂，几乎每个知识点都有相应的案例实操，如果跟着把代码敲过一遍会很有收获，对刚入门的新手很友好。    学习本课程需要的相关软件放在下面的链接，安装和使用教程会和软件放在一起： ​		MySQL去官网下载即可，具体安装步骤在本文第三节。 ​		NAVICAT官网下载地址：https:">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s1.ax1x.com/2023/02/06/pSgVd61.png">
<meta property="article:published_time" content="2023-02-06T15:29:02.000Z">
<meta property="article:modified_time" content="2023-02-08T08:28:39.224Z">
<meta property="article:author" content="AlaningBy">
<meta property="article:tag" content="sql">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s1.ax1x.com/2023/02/06/pSgVd61.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://alaningby.github.io/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'MySQL笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-02-08 16:28:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/css1.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxiang.JPG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s1.ax1x.com/2023/02/06/pSgVd61.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">AlaningBy</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">MySQL笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-02-06T15:29:02.000Z" title="发表于 2023-02-06 23:29:02">2023-02-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-02-08T08:28:39.224Z" title="更新于 2023-02-08 16:28:39">2023-02-08</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">16.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>64分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>全文来自于B站千峰涛哥的免费课程，对MySQL有兴趣的可以学习这套课程，相比其他课程优点在于老师讲述得清楚但不冗杂，几乎每个知识点都有相应的案例实操，如果跟着把代码敲过一遍会很有收获，对刚入门的新手很友好。</p>
<iframe src="//player.bilibili.com/player.html?aid=633582932&bvid=BV1qb4y1Y722&cid=423412540&page=2" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="800" height="500"> </iframe>

<p>学习本课程需要的相关软件放在下面的链接，安装和使用教程会和软件放在一起：</p>
<p>​		MySQL去官网下载即可，具体安装步骤在本文第三节。</p>
<p>​		NAVICAT官网下载地址：<a target="_blank" rel="noopener" href="https://www.navicat.com.cn/download/navicat-premium">https://www.navicat.com.cn/download/navicat-premium</a></p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSR9EBF"><img src="https://s1.ax1x.com/2023/02/08/pSR9EBF.png" alt="pSR9EBF.png"></a></p>
<p>​		激活工具：<a target="_blank" rel="noopener" href="https://www.aliyundrive.com/s/P6ofYHkXYNQ">https://www.aliyundrive.com/s/P6ofYHkXYNQ</a> 	提取密码：lj51</p>
<p>​		这个激活工具涵盖了NAVICAT的所有版本激活方式，一次下载永久使用。</p>
</blockquote>
<h2 id="一、MySQL"><a href="#一、MySQL" class="headerlink" title="一、MySQL"></a>一、MySQL</h2><h3 id="1-1-数据库介绍"><a href="#1-1-数据库介绍" class="headerlink" title="1.1 数据库介绍"></a>1.1 数据库介绍</h3><ul>
<li>数据库概念</li>
<li>术语介绍</li>
</ul>
<h3 id="1-2-MySQL数据库"><a href="#1-2-MySQL数据库" class="headerlink" title="1.2 MySQL数据库"></a>1.2 MySQL数据库</h3><ul>
<li>下载、安装、配置、卸载</li>
<li>MySQL客户端工具的安装及使用</li>
</ul>
<h3 id="1-3-SQL结构化查询语言"><a href="#1-3-SQL结构化查询语言" class="headerlink" title="1.3 SQL结构化查询语言"></a>1.3 SQL结构化查询语言</h3><ul>
<li>什么是SQL</li>
<li>SQL操作数据(CRUD操作:添加、查询、修改、删除)</li>
</ul>
<h3 id="1-4-SQL高级"><a href="#1-4-SQL高级" class="headerlink" title="1.4 SQL高级"></a>1.4 SQL高级</h3><ul>
<li>存储过程</li>
<li>索引</li>
<li>触发器、视图</li>
</ul>
<h3 id="1-5-数据库设计"><a href="#1-5-数据库设计" class="headerlink" title="1.5 数据库设计"></a>1.5 数据库设计</h3><ul>
<li>数据库设计步骤</li>
<li>数据库设计范式</li>
<li>E-R图</li>
<li>PowerDesigner建模工具、PDMan</li>
</ul>
<h3 id="1-6数据库事务"><a href="#1-6数据库事务" class="headerlink" title="1.6数据库事务"></a>1.6数据库事务</h3><ul>
<li>什么是事务</li>
<li>事务特性ACID</li>
<li>事务隔离级别</li>
<li>事务管理</li>
</ul>
<h2 id="二、数据库介绍"><a href="#二、数据库介绍" class="headerlink" title="二、数据库介绍"></a>二、数据库介绍</h2><h3 id="2-1数据库概念"><a href="#2-1数据库概念" class="headerlink" title="2.1数据库概念"></a>2.1数据库概念</h3><blockquote>
<p>数据库，就是存放数据的仓库<br>数据库(DataBase，简称DB）是长期存储在计算机内部有结构的、大量的、共享的数据集合。</p>
</blockquote>
<ul>
<li>长期存储:持久存储</li>
<li>有结构：<ul>
<li>类型：数据库不仅可以存放数据，而且存放的数据还是有类型的</li>
<li>关系：存储数据与数据之间的关系</li>
</ul>
</li>
<li>大量：大多数数据库都是文件系统的，也就是说存储在数据库中的数据实际上就是存储在磁盘的文件中</li>
<li>共享：多个应用程序可以通过数据库实现数据的共享</li>
</ul>
<h3 id="2-2关系型数据库与非关系型数据库"><a href="#2-2关系型数据库与非关系型数据库" class="headerlink" title="2.2关系型数据库与非关系型数据库"></a>2.2关系型数据库与非关系型数据库</h3><ul>
<li><p>关系型数据库</p>
<blockquote>
<p>关系型数据库，采用了关系模型来组织数据的存储，以行和列的形式存储数据并记录数据与数据之间的关系―-将数据存储在表格中，可以通过建立表格与表格之间的关联来维护数据与数据之间的关系。<br>学生信息  —-  学生表<br>班级信息  —-  班级表</p>
</blockquote>
</li>
<li><p>非关系型数据库</p>
<blockquote>
<p>非关系型数据库，采用键值对的模型来存储数据，只完成数据的记录，不会记录数据与数据之间的关系。在非关系型数据库中基于其特定的存储结构来解决—些大数据应用的难题。<br>NoSQL(Not only SQL)数据库来指代非关系型数据库。</p>
</blockquote>
</li>
</ul>
<h5 id="2-3常见的数据库产品关"><a href="#2-3常见的数据库产品关" class="headerlink" title="2.3常见的数据库产品关"></a>2.3常见的数据库产品关</h5><p><strong>系型数据库产品</strong></p>
<ul>
<li><p><code>MySQL</code>免费</p>
<ul>
<li>MariaDB</li>
<li>Percona Server</li>
</ul>
</li>
<li><p>PostgreSQL</p>
</li>
<li><p><code>Oracle</code>收费</p>
</li>
<li><p>SQL Server</p>
</li>
<li><p>Access</p>
</li>
<li><p>Sybase</p>
</li>
<li><p>达梦数据库</p>
</li>
</ul>
<p><strong>非关系型数据库产品</strong></p>
<ul>
<li><p>面向检索的列式存储</p>
<ul>
<li><p>HaBase (Hadoop子系统)</p>
</li>
<li><p>BigTable (Google)</p>
</li>
</ul>
</li>
<li><p>面向高并发的缓存存储Key-Value</p>
<ul>
<li><code>Redis</code></li>
<li>MemcacheDB</li>
</ul>
</li>
<li><p>面向海星数据访问的文档存储Document–Oriented</p>
<ul>
<li><code>MongoDB</code></li>
<li>CouchDB</li>
</ul>
</li>
</ul>
<p><strong>SQL基本语法</strong></p>
<blockquote>
<p>在MySQL Command Line Client 或者 navicat 等工具中都可以编写SQL指令</p>
</blockquote>
<ul>
<li><p>SQL指令不区分大小鞋写</p>
</li>
<li><p>每条SQL表达式结束之后都以 <code>；</code>结束,</p>
<p>如果没由分号回车，则会出现<code>-&gt;</code>提示，说明语句没有写完</p>
</li>
<li><p>SQL关键字之间以<code>空格</code>进行分割</p>
</li>
<li><p>SQL之间可以不限制换行（可以有空格的地方就可以有换行）</p>
</li>
</ul>
<h5 id="2-4-数据库术语"><a href="#2-4-数据库术语" class="headerlink" title="2.4 数据库术语"></a>2.4 数据库术语</h5><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFA2R"><img src="https://s1.ax1x.com/2023/02/08/pSRFA2R.png" alt="pSRFA2R.png"></a></p>
<ul>
<li><code>数据库（Database）</code>:存储的数据的集合，提供数据存储的服务</li>
<li><code>数据(Data)</code>:实际上指的是描述事物的符号记录</li>
<li><code>数据库管理系统（Database Management System，DBMS ) </code>:数据库管理系统，是位于用户与操作系统之间的一层数据管理软件</li>
<li><code>数据库系统管理员（ Database Anministrator，简称为DBA)</code>:负责数据库创建、使用及维护的专门人员</li>
<li><code>数据库系统（Database system，DBS）</code>:数据库系统管理员、数据库管理系统及数据库组成整个单元</li>
</ul>
<h2 id="三、MySQL数据库环境准备"><a href="#三、MySQL数据库环境准备" class="headerlink" title="三、MySQL数据库环境准备"></a>三、MySQL数据库环境准备</h2><blockquote>
<p>MySQL下载、安装、配置、卸载，安装DBMS、使用DBMS</p>
</blockquote>
<h3 id="3-1-MySQL版本及下载"><a href="#3-1-MySQL版本及下载" class="headerlink" title="3.1 MySQL版本及下载"></a>3.1 MySQL版本及下载</h3><h6 id="3-1-1版本"><a href="#3-1-1版本" class="headerlink" title="3.1.1版本"></a>3.1.1版本</h6><ul>
<li>MySQL是oracle的免费的关系型数据库，官网https: &#x2F;&#x2F;<a target="_blank" rel="noopener" href="http://www.mysql.com/">www.mysql.com/</a></li>
<li>MySQL目前的最新版本为<code>8.0.26</code>，在企业项目中主流版本: 5.0 — 5.5 — 5.6 — <code>5.7</code>— <code>8.0.26</code><ul>
<li>5.x   —   2020年5.7.32</li>
<li>8.x   —   2018年8.0.11 — 2019年8.0.16 — 2021年8.0.26</li>
</ul>
</li>
<li>MySQL 8.x新特性<ul>
<li>性能：官方8.x比比5.7速度要快2倍</li>
<li>支持NoSQL存储：5.7开始提供了对NoSQL的支持，8.0.x做了更进一步的改进</li>
<li>窗口函数</li>
<li>索引：隐藏索引、降序索引</li>
<li>可用性、可靠性</li>
</ul>
</li>
</ul>
<h6 id="3-1-2下载"><a href="#3-1-2下载" class="headerlink" title="3.1.2下载"></a>3.1.2下载</h6><ul>
<li>官网下载: <a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/installer/">https://dev.mysql.com/downloads/installer/</a>.<ul>
<li>需要注册oracle9</li>
<li>服务器在国外，下载速度…</li>
</ul>
</li>
<li>镜像下载: <a target="_blank" rel="noopener" href="https://wwwfilehorse.com/download-mysql-64/download/">https://wwwfilehorse.com/download-mysql-64/download/</a></li>
</ul>
<h3 id="3-2-MySQL安装"><a href="#3-2-MySQL安装" class="headerlink" title="3.2 MySQL安装"></a>3.2 MySQL安装</h3><blockquote>
<p>傻瓜式（直接点击下一步）</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRF1Gd"><img src="https://s1.ax1x.com/2023/02/08/pSRF1Gd.png" alt="pSRF1Gd.png" style="zoom:67%;"></a></p>
<p><strong>选择<code>Developer Default</code>模式安装</strong></p>
<p>此模式会安装开发人员需要的常用组件;在安装这些组件时需要对应的环境依赖:</p>
<p>例如: <code>Microsoft Visual C++ 2019 Redistributable Package (x64) is not installed.Latestbinary compatible version will be installed if agreed to resolve this requirement.</code></p>
<p>安装：</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFtqf"><img src="https://s1.ax1x.com/2023/02/08/pSRFtqf.png" alt="pSRFtqf.png" style="zoom:67%;"></a></p>
<p>选择自定义<code>Custom</code>安装</p>
<img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207220322169.png" alt="image-20230207220322169" style="zoom:80%;">

<h3 id="3-3-MySQL配置"><a href="#3-3-MySQL配置" class="headerlink" title="3.3 MySQL配置"></a>3.3 MySQL配置</h3><h6 id="3-3-1-端口配置"><a href="#3-3-1-端口配置" class="headerlink" title="3.3.1 端口配置"></a>3.3.1 端口配置</h6><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207220651777.png" alt="image-20230207220651777" style="zoom:67%;">

<h6 id="3-3-2-账号密码设置"><a href="#3-3-2-账号密码设置" class="headerlink" title="3.3.2 账号密码设置"></a>3.3.2 账号密码设置</h6><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207220958191.png" alt="image-20230207220958191" style="zoom:80%;">

<h6 id="3-3-3-服务名称"><a href="#3-3-3-服务名称" class="headerlink" title="3.3.3 服务名称"></a>3.3.3 服务名称</h6><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207221146950.png" alt="image-20230207221146950" style="zoom:80%;">

<img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207221059332.png" alt="image-20230207221059332" style="zoom:80%;">

<p><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source_posts\MySQL笔记\image-20230207221243013.png" alt="image-20230207221243013"></p>
<h3 id="3-4-MySQL服务的启动与停止"><a href="#3-4-MySQL服务的启动与停止" class="headerlink" title="3.4 MySQL服务的启动与停止"></a>3.4 MySQL服务的启动与停止</h3><blockquote>
<p>MySQL是以服务的形式运行在系统中</p>
</blockquote>
<h6 id="3-4-1计算机管理窗口"><a href="#3-4-1计算机管理窗口" class="headerlink" title="3.4.1计算机管理窗口"></a>3.4.1计算机管理窗口</h6><p><code>此电脑</code>—<code>右键</code>—<code>管理</code></p>
<p><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source_posts\MySQL笔记\image-20230207221549984.png" alt="image-20230207221549984"></p>
<p>3.4.2 window 命令行</p>
<p>打开命令行：<code>win + R </code>—输入<code>cmd</code>回车</p>
<p>以管理员身份打开命令行: <code>win + s</code> —-输入<code>cmd</code> —选择以管理员身份运行</p>
<img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207221853196.png" alt="image-20230207221853196" style="zoom:67%;">

<h3 id="3-5-MySQL卸载"><a href="#3-5-MySQL卸载" class="headerlink" title="3.5 MySQL卸载"></a>3.5 MySQL卸载</h3><ul>
<li><p>关闭服务</p>
<blockquote>
<p>##管理员身份启动cmd命令行</p>
<p>net stop mysq180</p>
</blockquote>
</li>
<li><p>卸载软件</p>
<ul>
<li><p>打开控制面板</p>
<img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207221959826.png" alt="image-20230207221959826" style="zoom: 67%;">
</li>
<li><p>点击”程序和功能”</p>
<p><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source_posts\MySQL笔记\image-20230207222353083-1675779904712-1.png" alt="image-20230207222353083"></p>
</li>
<li><p>卸载MySQL</p>
<img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source\_posts\MySQL笔记\image-20230207222435343.png" alt="image-20230207222435343" style="zoom:80%;"></li>
</ul>
</li>
<li><p>删除目录</p>
<ul>
<li>MySQL的安装目录:<code>C:Program Files(x86)\MySQL</code></li>
<li>MySQL的数据文件目录(默认隐藏):<code>C:\ProgramDatalMySQL</code>(如果不允许删除，强制删除)</li>
</ul>
</li>
<li><p>删除注册表</p>
<ul>
<li>打开注册表: <code>win+r</code> —输入<code>regedit</code> —回车</li>
<li>删除<code>HKEY_LOCAL_MACHINE\SYSTEN\ControlSet001\Services\MySQL80</code></li>
<li>删除搜索<code>mysql</code>的相关项 (非必须)</li>
</ul>
</li>
</ul>
<h2 id="四、MySQL的管理工具"><a href="#四、MySQL的管理工具" class="headerlink" title="四、MySQL的管理工具"></a>四、MySQL的管理工具</h2><blockquote>
<p> 当完成数据库的安装之后，mysql是以服务的形式运行在windows&#x2F;linux系统，用户是通过DBMS工具来对MySQL进行操作的，当我们安装完成MySQL之后默认安装了<code>mysql Commcand line Client</code>，此工具是一个命令行形式的工具，通常我们会单独安装可视化的DBMS工具:</p>
<ul>
<li><p>SQLyog</p>
</li>
<li><p>Navicat for MySQL</p>
</li>
</ul>
</blockquote>
<h3 id="4-1-MysQL-Command-line-client使用"><a href="#4-1-MysQL-Command-line-client使用" class="headerlink" title="4.1 MysQL Command line client使用"></a>4.1 MysQL Command line client使用</h3><ul>
<li>打开<code>MysQL Command line client</code>：开始菜单 — MySQL — MySQL 8.0 Command line Client</li>
<li>连接MySQL：<code>输入密码</code>即可(如果密码错误或者mysql服务没有启动，窗口会闪退)</li>
</ul>
<p><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source_posts\MySQL笔记\image-20230207213114450.png" alt="image-20230207213114450"></p>
<ul>
<li>关闭MySQL Command line Client：输入<code>exit </code>指令回车即可退出</li>
</ul>
<h3 id="4-2-可视化工具Navicat使用"><a href="#4-2-可视化工具Navicat使用" class="headerlink" title="4.2 可视化工具Navicat使用"></a>4.2 可视化工具Navicat使用</h3><h6 id="4-2-1-Navicat工具下载及安装"><a href="#4-2-1-Navicat工具下载及安装" class="headerlink" title="4.2.1 Navicat工具下载及安装"></a>4.2.1 Navicat工具下载及安装</h6><blockquote>
<p> 傻瓜式安装</p>
</blockquote>
<h6 id="4-2-2-创建连接"><a href="#4-2-2-创建连接" class="headerlink" title="4.2.2 创建连接"></a>4.2.2 创建连接</h6><ul>
<li>打开navicat工具</li>
<li>创建连接:</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFuVO"><img src="https://s1.ax1x.com/2023/02/08/pSRFuVO.png" alt="pSRFuVO.png"></a></p>
<h2 id="五、MysQL逻辑结构"><a href="#五、MysQL逻辑结构" class="headerlink" title="五、MysQL逻辑结构"></a>五、MysQL逻辑结构</h2><blockquote>
<p>MySQL可以存储数据，但是存储在MySQL中的数据需要按照特定的结果进行存储</p>
<p>学生——-学校<br>数据—–数据库</p>
</blockquote>
<h3 id="5-1-逻辑结构"><a href="#5-1-逻辑结构" class="headerlink" title="5.1 逻辑结构"></a>5.1 逻辑结构</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFlPH"><img src="https://s1.ax1x.com/2023/02/08/pSRFlPH.png" alt="pSRFlPH.png"></a></p>
<h3 id="5-2-记录-x2F-元组"><a href="#5-2-记录-x2F-元组" class="headerlink" title="5.2 记录&#x2F;元组"></a>5.2 记录&#x2F;元组</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFKaD"><img src="https://s1.ax1x.com/2023/02/08/pSRFKaD.png" alt="pSRFKaD.png"></a></p>
<h2 id="六、SQL"><a href="#六、SQL" class="headerlink" title="六、SQL"></a>六、SQL</h2><h3 id="6-1-SQL概述"><a href="#6-1-SQL概述" class="headerlink" title="6.1 SQL概述"></a>6.1 SQL概述</h3><blockquote>
<p> SQL (Structured Query Language) 结构化查询语言，用于存取、查询、更新数据以及管理关系型数据库系统</p>
</blockquote>
<h6 id="6-1-1-SQL发展"><a href="#6-1-1-SQL发展" class="headerlink" title="6.1.1 SQL发展"></a>6.1.1 SQL发展</h6><ul>
<li>SOL是在1981年由IBM公司推出，一经推出基于其简洁的语法在数据库中得到了广泛的应用，成为主流数据库的通用规范</li>
<li>SOL由ANSI组织确定规范</li>
<li>在不同的数据库产品中遵守SOL的通用规范，但是也对SOL有一些不同的改进，形成了一些数据库的专有指令<ul>
<li>MySOL: limit</li>
<li>SOLServer : top</li>
<li>Oracle: rownum</li>
</ul>
</li>
</ul>
<h6 id="6-1-2-SQL分类"><a href="#6-1-2-SQL分类" class="headerlink" title="6.1.2 SQL分类"></a>6.1.2 SQL分类</h6><blockquote>
<p>根据SQL指令完成的数据库操作的不同，可以将SQL指令分为四类:</p>
</blockquote>
<ul>
<li><strong>DDL Data Definition Language数据定义语言</strong><ul>
<li>用于完成对数据库对象（数据库、数据表、视图、索引等)的创建、删除、修改</li>
</ul>
</li>
<li><strong>DMLData Manipulation Language数据操作&#x2F;操纵语言</strong><ul>
<li>用于完成对数据表中的数据的添加、删除、修改操作。添加:将数据存储到数据表</li>
<li>删除:将数据从数据表移除</li>
<li>修改:对数据表中的数据进行修改</li>
</ul>
</li>
<li>DQL Data Query Language数据查询语言<ul>
<li>用于将数据表中的数据查询出来</li>
</ul>
</li>
<li>DCL Data Control Language数据控制语言</li>
</ul>
<h3 id="6-2-SQL基本语法"><a href="#6-2-SQL基本语法" class="headerlink" title="6.2 SQL基本语法"></a>6.2 SQL基本语法</h3><blockquote>
<p>在MySQL Command Line Client或者navicat等工具中都可以编写SQL指令</p>
</blockquote>
<ul>
<li>SQL指令不区分大小写</li>
<li>每条SQL表达式结束之后都以<code>;</code>结束</li>
<li>SQL关键字之间以<code>空格</code>进行分隔</li>
<li>SQL之间可以不限制换行(可以有空格的地方就可以有换行)</li>
</ul>
<h3 id="6-3-DDL"><a href="#6-3-DDL" class="headerlink" title="6.3 DDL"></a>6.3 DDL</h3><h6 id="6-3-1-DDL数据库操作"><a href="#6-3-1-DDL数据库操作" class="headerlink" title="6.3.1 DDL数据库操作"></a>6.3.1 DDL数据库操作</h6><blockquote>
<p>使用DDL语句可以创建数据库、查询数据库、修改数据库、删除数据库</p>
</blockquote>
<p><strong>创建数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## dbName 表示创建的数据库名称，可以自定义</span><br><span class="line"><span class="keyword">create</span> database <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 创建数据库，当指定的数据库不存在时执行</span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 创建数据库的同时，指定数据库的字符集（字符集：数据存储在数据 库中采用的编码格式）</span><br><span class="line"><span class="keyword">create</span> database db_fmsc <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br></pre></td></tr></table></figure>

<p><strong>查询数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 显示mysql中的数据库列表</span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"></span><br><span class="line">## 显示指定名称的数据创建的<span class="keyword">SQL</span>指令</span><br><span class="line"><span class="keyword">show</span> database <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>修改数据库</strong>  修改数据库的字符集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## 修改数据库的字符集</span><br><span class="line"><span class="keyword">alter</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span> <span class="type">character</span> <span class="keyword">set</span> gbk;</span><br><span class="line"><span class="keyword">alter</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span> <span class="type">character</span> det utf8;</span><br></pre></td></tr></table></figure>

<p><strong>删除数据库</strong> 删除数据库时会删除当前数据库中所有的数据表以及数据表中的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 删除数据库</span><br><span class="line"><span class="keyword">drop</span> database <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 如果数据库存在则删除数据库</span><br><span class="line"><span class="keyword">drop</span> database <span class="keyword">is</span> <span class="keyword">exists</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<p>若已经删除会出现 Can’t drop  ‘<dbName>’ : database dosen’t exist</dbName></p>
<p><strong>使用&#x2F;切换数据库</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<h6 id="6-3-2-DDL-数据表操作"><a href="#6-3-2-DDL-数据表操作" class="headerlink" title="6.3.2 DDL-数据表操作"></a>6.3.2 DDL-数据表操作</h6><p><strong>创建数据表</strong></p>
<blockquote>
<p>数据表就是一个二维的表格，一个表格由多列组成，表格中的每一类称之为表格的一个字段</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> students(</span><br><span class="line">stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_tel  <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">stu_qq <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source_posts\sql笔记day1\image-20221111110417173.png" alt="image-20221111110417173"></p>
<p><strong>查询数据表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure>

<p><strong>查询数据表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>删除数据表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## 删除数据表</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br><span class="line">## 当数据表存在时删除</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>修改数据表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">## 修改数据表名字</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> rename <span class="keyword">to</span> <span class="operator">&lt;</span>newTableName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 数据表也有字符集，默认字符集和数据库一致 <span class="type">character</span> <span class="keyword">set</span></span><br><span class="line"> <span class="keyword">alter</span> <span class="keyword">table</span> stus <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line"> </span><br><span class="line">## 添加字段 <span class="keyword">add</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stus <span class="keyword">add</span> stu_reamark <span class="type">varchar</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">## 修改字段的列表和类型 change</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> change <span class="operator">&lt;</span>oldColumnName<span class="operator">&gt;</span> <span class="operator">&lt;</span>newColumnName<span class="operator">&gt;</span> <span class="operator">&lt;</span>type<span class="operator">&gt;</span>;</span><br><span class="line">text 是类型，同<span class="type">char</span>,<span class="type">varchar</span>,int...</span><br><span class="line"></span><br><span class="line">## 只修改字段的类型 modify</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> modify <span class="operator">&lt;</span>ColumnName<span class="operator">&gt;</span> <span class="operator">&lt;</span>newType<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 删除字段</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stus <span class="keyword">drop</span> <span class="operator">&lt;</span>columnName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="6-4MySQL数据类型"><a href="#6-4MySQL数据类型" class="headerlink" title="6.4MySQL数据类型"></a>6.4MySQL数据类型</h3><blockquote>
<p>数据类型  指的是数据表中的列中支持存放的数据类型</p>
</blockquote>
<h6 id="6-4-1数值类型"><a href="#6-4-1数值类型" class="headerlink" title="6.4.1数值类型"></a>6.4.1数值类型</h6><p>在mysql中有多种数据类型可以存放数值，不同的类型存放的数值范围或者形式是不同的。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>内存空间大小</th>
<th>范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>tinyint</td>
<td>1byte</td>
<td>有符号-127<del>128<br>无符号 0</del>255</td>
<td>特小型整数：年龄</td>
</tr>
<tr>
<td>smallint</td>
<td>2byte</td>
<td>有符号-3276<del>32767<br>无符号 0</del>255</td>
<td>小型整数</td>
</tr>
<tr>
<td>mediumint</td>
<td>3byte</td>
<td>有符号-2^31<del>2^31-1<br>无符号 0</del>2^32-1</td>
<td>中型整数</td>
</tr>
<tr>
<td><strong>int&#x2F;integer</strong></td>
<td>4byte</td>
<td></td>
<td>整数</td>
</tr>
<tr>
<td>bigint</td>
<td>8byte</td>
<td></td>
<td>大型整数</td>
</tr>
<tr>
<td>float</td>
<td>4byte</td>
<td></td>
<td>单精度</td>
</tr>
<tr>
<td>double</td>
<td>8byte</td>
<td></td>
<td>双精度</td>
</tr>
<tr>
<td>decimal</td>
<td>第一参数+2</td>
<td></td>
<td>decimal（10，2）<br>表示数有10位<br>2位是小数</td>
</tr>
</tbody></table>
<h6 id="6-4-2字符串类型"><a href="#6-4-2字符串类型" class="headerlink" title="6.4.2字符串类型"></a>6.4.2字符串类型</h6><blockquote>
<p>存储字符序列的数据类型</p>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>字符串序列的长度范围</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>char</strong></td>
<td>0~255 bit</td>
<td>定长字符串，最多 可以存放255个字符；当我们指定数据表字段位char（n）<br>此列中的数据最长为n个字符（一个汉字占2个字符），如果添加的数据少于n，则补‘ \u0000’至n长度</td>
</tr>
<tr>
<td><strong>varchar</strong></td>
<td>0~65535 bit</td>
<td>可变长度字符串，此类型的类最大长度为65535，</td>
</tr>
<tr>
<td>tinyblob</td>
<td>0~255 bit</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>blob</td>
<td>0~65535 bit</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>mediumblob</td>
<td>0~1677215 bit</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>longblob</td>
<td>0~424967295 bit</td>
<td>存储二进制字符串</td>
</tr>
<tr>
<td>tinytext</td>
<td>0~255 bit</td>
<td>文本数据（字符串）</td>
</tr>
<tr>
<td>text</td>
<td>0~65535 bit</td>
<td>文本数据（字符串）</td>
</tr>
<tr>
<td>mediumtext</td>
<td>0~1677215 bit</td>
<td>文本数据（字符串）</td>
</tr>
<tr>
<td><strong>longtext</strong></td>
<td>0~424967295 bit</td>
<td>文本数据（字符串）</td>
</tr>
</tbody></table>
<h6 id="6-4-3日期类型"><a href="#6-4-3日期类型" class="headerlink" title="6.4.3日期类型"></a>6.4.3日期类型</h6><blockquote>
<p>在mysql数据库中，我们可以使用字符串来存储时间，但是如果我们需要基于时间字段进行查询操作（查询在某个时间段内的数据），就不便于查询实现</p>
</blockquote>
<table>
<thead>
<tr>
<th>类型</th>
<th>格式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>date</strong></td>
<td>2021-09-13</td>
<td>日期，只存储年、月、日</td>
</tr>
<tr>
<td>time</td>
<td>11:11:12</td>
<td>时间，只存储时、分、秒</td>
</tr>
<tr>
<td>year</td>
<td>2021</td>
<td>年份</td>
</tr>
<tr>
<td><strong>datetime</strong></td>
<td>2022-11-11 18:45:56</td>
<td>日期+时间，存储年月日时分秒</td>
</tr>
<tr>
<td>timestamp</td>
<td>20221111 184556</td>
<td>日期+时间，日期+时间（时间戳）</td>
</tr>
</tbody></table>
<h3 id="6-5字段约束"><a href="#6-5字段约束" class="headerlink" title="6.5字段约束"></a>6.5字段约束</h3><h6 id="6-5-1约束的介绍"><a href="#6-5-1约束的介绍" class="headerlink" title="6.5.1约束的介绍"></a>6.5.1约束的介绍</h6><blockquote>
<p>在创建数据表的时候，指定的对数据表的列的数据限制性的要求（对表中列的数据进行限制）</p>
</blockquote>
<p>为什么要给表中的列表添加限制呢？</p>
<ul>
<li>保证数据的完整性</li>
<li>保证数据的正确性</li>
<li>保证数据的正确性</li>
</ul>
<p>字段常见的约束有哪些？</p>
<ul>
<li>非空约束 not null： 限制此列的值必须提供，不能为null</li>
<li>唯一约束 unique：在表中的多条数据，此列的值不能重复</li>
<li>主键约束 primary key：非空+唯一，能够唯一标识数据表中一条数据</li>
<li>外键约束 foreign key：建立不同表之间的关联关系</li>
</ul>
<h6 id="6-5-2非空约束"><a href="#6-5-2非空约束" class="headerlink" title="6.5.2非空约束"></a>6.5.2非空约束</h6><blockquote>
<p>限制数据表中此列的值必须提供</p>
</blockquote>
<ul>
<li>创建表：设置图书表的 book_name not null，</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFMIe"><img src="https://s1.ax1x.com/2023/02/08/pSRFMIe.png" alt="pSRFMIe.png" style="zoom:67%;"></a></p>
<p>在添加数据时，如果book_isbn、 book_author不给值，可以默认为null</p>
<p>如果book_name 不给值则提示添加错误</p>
<p>6.5.3唯一约束</p>
<blockquote>
<p>在表中的多条数据，此列的值不能重复</p>
</blockquote>
<ul>
<li>创建表：设置图书表的book_isbn 为 nuique</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">unique</span>,</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>

<ul>
<li>添加数据</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFer6"><img src="https://s1.ax1x.com/2023/02/08/pSRFer6.png" alt="pSRFer6.png" style="zoom:67%;"></a></p>
<p>当我们添加数据时，如果给定的book_isbn的值已经存在，则显示如上结果。</p>
<h6 id="6-5-4主键约束"><a href="#6-5-4主键约束" class="headerlink" title="6.5.4主键约束"></a>6.5.4主键约束</h6><blockquote>
<p>主键——就是数据表中记录的唯一标识，在一张表中最多能有一个主键（主键可以是一个列，也可以是多个列的组合）</p>
<p>当一个字段声明为主键之后，添加数据时：</p>
<ul>
<li>此字段数据不能为null</li>
<li>此字段数据不能重复</li>
</ul>
</blockquote>
<p>6.5.5<strong>创建表时定义主键</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">primary</span> key,</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSRFEx1"><img src="https://s1.ax1x.com/2023/02/08/pSRFEx1.png" alt="pSRFEx1.png"></a></p>
<p>或者</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>),</span><br><span class="line"> <span class="keyword">primary</span> key(book_isbn)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/Blog_\source_posts\sql笔记day1\image-20221111194228749.png" alt="image-20221111194228749"></p>
<p><strong>删除数据表主键约束</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> books <span class="keyword">drop</span> <span class="keyword">primary</span> key;</span><br></pre></td></tr></table></figure>

<p><strong>创建表之后添加主键约束</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## 创建表时没有添加主键约束</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line">  book_isbn <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line">  book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">  book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">## 创建表之后添加主键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> books modify book_isbn <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">primary</span> key;</span><br></pre></td></tr></table></figure>

<h6 id="6-5-5主键的自动增长"><a href="#6-5-5主键的自动增长" class="headerlink" title="6.5.5主键的自动增长"></a>6.5.5主键的自动增长</h6><blockquote>
<p>在我们创建一张数据表时，如果数据表中有列可以作为主键（例如:学生表的学号、图书表的isbn)我们可以直接设置这个列为主键;</p>
<p>当有些数据表中没有合适的列作为主键时，我们可以额外定义一个与记录本身无关的列（ID)作为主键，此列数据无具体的含义主要用于标识一条记录，在 mysql中我们可以将此列定义为int，同时设置为<code>自动增长</code>，当我们向数据表中新增—条记录时，无需提供ID列的值，它会自动生成。</p>
</blockquote>
<ul>
<li>定义int类型字段自动生长：<code>auto_increment</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> types(</span><br><span class="line">type_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">type_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">type_remark <span class="type">varchar</span>(<span class="number">100</span>));</span><br></pre></td></tr></table></figure>

<p>在mysql中，只能将int类型转换为自动生长</p>
<p>注意：自动生长是从1开始，每添加一条记录自动加一，当我们把某条记录删除之后再添加数据，自动生长的数据也不会重复生成(自动生长只保证唯一性，不保证连续性)</p>
<h6 id="6-5-6联合主键"><a href="#6-5-6联合主键" class="headerlink" title="6.5.6联合主键"></a>6.5.6联合主键</h6><blockquote>
<p>联合主键——将数据表中的多列组合再一起设置为表的主键</p>
</blockquote>
<p><strong>定义联合主键</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> grades(</span><br><span class="line">	stu_num <span class="type">char</span>(<span class="number">8</span>),</span><br><span class="line">    course_id <span class="type">int</span>,</span><br><span class="line">    score <span class="type">int</span>,</span><br><span class="line">    <span class="keyword">primary</span> key(stu_num,course_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>注意：在实际企业项目的数据库中，联合主键的使用频率并不高；当一个数据库中没有明确的字段可以作为主键时，我们可以额外添加一个ID字段作为主键。</p>
<h6 id="6-5-7外键约束"><a href="#6-5-7外键约束" class="headerlink" title="6.5.7外键约束"></a>6.5.7外键约束</h6><p>在夺标关联部分详解。</p>
<h3 id="6-6-DML数据操纵语言"><a href="#6-6-DML数据操纵语言" class="headerlink" title="6.6 DML数据操纵语言"></a>6.6 DML数据操纵语言</h3><blockquote>
<p>用于完成对数据表中的数据的插入、删除、修改</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> stus(</span><br><span class="line">stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_tel  <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">stu_qq <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h6 id="6-6-1插入数据"><a href="#6-6-1插入数据" class="headerlink" title="6.6.1插入数据"></a>6.6.1插入数据</h6><p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>(columName,columName) <span class="keyword">values</span>(value1,value2,value3...)</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">## 向数据表中指定的列表添加数据（不允许为空的列表必须有数据）</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20210101&#x27;</span>,<span class="string">&#x27;三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">21</span>,<span class="string">&#x27;13030303300&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">## 数据表名后的字段名列表顺序可以不与表中一致，但是<span class="keyword">values</span>中的值的顺序必须与表名后字段名顺序对应</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_age,stu_tel,stu_gender)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20210103&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;13030303360&#x27;</span>,<span class="string">&#x27;女&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">## 当要向表中的所有列添加数据时，数据比奥后面的字段名可以省略，但是<span class="keyword">values</span>中的顺序要与数据表定义的字段保持一致；</span><br><span class="line"></span><br><span class="line">## 在项目开发中，即使要向所有列表添加数据，建议将列表的列表名显示写出来。增加代码的可读性。</span><br></pre></td></tr></table></figure>

<h6 id="6-6-2删除数据"><a href="#6-6-2删除数据" class="headerlink" title="6.6.2删除数据"></a>6.6.2删除数据</h6><blockquote>
<p>从数据表中删除满足特定条件（所有）的数据</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> <span class="keyword">where</span> conditions;</span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num<span class="operator">=</span><span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age<span class="operator">&gt;</span><span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">## 如果删除语句没有<span class="keyword">where</span>语句，则删除当前数据表中所有的记录（敏感操作）</span><br></pre></td></tr></table></figure>

<h6 id="6-6-3修改数据"><a href="#6-6-3修改数据" class="headerlink" title="6.6.3修改数据"></a>6.6.3修改数据</h6><blockquote>
<p>对数据表中已经添加的记录进行修改update</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> <span class="keyword">set</span> </span><br></pre></td></tr></table></figure>

<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## 将学号为<span class="number">20210105</span>的学生名修改为‘孙七’</span><br><span class="line"><span class="keyword">update</span> stus <span class="keyword">set</span> stu_name<span class="operator">=</span><span class="string">&#x27;孙七&#x27;</span> <span class="keyword">where</span> stu_num<span class="operator">=</span><span class="string">&#x27;20210105&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## 将学号为<span class="number">20210103</span>的学生性别修改为 男，同时将QQ修改为<span class="number">66666</span></span><br><span class="line"><span class="keyword">update</span> stus <span class="keyword">set</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>,stu_qq<span class="operator">=</span><span class="string">&#x27;66666&#x27;</span> <span class="keyword">where</span> stu_num<span class="operator">=</span><span class="string">&#x27;20210103&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## 根据主键修改其他所有列</span><br><span class="line"></span><br><span class="line">## 如果<span class="keyword">update</span>语句没有<span class="keyword">where</span>子句，则表示修改当前所有行（记录）</span><br></pre></td></tr></table></figure>



<h3 id="6-7-DQL-数据查询语句"><a href="#6-7-DQL-数据查询语句" class="headerlink" title="6.7 DQL 数据查询语句"></a>6.7 DQL 数据查询语句</h3><blockquote>
<p>从数据表中提取满足特定条件的记录</p>
<ul>
<li>单表查询</li>
<li>多表联合查询</li>
</ul>
</blockquote>
<h6 id="6-7-1查询基础语法"><a href="#6-7-1查询基础语法" class="headerlink" title="6.7.1查询基础语法"></a>6.7.1查询基础语法</h6><p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## <span class="keyword">select</span> 关键字</span><br><span class="line"><span class="keyword">select</span> columunName1、<span class="number">2</span>、<span class="number">3.</span>.. <span class="keyword">from</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line"> ##如果是要显示查询到的记录所有列，则可以使用<span class="operator">*</span> 替代字段列表名（在项目开发中不建议使用<span class="operator">*</span>）</span><br></pre></td></tr></table></figure>

<h6 id="6-7-2-where子句"><a href="#6-7-2-where子句" class="headerlink" title="6.7.2 where子句"></a>6.7.2 where子句</h6><blockquote>
<p>在删除、修改及查询的语句后都可以添加where子句（条件），用于筛选满足特定的添加的数据进行删除、修改和查询操作。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tableName <span class="keyword">where</span> conditions;</span><br><span class="line"><span class="keyword">update</span> tableName <span class="keyword">set</span> ... <span class="keyword">where</span> conditions;</span><br><span class="line">seclect ... <span class="keyword">from</span> tableName <span class="keyword">where</span> conditions;</span><br></pre></td></tr></table></figure>

<p><strong>条件</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">## <span class="operator">=</span> 等于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num <span class="operator">=</span> <span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">!=</span> 不等于 <span class="operator">&lt;&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num <span class="operator">!=</span> <span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num <span class="operator">&lt;&gt;</span> <span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&gt;</span> 大于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&lt;</span> 小于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&lt;</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&gt;=</span> 大于等于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&gt;=</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&lt;=</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&lt;=</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="keyword">between</span> <span class="keyword">and</span>  [v1,v2]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>条件逻辑运算符</strong></p>
<blockquote>
<p>在where子句中，可以将多个条件通过逻辑运算符（ and or not）进行连接，通过多个条件来筛选要操作的数据。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## <span class="keyword">and</span> 筛选多个条件同时满足得到记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">and</span> stu_age<span class="operator">=</span><span class="operator">&lt;</span><span class="number">21</span>;</span><br><span class="line"></span><br><span class="line">## <span class="keyword">or</span> 筛选多个条件中至少满足一个条件的记录；</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">or</span> stu_age<span class="operator">=</span><span class="operator">&lt;</span><span class="number">21</span>;</span><br><span class="line"></span><br><span class="line">## <span class="keyword">not</span> 取反</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">18</span> <span class="keyword">and</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<h6 id="6-7-3-LIKE子句"><a href="#6-7-3-LIKE子句" class="headerlink" title="6.7.3 LIKE子句"></a>6.7.3 LIKE子句</h6><blockquote>
<p>在where子句的条件中，我们可以使用like关键字来实现模糊查询。</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tableName <span class="keyword">where</span> columnName <span class="keyword">like</span> <span class="string">&#x27;reg&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>在like关键字后的reg表达式中<ul>
<li><code>%</code>表示任意多个字符【<code>%o%</code>包含字母o】</li>
<li><code>_</code>表示一个字符【<code>_o</code>第二个字母为o】</li>
</ul>
</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 查询学生姓名包含字母o的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;_o%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询学生姓名第一个字为‘张’的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;张%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询学生姓名最后一个字母为o的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;%o&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询学生姓名中第二个字母为o的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;_o%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h6 id="6-7-4-对查询结果的处理"><a href="#6-7-4-对查询结果的处理" class="headerlink" title="6.7.4 对查询结果的处理"></a>6.7.4 对查询结果的处理</h6><p><strong>设置查询的列</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> columnName1,columnName2... <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age<span class="operator">&gt;</span><span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p><strong>计算列</strong></p>
<blockquote>
<p>对从数据表中查询的记录的列进行一定的运算之后显示出来</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## 用当前年份减去年龄等于出生年份</span><br><span class="line"><span class="keyword">select</span> stu_name,<span class="number">2021</span><span class="operator">-</span>stu_age <span class="keyword">from</span> stus;</span><br></pre></td></tr></table></figure>

<p><strong>字段别名</strong></p>
<blockquote>
<p>我们可以为查询结果的列名去定义一个语义性更强的别名(如下案例中的<code>as</code>可以省略)</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stu_name <span class="keyword">as</span> 姓名,<span class="number">2022</span><span class="operator">-</span>stu_age <span class="keyword">as</span> 出生年份 <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 姓名      <span class="operator">|</span> 出生年份       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 王五      <span class="operator">|</span>         <span class="number">2002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙七      <span class="operator">|</span>         <span class="number">2001</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> polly     <span class="operator">|</span>        <span class="number">2003</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅     <span class="operator">|</span>        <span class="number">2003</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br></pre></td></tr></table></figure>

<p><strong>消除重复行</strong></p>
<blockquote>
<p>从查询的结果中将重复的记录消除<code>distinct</code></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stu_age <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> stu_age <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br></pre></td></tr></table></figure>

<h6 id="6-7-5-order-by排序"><a href="#6-7-5-order-by排序" class="headerlink" title="6.7.5 order by排序"></a>6.7.5 order by排序</h6><blockquote>
<p>将查询到的满足条件的记录按照指定顺序排序</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tableName <span class="keyword">where</span> conditions <span class="keyword">order</span> <span class="keyword">by</span> columnName <span class="keyword">desc</span><span class="operator">|</span><span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>order by columnName 表示将查询结果按照指定的列排序<ul>
<li>asc按照指定的列升序（默认）</li>
<li>desc按照指定的列降序</li>
</ul>
</li>
</ul>
<p><strong>实例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 单字段排序</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="keyword">order</span> <span class="keyword">by</span> stu_gender <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name  <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> stu_tel     <span class="operator">|</span> stu_qq <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12534564</span> <span class="operator">|</span> 黄鹏    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">44561234513</span> <span class="operator">|</span> <span class="number">132456</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210103</span> <span class="operator">|</span> 王五      <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span> <span class="number">13030303360</span> <span class="operator">|</span> <span class="number">66666</span>  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210106</span> <span class="operator">|</span> polly    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">18859456456</span> <span class="operator">|</span> <span class="number">5664</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210105</span> <span class="operator">|</span> 孙七      <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">13826473744</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210541</span> <span class="operator">|</span> 韩梅梅    <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">45685451321</span> <span class="operator">|</span> <span class="number">546512</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"></span><br><span class="line"># 多字段排序 ：先满足第一个排序规则，当第一个排序的列相同时再按照第二个列的规则排序</span><br><span class="line"> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age<span class="operator">&gt;</span><span class="number">13</span> <span class="keyword">order</span> <span class="keyword">by</span> stu_gender <span class="keyword">desc</span>,stu_age <span class="keyword">asc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name  <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> stu_tel     <span class="operator">|</span> stu_qq <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210107</span> <span class="operator">|</span> 奥达斯    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">14</span> <span class="operator">|</span> <span class="number">13333333333</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12534564</span> <span class="operator">|</span> 黄鹏    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">44561234513</span> <span class="operator">|</span> <span class="number">132456</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210106</span> <span class="operator">|</span> polly     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">18859456456</span> <span class="operator">|</span> <span class="number">5664</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210103</span> <span class="operator">|</span> 王五      <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span> <span class="number">13030303360</span> <span class="operator">|</span> <span class="number">66666</span>  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210105</span> <span class="operator">|</span> 孙七      <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">13826473744</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210541</span> <span class="operator">|</span> 韩梅梅    <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">45685451321</span> <span class="operator">|</span> <span class="number">546512</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br></pre></td></tr></table></figure>

<h6 id="6-7-6-聚合函数"><a href="#6-7-6-聚合函数" class="headerlink" title="6.7.6 聚合函数"></a>6.7.6 聚合函数</h6><blockquote>
<p>SQL提供了一些可以对查询的记录的列进行计算的函数——聚合函数</p>
</blockquote>
<ul>
<li><code>count()</code>统计函数，统计满足条件的指定字段值的个数（记录数）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 统计学生表中学生总数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span>              <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"></span><br><span class="line"># 统计学生表中性别为男的学生总数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(stu_num) <span class="keyword">as</span> 数量 <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> 数量   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>max()</code>计算最大值，查询满足条件的记录中指定列的最大值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">max</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">max</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">21</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>min()</code>计算最小值，查询满足条件的记录中指定列的最小值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">min</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">min</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>sum()</code>计算和，查询满足条件记录中，计算指定列的值的总和</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 计算所有学生的年龄总和</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">sum</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">113</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"># 计算所有性别为女的学生年龄总和</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">sum</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">36</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>avg()</code>求平均值，查询满足条件记录中，计算指定列的平均值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">select</span> <span class="built_in">avg</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">avg</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">18.8333</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">select</span> <span class="built_in">avg</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">avg</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19.2500</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure>

<h6 id="6-7-7-日期函数-和-字符串函数"><a href="#6-7-7-日期函数-和-字符串函数" class="headerlink" title="6.7.7 日期函数 和 字符串函数"></a>6.7.7 日期函数 和 字符串函数</h6><p><strong>日期函数</strong></p>
<blockquote>
<p>当我们向日期类型的列表添加数据时，可以通过字符串类型赋值（字符串的格式为 XXXX-XX-XX XX:XX:XX）如果我们向要获取当前系统时间添加到日期类型的列，可以用<code>now()</code>或者<code>sysdate()</code></p>
</blockquote>
<p>示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">desc</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field         <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> stu_num       <span class="operator">|</span> <span class="type">char</span>(<span class="number">8</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_name      <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_gender    <span class="operator">|</span> <span class="type">char</span>(<span class="number">2</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_age       <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_tel       <span class="operator">|</span> <span class="type">char</span>(<span class="number">11</span>)    <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_qq        <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">11</span>) <span class="operator">|</span> YES  <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_enterence <span class="operator">|</span> datetime    <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"></span><br><span class="line"># 通过字符串类型给日期</span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel,stu_qq,stu_enterence)</span><br><span class="line">   <span class="keyword">values</span>(<span class="string">&#x27;20200108&#x27;</span>,<span class="string">&#x27;张肖三&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;13434343344&#x27;</span>,<span class="string">&#x27;1231111&#x27;</span>,<span class="string">&#x27;2022-11-19 23:33:45&#x27;</span>);</span><br><span class="line">    </span><br><span class="line"># 通过now()函数获取当前时间</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel,stu_qq,stu_enterence)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20200109&#x27;</span>,<span class="string">&#x27;张四三&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;13434356344&#x27;</span>,<span class="string">&#x27;123111661&#x27;</span>,now());</span><br><span class="line">    </span><br><span class="line"># 通过sysdate()函数获取当前时间</span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel,stu_qq,stu_enterence)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20200110&#x27;</span>,<span class="string">&#x27;李磊&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;13993456344&#x27;</span>,<span class="string">&#x27;124441661&#x27;</span>,sysdate());</span><br><span class="line">    </span><br><span class="line"> # 通过now()和sysdate()获得当前系统时间</span><br><span class="line">  <span class="keyword">select</span> sysdate();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> sysdate()           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-11</span><span class="number">-19</span> <span class="number">23</span>:<span class="number">53</span>:<span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">select</span> now();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> now()               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-11</span><span class="number">-19</span> <span class="number">23</span>:<span class="number">54</span>:<span class="number">14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br></pre></td></tr></table></figure>

<p><strong>字符串函数</strong></p>
<blockquote>
<p>通过sql指令对字符串进行处理</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># concat(colunm1,colunm2...)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> concat(stu_name,<span class="string">&#x27;-&#x27;</span>,stu_gender) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> concat(stu_name,<span class="string">&#x27;-&#x27;</span>,stu_gender) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> polly<span class="operator">-</span>男                        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯<span class="operator">-</span>男                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅<span class="operator">-</span>女                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七<span class="operator">-</span>女                         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"></span><br><span class="line"># <span class="built_in">upper</span>(colunm) 将指定列的值转换为大写写</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">upper</span>(stu_name) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">upper</span>(stu_name) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> 孙七            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> POLLY           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"></span><br><span class="line"># <span class="built_in">lower</span>(colunm) 将指定列的值转换为小写</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">lower</span>(stu_name) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">lower</span>(stu_name) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> 孙七            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> polly           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"></span><br><span class="line"># <span class="built_in">substring</span>(<span class="keyword">column</span>,<span class="keyword">start</span>,len) 从指定列中截取需要的片段</span><br><span class="line"> <span class="keyword">select</span> stu_name,<span class="built_in">substring</span>(stu_tel,<span class="number">7</span>,<span class="number">4</span>) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+------------------------+</span></span><br><span class="line"><span class="operator">|</span> stu_name  <span class="operator">|</span> <span class="built_in">substring</span>(stu_tel,<span class="number">7</span>,<span class="number">4</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+------------------------+</span></span><br><span class="line"><span class="operator">|</span> 王五      <span class="operator">|</span> <span class="number">0336</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙七      <span class="operator">|</span> <span class="number">7374</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> polly     <span class="operator">|</span> <span class="number">5645</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯    <span class="operator">|</span> <span class="number">3333</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅    <span class="operator">|</span> <span class="number">5132</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七      <span class="operator">|</span> <span class="number">8564</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+------------------------+</span></span><br></pre></td></tr></table></figure>



<h6 id="6-7-8-分组查询-group-by"><a href="#6-7-8-分组查询-group-by" class="headerlink" title="6.7.8 分组查询-group by"></a>6.7.8 分组查询-group by</h6><blockquote>
<p>分组——将数据表中的记录按照指定的列进行分组、</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 分组字段<span class="operator">/</span>聚合函数 <span class="keyword">from</span> 表名 [<span class="keyword">where</span>条件] <span class="keyword">group</span> <span class="keyword">by</span> 分组列名 [<span class="keyword">having</span>条件]   (加上中括号的为可有可无的)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>SELECT</code>后使用<code>*</code>显示对查询的结果进行分组之后，显示每组第一条记录（这种显示通常是无意义的）</li>
<li><code>select</code>后通常显示分组字段和聚合函数（对分组字段和聚合函数进行统计、求和、求平均值等）</li>
<li>语句执行顺序：1、先根据where语句条件从数据库中查询记录 2、对查询记录进行分组 3、执行having对分组后的数据进行筛选</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># 先对查询的学生信息按性别进行分组（分成了男、女两组），然后再分别统计每组学生的个数</span><br><span class="line"><span class="keyword">select</span> stu_gender,<span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_gender <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> 男         <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 女         <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+</span></span><br><span class="line"></span><br><span class="line">#先对学生按照年龄进行分组（<span class="number">17</span>、<span class="number">20</span>、<span class="number">21</span>、<span class="number">22</span>四组），然后统计各组的学生数量，还可以对最终的结果进行排序</span><br><span class="line"><span class="keyword">select</span> stu_age,<span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_age <span class="keyword">order</span> <span class="keyword">by</span> stu_age;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">21</span> <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">22</span> <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"></span><br><span class="line">#先按照性别进行分组，然后统计每组平均年龄</span><br><span class="line"><span class="keyword">select</span> stu_gender,<span class="built_in">avg</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> stu_gender <span class="operator">|</span> <span class="built_in">avg</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">19.7500</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">20.5000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"></span><br><span class="line">#查询所有学生，按年龄进行分组，分组之后分别统计每组的人数，再筛选当前组人数<span class="operator">&gt;</span><span class="number">1</span>的组，再按年龄升序显示出来</span><br><span class="line"><span class="keyword">select</span> stu_age,<span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_age <span class="keyword">having</span> <span class="built_in">count</span>(stu_num)<span class="operator">&gt;</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> stu_age;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">21</span> <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"></span><br><span class="line"># 查询性别为‘男’学生，按年龄进行分组，分组之后分别统计每组的人数，再筛选当前组人数<span class="operator">&gt;</span><span class="number">1</span>的组，再按年龄升序显示出来 </span><br><span class="line"><span class="keyword">select</span> stu_age,<span class="built_in">count</span>(stu_num)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span> stus</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">group</span> <span class="keyword">by</span> stu_age</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">having</span> <span class="built_in">count</span>(stu_num)<span class="operator">&gt;</span><span class="number">1</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">order</span> <span class="keyword">by</span> stu_age;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">21</span> <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br></pre></td></tr></table></figure>

<h6 id="6-7-9-分页查询-limit"><a href="#6-7-9-分页查询-limit" class="headerlink" title="6.7.9 分页查询-limit"></a>6.7.9 分页查询-limit</h6><blockquote>
<p>当数据表中的记录数据比较多的时候，一次性全部查询出来显示给用户，用户的可读性&#x2F;体验就不太好，因此我们可以将这些数据进行分页进行显示。</p>
</blockquote>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select...</span><br><span class="line">from...</span><br><span class="line">where...</span><br><span class="line">limit param1,param2</span><br></pre></td></tr></table></figure>

<ul>
<li>param1 int，表示获取查询语句的结果中的第一条数据的索引（索引从0开始）</li>
<li>param2 int，表示获取的查询记录的条数（如果剩下的数据条数小于param2，则返回剩下的所有记录）</li>
</ul>
<p><strong>案例</strong></p>
<p>对数据表中的学生信息进行分页显示，总共10条数据，我们每页显示3条</p>
<blockquote>
<p>总记录数 count 10</p>
<p>每页显示 pagesize 3</p>
<p>总页数 pageCount &#x3D; count % pagesize &#x3D;&#x3D; 0 ? count&#x2F;pageSize : count&#x2F;pagesize+1</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#查询第一页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">0</span>,<span class="number">3</span>;		(<span class="number">1</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#查询第二页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">3</span>,<span class="number">3</span>;		(<span class="number">2</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#查询第三页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">6</span>,<span class="number">3</span>;		(<span class="number">3</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#查询第四页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">9</span>,<span class="number">3</span>;		(<span class="number">4</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#如果在一张数据表中，pageNum表示查询的页码，pageSize表示每页显示的条数；同用分页语句如下</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> [<span class="keyword">where</span> ...] limit(pageNum<span class="number">-1</span>)<span class="operator">*</span>pageSize,pageSxie;</span><br></pre></td></tr></table></figure>

<h2 id="七、数据表的关联关系"><a href="#七、数据表的关联关系" class="headerlink" title="七、数据表的关联关系"></a>七、数据表的关联关系</h2><h3 id="7-1关联关系介绍"><a href="#7-1关联关系介绍" class="headerlink" title="7.1关联关系介绍"></a>7.1关联关系介绍</h3><blockquote>
<p>MySQL是一个关系型的数据库，不仅可以存储数据，还可以维护数据与数据间的关系——通过在数据表中添加字段建立外键约束</p>
</blockquote>
<p>数据与数据之间的关系分为四种：</p>
<ul>
<li>一对一关联</li>
<li>一对多关联</li>
<li>多对一关联</li>
<li>多对多关联</li>
</ul>
<h3 id="7-2-一对一关联"><a href="#7-2-一对一关联" class="headerlink" title="7.2 一对一关联"></a>7.2 一对一关联</h3><blockquote>
<p>​		人——身份证           一个人只有一个身份证，一个身份证只对应一个人</p>
<p>​		学生——学籍			一个学生只有一个学籍，一个学籍也对应唯一的一个学生</p>
<p>​		用户——用户详情	一个用户只有一个详情，一个详情也只对应一个用户</p>
</blockquote>
<p><strong>方案1：</strong>主键关联——两张数据表中主键相同的数据为相互对应的数据</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSlnKuF"><img src="https://s1.ax1x.com/2023/01/15/pSlnKuF.png" alt="pSlnKuF.png"></a></p>
<p><strong>方案2：</strong>唯一外键在任意一张表中添加一个字段加外键约束与另一张表主键关联，并且将外键列添加唯一约束</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSlnmcT"><img src="https://s1.ax1x.com/2023/01/15/pSlnmcT.png" alt="pSlnmcT.png"></a></p>
<h3 id="7-3一对多与多对一"><a href="#7-3一对多与多对一" class="headerlink" title="7.3一对多与多对一"></a>7.3一对多与多对一</h3><blockquote>
<p>班级——学生		(一对多)  一个班级包含多个学生</p>
<p>学生——班级		(多对一)   多个学生可以属于同一个班级</p>
<p>图书——分类         商品——商品类别</p>
</blockquote>
<p><strong>方案：</strong>在多的一端添加外键，与一的一端形成关联</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSlne3V"><img src="https://s1.ax1x.com/2023/01/15/pSlne3V.png" alt="pSlne3V.png"></a></p>
<h3 id="7-4-多对多关联"><a href="#7-4-多对多关联" class="headerlink" title="7.4 多对多关联"></a>7.4 多对多关联</h3><blockquote>
<p>学生——课程   一个学生可以选择多门课程，一门课程也可以由多个学生选择</p>
<p>会员——社团   一个会员可以参加多个社团，一个社团也可以招纳多个会员</p>
</blockquote>
<p><strong>方法：</strong>额外创建一张关系表来维护多对多关联——在关系表中定义两个外键，分别与两个数据表的主键进行关联</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSlnZ90"><img src="https://s1.ax1x.com/2023/01/15/pSlnZ90.png" alt="pSlnZ90.png"></a></p>
<h3 id="7-5-外键约束"><a href="#7-5-外键约束" class="headerlink" title="7.5 外键约束"></a>7.5 外键约束</h3><blockquote>
<p>外键约束——将一个列添加外键约束与另一张表的主键（唯一列）进行关联之后，这个外键约束的列添加的数据必须要在关联的主键字段中存在</p>
</blockquote>
<p>案例：学生表 与 班级表</p>
<ol>
<li><p>先创建班级表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classes(</span><br><span class="line">      class_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">      class_name <span class="type">varchar</span>(<span class="number">40</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">      class_remark <span class="type">varchar</span>(<span class="number">200</span>)</span><br><span class="line">      );</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建学生表    （在学生表中添加外键与班级表的主键进行关联）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 【方式一】在创建表的时候，定义cid字段，并添加外键约束</span><br><span class="line"># 由于cid列要与classes表的class_id进行关联，因此cid字段类型和长度要与class_id 一致</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">    stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">    stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid <span class="type">int</span>,</span><br><span class="line">    <span class="keyword">constraint</span> FK_STUDENTS_CLASSES <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> classes(class_id)</span><br><span class="line">);</span><br><span class="line"># <span class="keyword">delete</span> <span class="keyword">from</span> students;</span><br><span class="line">清楚students中的元素</span><br><span class="line"># 【方式二】</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">    stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">    stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid <span class="type">int</span></span><br><span class="line">    );</span><br><span class="line"># 在创建表之后，为cid创建外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">add</span> <span class="keyword">constraint</span> FK_STUDENTs_CLASSES <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> classes(class_id);</span><br><span class="line"></span><br><span class="line">#删除外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">drop</span> <span class="keyword">foreign</span> key FK_STUDENTs_CLASSES;  </span><br></pre></td></tr></table></figure>
</li>
<li><p>向班级列表中添加数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2014&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2015&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2016&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2017&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> classes;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>向学生表中添加学生信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220102&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"># 添加学生时，设置给cid外键列的值必须在其关联主键的主表classes的class_id列存在</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220103&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>,<span class="number">5</span>);</span><br><span class="line">ERROR <span class="number">1452</span> (<span class="number">23000</span>): Cannot <span class="keyword">add</span> <span class="keyword">or</span> <span class="keyword">update</span> a child <span class="type">row</span>: a <span class="keyword">foreign</span> key <span class="keyword">constraint</span> fails (`db_test2`.`students`, <span class="keyword">CONSTRAINT</span> `FK_STUDENTS_CLASSES` <span class="keyword">FOREIGN</span> KEY (`cid`) <span class="keyword">REFERENCES</span> `classes` (`class_id`))</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="7-6-外键约束·级联"><a href="#7-6-外键约束·级联" class="headerlink" title="7.6 外键约束·级联"></a>7.6 外键约束·级联</h3><blockquote>
<p>当学生表中存在学生信息关联班级表的某条记录时，就不能对班级表的这条记录进行修改ID和删除操作：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">select * from classes;</span><br><span class="line">+----------+------------+--------------+</span><br><span class="line">| class_id | class_name | class_remark |</span><br><span class="line">+----------+------------+--------------+</span><br><span class="line">|        1 | 2014       | ...          |   #班级表中class_id=1的班级信息，被学生表中的记录关联了，</span><br><span class="line">|        2 | 2015       | ...          |   # 我们就不能修改2014的class_id，并且不能删除</span><br><span class="line">|        3 | 2016       | ...          |</span><br><span class="line">|        4 | 2017       | ...          |</span><br><span class="line">+----------+------------+--------------+</span><br><span class="line"></span><br><span class="line"> select * from students;</span><br><span class="line">+----------+----------+------------+---------+------+</span><br><span class="line">| stu_num  | stu_name | stu_gender | stu_age | cid  |</span><br><span class="line">+----------+----------+------------+---------+------+</span><br><span class="line">| 20220101 | 张三     | 男         |      18 |    1 |</span><br><span class="line">| 20220102 | 李四     | 男         |      18 |    1 |</span><br><span class="line">| 20220103 | 王五     | 男         |      18 |    1 |</span><br><span class="line">| 20220104 | 赵六     | 男         |      18 |    2 |</span><br><span class="line">+----------+----------+------------+---------+------+</span><br><span class="line"></span><br><span class="line"># 修改报错</span><br><span class="line">update classes set class_id=5 where class_name=&#x27;2014&#x27;;</span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`db_test2`.`students`, CONSTRAINT `FK_STUDENTs_CLASSES` FOREIGN KEY (`cid`) REFERENCES `classes` (`class_id`))</span><br><span class="line"></span><br><span class="line"># 删除报错</span><br><span class="line">delete from classes where class_id=1;</span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`db_test2`.`students`, CONSTRAINT `FK_STUDENTs_CLASSES` FOREIGN KEY (`cid`) REFERENCES `classes` (`class_id`))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果一定要修改2014的班级ID，实现方法如下：</p>
<ul>
<li>将引用2014班级id的学生记录中的cid为NULL</li>
<li>再修改班级信息表中2014记录的class_id</li>
<li>将学生表中cid设置为NULL的记录的cid重新修改为2014这个班级新的id</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">update</span> students <span class="keyword">set</span> cid<span class="operator">=</span><span class="keyword">NULL</span> <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">1</span>;  #结果如下</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、<span class="keyword">update</span> classes <span class="keyword">set</span> class_id<span class="operator">=</span><span class="number">5</span> <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2014&#x27;</span>; #结果如下</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、<span class="keyword">update</span> students <span class="keyword">set</span> cid<span class="operator">=</span><span class="number">5</span> <span class="keyword">where</span> cid <span class="keyword">IS</span> <span class="keyword">NULL</span>;  #结果如下</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br></pre></td></tr></table></figure>

<p><strong><code>我们可以使用级联操作来实现：</code></strong></p>
<ol>
<li><p>在添加外键时，设置<strong>级联修改</strong>和<strong>级联删除</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 删除原有的外键</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">drop</span> <span class="keyword">foreign</span> key FK_STUDENTS_CLASSES;</span><br><span class="line"></span><br><span class="line"># 重新添加外键，并设置级联修改和级联删除</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">add</span> <span class="keyword">constraint</span> FK_STUDENTS_CLASSES <span class="keyword">foreign</span> key <span class="keyword">references</span> classes(class_id) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE <span class="keyword">ON</span> DELET CASCADE;</span><br></pre></td></tr></table></figure>


</li>
<li><p>测试级联修改</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># 班级信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"></span><br><span class="line"># 学生信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line">#直接修改<span class="number">2014</span>的class_id,关联<span class="number">2014</span>这个班级的学生记录的cid也会同步修改。</span><br><span class="line"><span class="keyword">update</span> classes <span class="keyword">set</span> class_id<span class="operator">=</span><span class="number">1</span> <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2014&#x27;</span>;</span><br><span class="line"># class</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line"># student</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置级联删除</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#删除class_id<span class="operator">=</span> <span class="number">1</span>的班级信息，学生表引用此班级信息的记录也会被同步删除。</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> classes <span class="keyword">where</span> class_id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"># 班级信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line"># 学生信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="八、连接查询"><a href="#八、连接查询" class="headerlink" title="八、连接查询"></a>八、连接查询</h2><blockquote>
<p>通过对DQL的学习，我们可以很轻松的从一张数据表中查询出需要的数据；在企业的应用开发中，我们经常需要从多张表中查询数据（例如：我们查询学生信息的时候需要同时查询学生的班级信息）</p>
<p>在MySQL中可以使用join实现多表的联合查询——连接查询，join按照其功能不同分为三个操作：</p>
<ul>
<li><code>inner join 内连接</code></li>
<li><code>left join 左连接</code></li>
<li><code>right join 右连接</code></li>
</ul>
</blockquote>
<h3 id="8-1-数据准备"><a href="#8-1-数据准备" class="headerlink" title="8.1 数据准备"></a>8.1 数据准备</h3><h6 id="8-1-1创建学生班级信息表和学生信息表"><a href="#8-1-1创建学生班级信息表和学生信息表" class="headerlink" title="8.1.1创建学生班级信息表和学生信息表"></a>8.1.1创建学生班级信息表和学生信息表</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classes(</span><br><span class="line">	class_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increament,</span><br><span class="line">	class_name <span class="type">varchar</span>(<span class="number">40</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">	class_remark <span class="type">varchar</span>(<span class="number">200</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">    stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">    stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid <span class="type">int</span>,</span><br><span class="line">    <span class="keyword">constraint</span> FK_STUDENT_CLASSES <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> classes(class_id) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h6 id="8-1-2添加数据"><a href="#8-1-2添加数据" class="headerlink" title="8.1.2添加数据"></a>8.1.2添加数据</h6><p>添加班级信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">2018</span>包含三个学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">#<span class="number">2019</span>包含两个学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">#以下两个班级没有包含对应的学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2020&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2021&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>添加学生信息</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 以下三个学生信息属于class_id<span class="operator">=</span><span class="number">1</span> 的班级<span class="number">2018</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220101&#x27;</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220102&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220103&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"># 以下三个学生信息属于class_id<span class="operator">=</span><span class="number">2</span> 的班级<span class="number">2019</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220104&#x27;</span>,<span class="string">&#x27;赵六&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220105&#x27;</span>,<span class="string">&#x27;孙琪&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"> #小红和小明没有设置班级信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;20220106&#x27;</span>,<span class="string">&#x27;小红&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;20220107&#x27;</span>,<span class="string">&#x27;小明&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<h3 id="8-2-内连接-INNER-JOIN"><a href="#8-2-内连接-INNER-JOIN" class="headerlink" title="8.2 内连接 INNER JOIN"></a>8.2 内连接 INNER JOIN</h3><p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ... <span class="keyword">from</span> tableName <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tableName2;</span><br></pre></td></tr></table></figure>

<h6 id="8-2-1笛卡尔积"><a href="#8-2-1笛卡尔积" class="headerlink" title="8.2.1笛卡尔积"></a>8.2.1笛卡尔积</h6><ul>
<li><p>笛卡尔积（A集合&amp;B集合）：使用A中的每一个记录一次关联B中的每一个记录，笛卡尔积总数&#x3D;A总数*B总数</p>
</li>
<li><p>如果直接执行<code>select ... from tableName INNER JOIN tableName2;</code>会获取两种数据表中的数据集合的笛卡尔积（依次使用tableName1表中的每一条记录 去 匹配tableName2中的每一条记录）</p>
</li>
</ul>
<h6 id="8-2-2-内连接条件"><a href="#8-2-2-内连接条件" class="headerlink" title="8.2.2 内连接条件"></a>8.2.2 内连接条件</h6><blockquote>
<p>两张表使用 INNER JOIN连接查询之后产生的笛卡尔积数据很多是无意义的，我们如何消除无意义的数据呢？</p>
<p>添加两张表进行查询时的条件</p>
</blockquote>
<ul>
<li>使用<code>ON</code>关键字设置两张表连接查询的匹配条件</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用<span class="keyword">where</span>设置过滤条件：先生成笛卡尔积，再从笛卡尔积中过滤数据（效率很低）</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">INNER</span> <span class="keyword">JOIN</span> classes <span class="keyword">WHERE</span> students.cid<span class="operator">=</span>classes.class_id;</span><br><span class="line"></span><br><span class="line"># 使用 <span class="keyword">ON</span>设置连接查询条件：先判断连接条件是否成立，如果成立两张表的数据进行组合生成一条结果记录</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">INNER</span> <span class="keyword">JOIN</span> classes <span class="keyword">ON</span> students.cid<span class="operator">=</span>classes.class_id;</span><br></pre></td></tr></table></figure>

<ul>
<li>结果：只获取两种表中匹配条件成立的数据，任何一张表在另一张表如果没有找到对应匹配则不会出现在查询结果中（例如：小红和小明没有对应的班级信息，2020和2021没有对应的学生）</li>
</ul>
<h3 id="8-3-左连接LEFT-JOIN"><a href="#8-3-左连接LEFT-JOIN" class="headerlink" title="8.3 左连接LEFT JOIN"></a>8.3 左连接LEFT JOIN</h3><blockquote>
<p>需求：查询出所有的学生信息，如果学生有对应的班级信息，则将对应的班级信息也查询出来</p>
</blockquote>
<p>左连接：显示左表中的所有数据，如果在右表中存在与做表满足匹配条件的数据，则进行匹配；如果右表中不存在匹配数据，则显示为NULL。</p>
<p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> leftTable <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> rightTable <span class="keyword">ON</span> 匹配条件 [<span class="keyword">where</span>条件];</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSY3sfK"><img src="https://s1.ax1x.com/2023/01/23/pSY3sfK.png" alt="pSY3sfK.png"></a></p>
<h3 id="8-4-右连接-RIGHT-JOIN"><a href="#8-4-右连接-RIGHT-JOIN" class="headerlink" title="8.4 右连接 RIGHT JOIN"></a>8.4 右连接 RIGHT JOIN</h3><p><strong>语法</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> leftTable <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> rightTable <span class="keyword">ON</span> 匹配条件 [<span class="keyword">where</span>条件];</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSY3rY6"><img src="https://s1.ax1x.com/2023/01/23/pSY3rY6.png" alt="pSY3rY6.png"></a></p>
<h3 id="8-5-数据表别名"><a href="#8-5-数据表别名" class="headerlink" title="8.5 数据表别名"></a>8.5 数据表别名</h3><blockquote>
<p>如果在连接查询的表中存在多个重复的字段，我们可以用<code>表名.字段名</code>来进行区分，如果表明太长则不便于SQL语句的编写，我们可以使用数据表别名</p>
</blockquote>
<p>使用实例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.<span class="operator">*</span>,c.class_name</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> classes c</span><br><span class="line"><span class="keyword">ON</span> s.cid<span class="operator">=</span>c.class_id</span><br></pre></td></tr></table></figure>

<h3 id="8-6-子查询-x2F-嵌套查询"><a href="#8-6-子查询-x2F-嵌套查询" class="headerlink" title="8.6 子查询&#x2F;嵌套查询"></a>8.6 子查询&#x2F;嵌套查询</h3><blockquote>
<p>子查询——先进行查询一次，第一次查询的结果作为</p>
</blockquote>
<h6 id="8-6-1-子查询返回单个值-单行单列"><a href="#8-6-1-子查询返回单个值-单行单列" class="headerlink" title="8.6.1 子查询返回单个值-单行单列"></a>8.6.1 子查询返回单个值-单行单列</h6><p>**案例1:**查询班级名称为’2018’班级中的学生信息(只知道班级名称，而不知道班级ID)</p>
<ul>
<li>传统的查询方式</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a.查询<span class="number">2018</span>班的班级编号</span><br><span class="line"><span class="keyword">select</span> class_id <span class="keyword">from</span> classes <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2018&#x27;</span></span><br><span class="line"></span><br><span class="line">b.查询此班级编号下的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>子查询</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#如果返子查询返回的结果是一个值（单行单列），条件可以直接使用关系运算符（<span class="operator">=</span>   <span class="operator">!=</span>   ....）</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> classes <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2018&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="8-6-2-子查询返回多个值-多行单列"><a href="#8-6-2-子查询返回多个值-多行单列" class="headerlink" title="8.6.2 子查询返回多个值-多行单列"></a>8.6.2 子查询返回多个值-多行单列</h6><p><strong>案例2:</strong></p>
<ul>
<li>传统的查询方式</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.查询左右<span class="number">201</span>X的班级编号</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> classes <span class="keyword">where</span> class_name <span class="keyword">LIKE</span> <span class="string">&#x27;201%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSY30T1"><img src="https://s1.ax1x.com/2023/01/23/pSY30T1.png" alt="pSY30T1.png"></a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">b.查询这些班级编号中的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSY3wwR"><img src="https://s1.ax1x.com/2023/01/23/pSY3wwR.png" alt="pSY3wwR.png"></a></p>
<ul>
<li>子查询</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 如果子查询返回的值是多个值（单列多行），条件使用 <span class="keyword">IN</span><span class="operator">/</span><span class="keyword">NOT</span> <span class="keyword">IN</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid <span class="keyword">IN</span> (<span class="keyword">select</span> class_id <span class="keyword">from</span> classes <span class="keyword">where</span> class_name <span class="keyword">LIKE</span> <span class="string">&#x27;201%&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="8-6-3-子查询返回多个值-多行多列"><a href="#8-6-3-子查询返回多个值-多行多列" class="headerlink" title="8.6.3 子查询返回多个值-多行多列"></a>8.6.3 子查询返回多个值-多行多列</h6><p><strong>案例3：</strong><code>查询cid=1的班级中性别为男的学生信息</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 多条件查询</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> cid <span class="operator">=</span> <span class="number">1</span> <span class="keyword">AND</span> stu_gender<span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 子查询:先查询cid<span class="operator">=</span><span class="number">1</span> 班级中的所有学生信息，将这些信息作为一个整体虚拟表（多行多列）</span><br><span class="line"># 再基于这个虚拟表查询性别为男的学生信息（虚拟表需要别名）</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> cid <span class="operator">=</span> <span class="number">1</span>) t <span class="keyword">WHERE</span> t.stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h2 id="九、存储过程"><a href="#九、存储过程" class="headerlink" title="九、存储过程"></a>九、存储过程</h2><h3 id="9-1-存储过程介绍"><a href="#9-1-存储过程介绍" class="headerlink" title="9.1 存储过程介绍"></a>9.1 存储过程介绍</h3><h6 id="9-1-1-SQL指令执行过程"><a href="#9-1-1-SQL指令执行过程" class="headerlink" title="9.1.1 SQL指令执行过程"></a>9.1.1 SQL指令执行过程</h6><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pSY3DFx"><img src="https://s1.ax1x.com/2023/01/23/pSY3DFx.png" alt="pSY3DFx.png"></a></p>
<p>从SQL指令执行的流程中我们分析存在的问题：</p>
<ol>
<li>如果我们需要重复多次执行相同的SQL，SQL执行都需要通过连接传递到MySQL，并且需要经过编译和执行的步骤；</li>
<li>如果我们需要连续执行多个SQL指令，并且第二个SQL指令需要使用第一个SQL指令执行的结果作为参数；</li>
</ol>
<h6 id="9-1-2-存储过程的介绍"><a href="#9-1-2-存储过程的介绍" class="headerlink" title="9.1.2 存储过程的介绍"></a>9.1.2 存储过程的介绍</h6><blockquote>
<p>存储过程：</p>
<p>将能够完成特定功能的SQL指令进行封装（SQL指令集），编译之后存储再数据库服务器上，并且为之取一个名字，客户端可以通过名字直接调用这个SQL指令集，获取执行结果。</p>
</blockquote>
<p>存储过程优点</p>
<ol>
<li>SQL指令无需客户端编写，通过网络传送，可以节省网络开销，同时避免SQL指令在网络传输过程被恶意篡改保证安全性；</li>
<li>存储过程经过编译创建保存在数据库中，执行过程中无需重复地进行编译操作，对SQL指令的执行过程进行了性能提升；</li>
<li>存储过程中多个SQL指令之间存在逻辑关系，支持流程控制语句（分支、循环），可以实现更复杂的业务；</li>
</ol>
<p>存储过程的缺点：</p>
<ol>
<li>存储过程是根据不同的数据库进行编译、创建并存储在数据库中；当我们需要切换到其他数据库产品时，需要重写针对新数据库的存储过程；</li>
<li>存储过程受限于数据库产品，如果需要性能的优化会成为一个问题；</li>
<li>在互联网项目中，如果需要数据库的高（连接）并发访问，使用存储过程会增加数据库的连接执行时间（因为我们将复杂的业务交给了数据库进行处理）</li>
</ol>
<h3 id="9-2-创建存储过程"><a href="#9-2-创建存储过程" class="headerlink" title="9.2 创建存储过程"></a>9.2 创建存储过程</h3><blockquote>
<p>存储过程：就是将能够完成特定功能的SQL指令进行封装</p>
</blockquote>
<h6 id="9-2-1-存储过程创建语法"><a href="#9-2-1-存储过程创建语法" class="headerlink" title="9.2.1 存储过程创建语法"></a>9.2.1 存储过程创建语法</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 语法</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> <span class="operator">&lt;</span>proc_name<span class="operator">&gt;</span>([<span class="keyword">IN</span><span class="operator">/</span><span class="keyword">OUT</span> args])</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SQL</span></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<p>示例:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#创建一个存储过程实现加法以运算：</span><br><span class="line">#JAVA语法中，方法是由参数和返回值的，</span><br><span class="line">#存储过程中是由输入参数 和 输出参数的</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test1(<span class="keyword">IN</span> a <span class="type">int</span>,<span class="keyword">In</span> b <span class="type">int</span>,<span class="keyword">OUT</span> c <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">SET</span> c<span class="operator">=</span> a<span class="operator">+</span>b;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="9-3-调用存储过程"><a href="#9-3-调用存储过程" class="headerlink" title="9.3 调用存储过程"></a>9.3 调用存储过程</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 定义变量<span class="variable">@m</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@m</span><span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"># 调用存储过程，将<span class="number">3</span>传给a,将<span class="number">2</span>传给b ，将<span class="variable">@m</span>传递给c</span><br><span class="line"><span class="keyword">CALL</span> proc_test1(<span class="number">3</span>,<span class="number">2</span>,<span class="variable">@m</span>);</span><br><span class="line"># 显示变量值</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@m</span> <span class="keyword">from</span> DUAL;</span><br></pre></td></tr></table></figure>

<h3 id="9-4-存储过程中变量的使用"><a href="#9-4-存储过程中变量的使用" class="headerlink" title="9.4 存储过程中变量的使用"></a>9.4 存储过程中变量的使用</h3><blockquote>
<p>存储过程中的变量分为两种：局部变量   用户变量</p>
</blockquote>
<h6 id="9-4-1-局部变量"><a href="#9-4-1-局部变量" class="headerlink" title="9.4.1 局部变量"></a>9.4.1 局部变量</h6><p>局部变量：定义在存储过程中的变量，只能存储在过程内部使用。</p>
<ul>
<li>局部变量定义语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 局部变量要定义在存储过程中，而且必须定义在存储过程中开始</span><br><span class="line"><span class="keyword">declare</span> <span class="operator">&lt;</span>attr_name<span class="operator">&gt;</span> <span class="operator">&lt;</span>type<span class="operator">&gt;</span> [<span class="keyword">default</span> <span class="keyword">value</span>];</span><br></pre></td></tr></table></figure>

<ul>
<li>局部变量定义示例：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 创建一个存储过程：计算输入参数的平方与 输入参数<span class="operator">/</span><span class="number">2</span> 之和</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_teset2(<span class="keyword">IN</span> a <span class="type">INT</span> , <span class="keyword">OUT</span> r <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> x <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> y <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">SET</span> x <span class="operator">=</span> a<span class="operator">*</span>a;</span><br><span class="line">	<span class="keyword">SET</span> y <span class="operator">=</span> a<span class="operator">/</span><span class="number">2</span>;</span><br><span class="line">	<span class="keyword">SET</span> r <span class="operator">=</span> x<span class="operator">+</span>y;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="9-4-2-用户变量"><a href="#9-4-2-用户变量" class="headerlink" title="9.4.2 用户变量"></a>9.4.2 用户变量</h6><p>用户变量：相当于全局变量，定义的用户变量可以通过<code>select @attrName from dual </code> 进行查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#用户变量会存储在MySQL数据库的数据字典中（dual）</span><br><span class="line">#用户变量定义使用<span class="keyword">set</span>关键字直接定义，变量名要以@开头</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@n</span><span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h6 id="9-4-3-给变量设置值"><a href="#9-4-3-给变量设置值" class="headerlink" title="9.4.3 给变量设置值"></a>9.4.3 给变量设置值</h6><ul>
<li>无论是局部变量还是用户变量，都是使用<code>set</code>关键字修改值</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@n</span><span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">CALL</span> proc_test2 (<span class="number">6</span>, <span class="variable">@n</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@n</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h6 id="9-4-4-将查询结果赋值给变量"><a href="#9-4-4-将查询结果赋值给变量" class="headerlink" title="9.4.4 将查询结果赋值给变量"></a>9.4.4 将查询结果赋值给变量</h6><p>在存储过程中使用select…into…给变量赋值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查询学生数量</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_test3(<span class="keyword">OUT</span> c <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(stu_num) <span class="keyword">INTO</span> c <span class="keyword">FROM</span> students; #赋值给c</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"># 调用存储过程</span><br><span class="line"><span class="keyword">call</span> pro_test3(<span class="variable">@n</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@n</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h6 id="9-4-5-用户变量使用的注意事项"><a href="#9-4-5-用户变量使用的注意事项" class="headerlink" title="9.4.5 用户变量使用的注意事项"></a>9.4.5 用户变量使用的注意事项</h6><blockquote>
<p>因为用户变量相当于全局变量，可以在SQL指令以及多个存储过程中共享，在开发中建议尽量少使用用户变量，用户变量过多会导致程序不易理解、难以维护。</p>
</blockquote>
<h3 id="9-5-存储过程的参数"><a href="#9-5-存储过程的参数" class="headerlink" title="9.5 存储过程的参数"></a>9.5 存储过程的参数</h3><blockquote>
<p>MySQL存储过程的参数一共有三种：IN \ OUT \ INOUT</p>
</blockquote>
<h6 id="9-5-1-IN-输入参数"><a href="#9-5-1-IN-输入参数" class="headerlink" title="9.5.1 IN 输入参数"></a>9.5.1 IN 输入参数</h6><p>输入参数——在调用存储过程中传递数据给存储过程的参数（在调用的过程中必须为具有实际值的变量）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建存储过程：添加学生信息</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test4(<span class="keyword">IN</span> snum <span class="type">char</span>(<span class="number">8</span>),<span class="keyword">IN</span> sname <span class="type">char</span>(<span class="number">20</span>), <span class="keyword">IN</span> gender <span class="type">CHAR</span>(<span class="number">2</span>), <span class="keyword">IN</span> age <span class="type">int</span>,<span class="keyword">IN</span> cid <span class="type">INT</span>, <span class="keyword">In</span> remark <span class="type">VARCHAR</span>(<span class="number">255</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark)</span><br><span class="line"><span class="keyword">VALUES</span>(snum,sname,gender,age,cid,remark);</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test4(<span class="string">&#x27;20220108&#x27;</span>, <span class="string">&#x27;小丽&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="string">&#x27;aaa&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h6 id="9-5-2-OUT输出参数"><a href="#9-5-2-OUT输出参数" class="headerlink" title="9.5.2 OUT输出参数"></a>9.5.2 OUT输出参数</h6><p>输出参数——将存储过程中产生的数据返回给过程的调用者，相当于JAVA方法的返回值，但不同的是一个存储过程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#创建存储过程，根据学生学号查询学生姓名</span><br><span class="line">CREATE PROCEDURE proc_test5(IN snum char(8),OUT sname VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">SELECT stu_name INTO sname FROM students where stu_num=snum;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">SET @name=&#x27;&#x27;;</span><br><span class="line">CALL proc_test5(&#x27;20220108&#x27;,@name);</span><br><span class="line">SELECT @name from DUAL;</span><br></pre></td></tr></table></figure>

<h6 id="9-5-3-INOUT-输入输出参数"><a href="#9-5-3-INOUT-输入输出参数" class="headerlink" title="9.5.3 INOUT 输入输出参数"></a>9.5.3 INOUT 输入输出参数</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test6(<span class="keyword">INOUT</span> str <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> stu_name <span class="keyword">INTO</span> str <span class="keyword">FROM</span> students <span class="keyword">where</span> stu_num<span class="operator">=</span>str;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@name</span><span class="operator">=</span><span class="string">&#x27;20220108&#x27;</span>;</span><br><span class="line"><span class="keyword">CALL</span> proc_test6(<span class="variable">@name</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@name</span> <span class="keyword">from</span> DUAL;</span><br></pre></td></tr></table></figure>



<h3 id="9-6-存储过程中的流程控制"><a href="#9-6-存储过程中的流程控制" class="headerlink" title="9.6 存储过程中的流程控制"></a>9.6 存储过程中的流程控制</h3><blockquote>
<p>在存储过程中流程控制语句用于实现逻辑的控制</p>
</blockquote>
<h6 id="9-6-1-分支语句"><a href="#9-6-1-分支语句" class="headerlink" title="9.6.1 分支语句"></a>9.6.1 分支语句</h6><ul>
<li>if - then - else</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 单分支：如果条件成立，则执行<span class="keyword">SQL</span></span><br><span class="line">if conditions <span class="keyword">then</span></span><br><span class="line">		<span class="comment">--SQL</span></span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line"># 如果参数a的值为<span class="number">1</span>，则添加一条班级信息</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test7(<span class="keyword">IN</span> a <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	IF a<span class="operator">=</span><span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;2022&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">	<span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 双分支：如果条件成立则执行SQL1，否则执行SQL2</span><br><span class="line">if conditions <span class="keyword">then</span></span><br><span class="line">		<span class="comment">--SQL1</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">		<span class="comment">--SQL2</span></span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line"># 如果参数a的值为<span class="number">1</span>，则添加一条班级信息，否则添加一条学生信息</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test7(<span class="keyword">IN</span> a <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	IF a<span class="operator">=</span><span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;2022&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">	<span class="keyword">ELSE</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;20220109&#x27;</span>,<span class="string">&#x27;小花&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">19</span>,<span class="number">1</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"> 	<span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test7(<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>case</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test8(<span class="keyword">IN</span> a <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">case</span> a </span><br><span class="line">	<span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="comment">-- SQL1  如果a的值为1，则执行SQL1</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;2023&#x27;</span>,<span class="string">&#x27;hfajds&#x27;</span>);</span><br><span class="line">	<span class="keyword">when</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line">		<span class="comment">-- SQL2 如果a的值为2，则执行SQL2</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark)</span><br><span class="line">		<span class="keyword">VALUES</span>(<span class="string">&#x27;20220110&#x27;</span>,<span class="string">&#x27;小刚&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">	<span class="keyword">ELSE</span></span><br><span class="line">		<span class="comment">-- SQL 如果变量的值和所有的when的值都不匹配，则执行else中的这个SQL</span></span><br><span class="line">		<span class="keyword">UPDATE</span> students <span class="keyword">set</span> stu_age<span class="operator">=</span><span class="number">18</span> <span class="keyword">WHERE</span> stu_num<span class="operator">=</span><span class="string">&#x27;20220109&#x27;</span>;</span><br><span class="line">	<span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>



<h6 id="9-6-2-循环语句"><a href="#9-6-2-循环语句" class="headerlink" title="9.6.2 循环语句"></a>9.6.2 循环语句</h6><ul>
<li>while</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test9(<span class="keyword">IN</span> num <span class="type">INT</span>)</span><br><span class="line"> <span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="type">int</span>;#定义局部变量</span><br><span class="line">	<span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">	WHILE i<span class="operator">&lt;</span>num DO</span><br><span class="line">		<span class="comment">-- SQL</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(CONCAT(<span class="string">&#x27;H&#x27;</span>,i),<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line">		<span class="keyword">SET</span> i<span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">	<span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test9(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>



<ul>
<li>repeat</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test10(<span class="keyword">IN</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="type">INT</span>;</span><br><span class="line">	<span class="keyword">SET</span> i <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">	REPEAT</span><br><span class="line">	  <span class="comment">-- SQL</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(CONCAT(<span class="string">&#x27;Z&#x27;</span>,i),<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">	UNTIL i <span class="operator">&gt;</span> num <span class="keyword">END</span> REPEAT;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test10(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>



<ul>
<li>loop</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test11(<span class="keyword">IN</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> i <span class="type">INT</span> ;</span><br><span class="line">	<span class="keyword">set</span> i <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">	myloop: LOOP</span><br><span class="line">		<span class="comment">-- SQL</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(CONCAT(<span class="string">&#x27;HTML&#x27;</span>,i),<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">		IF i <span class="operator">=</span>num <span class="keyword">THEN</span></span><br><span class="line">			LEAVE myloop; </span><br><span class="line">		<span class="keyword">END</span> IF; </span><br><span class="line">	<span class="keyword">END</span> LOOP myloop;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test11(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<h3 id="9-7-存储过程的管理"><a href="#9-7-存储过程的管理" class="headerlink" title="9.7 存储过程的管理"></a>9.7 存储过程的管理</h3><h6 id="9-7-1-查询存储过程"><a href="#9-7-1-查询存储过程" class="headerlink" title="9.7.1 查询存储过程"></a>9.7.1 查询存储过程</h6><blockquote>
<p>存储过程是隶属于某个数据库的，也就是说当我们将存储过程创建在某个数据库之后，只能在当前数据库中调用此存储过程。</p>
<p>查询存储过程：查询某个数据库中有哪些存储过程</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 根据数据库名，查询当前数据库中的存储过程</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PROCEDURE</span> STATUS <span class="keyword">WHERE</span> db<span class="operator">=</span><span class="string">&#x27;db_test2&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#查询存储过程的创作细节</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> db_test2.proc_test1;</span><br></pre></td></tr></table></figure>

<h6 id="9-7-2-修改存储过程"><a href="#9-7-2-修改存储过程" class="headerlink" title="9.7.2 修改存储过程"></a>9.7.2 修改存储过程</h6><blockquote>
<p>修改存储过程指的是修改存储过程的特性&#x2F;特征</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">PROCEDURE</span> <span class="operator">&lt;</span>proc_name<span class="operator">&gt;</span> 特征<span class="number">1</span> [特征<span class="number">2</span>，特征<span class="number">3.</span>..]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>CONTAINS SQL</code>表示子程序包含SQL语句，但不包含读或写数据的语句</li>
<li><code>NO SQL</code>表示子程序中不包含SQL语句</li>
<li><code>READS SQL DATA</code>表示子程序中包含读数据的语句</li>
<li><code>MODIFIES SQL DATA</code>表示子程序中包含写数据的语句</li>
<li><code>SQL SECURITY &#123; DEFINER |INVOKER &#125;</code>指明谁有权限来执行<ul>
<li><code>DEFINER</code>表示只有定义者自己才能够执行</li>
<li><code>NVOKER</code>表示调用者可以执行</li>
</ul>
</li>
<li><code>COMMENT &#39;string&#39;</code>表示注释信息</li>
</ul>
<h6 id="9-7-3-删除存储过程"><a href="#9-7-3-删除存储过程" class="headerlink" title="9.7.3 删除存储过程"></a>9.7.3 删除存储过程</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 删除存储过程</span><br><span class="line"># 删除数据库中的对象、数据库、列、存储过程、视图、触发器、索引...</span><br><span class="line"># <span class="keyword">delete</span> 删除数据表中的数据</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> proc_test1;</span><br></pre></td></tr></table></figure>

<h3 id="9-8-存储过程练习案例"><a href="#9-8-存储过程练习案例" class="headerlink" title="9.8 存储过程练习案例"></a>9.8 存储过程练习案例</h3><blockquote>
<p>使用存储过程解决企业项目开发过程的问题、</p>
<p>案例：使用存储过程完成借书操作</p>
</blockquote>
<h6 id="9-8-1-数据准备"><a href="#9-8-1-数据准备" class="headerlink" title="9.8.1 数据准备"></a>9.8.1 数据准备</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># 创建数据库</span><br><span class="line"><span class="keyword">create</span> database db_test3;</span><br><span class="line"></span><br><span class="line"># 使用数据库</span><br><span class="line">use db_tset3;</span><br><span class="line"></span><br><span class="line"># 创建图书信息表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line">book_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">book_name <span class="type">varchar</span>(<span class="number">58</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">book_author <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">book_price <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">book_stock <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">NULL</span>,</span><br><span class="line">book_desc <span class="type">varchar</span>(<span class="number">200</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 添加图书信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> books(book_name,book_author,book_price,book_stock,book_desc)<span class="keyword">values</span>(<span class="string">&#x27;Java程序设计&#x27;</span>,<span class="string">&#x27;亮亮&#x27;</span>,<span class="number">38.80</span>,<span class="number">12</span>,<span class="string">&#x27;老师带你学Java&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> books(book_name,book_author,book_price,book_stock,book_desc)<span class="keyword">values</span>(<span class="string">&#x27;Java王者之路&#x27;</span>,<span class="string">&#x27;威哥&#x27;</span>,<span class="number">44.40</span>,<span class="number">9</span>,<span class="string">&#x27;威哥Java王者领路人&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 创建学生信息表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">	stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">	stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 添加学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name, stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name, stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name, stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<p><strong>业务分析</strong></p>
<blockquote>
<p>哪个学生借哪本书，借了多少本书？</p>
<p>操作：</p>
<ul>
<li>保存借书记录</li>
<li>修改图书库存</li>
</ul>
<p>条件：</p>
<ul>
<li>判断学生是否存在？</li>
<li>判断图书是否存在，库存是否充足？</li>
</ul>
</blockquote>
<p><strong>创建借书记录表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 借书记录表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">table</span> records(</span><br><span class="line">	rid <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">	snum <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">NULL</span>,</span><br><span class="line">	bid <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	borrow_num <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">NULL</span>,</span><br><span class="line">	is_return <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>, <span class="comment">-- 0 表示未归还， 1 表示已经归还</span></span><br><span class="line">	borrow_date <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> FK_RECORDS_STUDENTS <span class="keyword">foreign</span> key(snum) <span class="keyword">REFERENCES</span> students(stu_num),</span><br><span class="line">	<span class="keyword">CONSTRAINT</span> FK_RECORDS_BOOKS <span class="keyword">FOREIGN</span> KEY(bid) <span class="keyword">REFERENCES</span> books(book_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h6 id="9-8-2-创建存储过程"><a href="#9-8-2-创建存储过程" class="headerlink" title="9.8.2 创建存储过程"></a>9.8.2 创建存储过程</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 实现借书业务</span><br><span class="line"># 参数<span class="number">1</span>：a 输入参数 学号</span><br><span class="line"># 参数<span class="number">2</span>：b 输入参数 图书编号</span><br><span class="line"># 参数<span class="number">3</span>：m 输入参数 借书的数量</span><br><span class="line"># 参数<span class="number">4</span>：state 输出参数 借书的状态 (<span class="number">1</span>：借书成功 <span class="number">2</span>：学号不存在 <span class="number">3</span>：图书不存在 <span class="number">4</span>：库存不足)</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_borrow_book(<span class="keyword">IN</span> a <span class="type">char</span>(<span class="number">4</span>),<span class="keyword">IN</span> b <span class="type">INT</span>,<span class="keyword">IN</span> m <span class="type">INT</span>,<span class="keyword">OUT</span> state <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span> stu_count <span class="type">int</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> book_count <span class="type">INT</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span> stock <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="comment">-- 判断学号是否存在：根据参数a到学生信息表查询是否有stu_num=a的记录</span></span><br><span class="line">	<span class="comment">-- COUNT()函数统计数量</span></span><br><span class="line">	<span class="keyword">SELECT</span> <span class="built_in">count</span>(stu_num) <span class="keyword">INTO</span> stu_count <span class="keyword">from</span> students <span class="keyword">WHERE</span> stu_num<span class="operator">=</span>a;</span><br><span class="line">	IF stu_count<span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">			<span class="comment">-- 学号存在</span></span><br><span class="line">			<span class="comment">-- 判断图书ID是否存在：根据参数b，查询图书记录总数</span></span><br><span class="line">			<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(book_id) <span class="keyword">INTO</span> book_count <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> book_id<span class="operator">=</span>b;</span><br><span class="line">			if book_count <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line">					<span class="comment">-- 图书存在</span></span><br><span class="line">					<span class="comment">-- 判断是图书的库存是否充足，查询当前图书库存，然后和参数m进行比较</span></span><br><span class="line">					<span class="keyword">SELECT</span> book_stock <span class="keyword">INTO</span> stock <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> book_id<span class="operator">=</span>b;</span><br><span class="line">					IF stock <span class="operator">&gt;=</span> m <span class="keyword">THEN</span></span><br><span class="line">						<span class="comment">-- 执行借书</span></span><br><span class="line">						<span class="comment">-- 操作1：在借书记录表中添加记录</span></span><br><span class="line">						<span class="keyword">INSERT</span> <span class="keyword">INTO</span> records (snum,bid,borrow_num,is_return,borrow_date) <span class="keyword">VALUES</span>(a,b,m,<span class="number">0</span>,SYSDATE());</span><br><span class="line">						<span class="comment">-- 操作2：修改图书库存</span></span><br><span class="line">						<span class="keyword">UPDATE</span> books <span class="keyword">SET</span> book_stock<span class="operator">=</span>stock<span class="operator">-</span>m <span class="keyword">WHERE</span> book_id<span class="operator">=</span>b;</span><br><span class="line">						<span class="comment">-- 借书成功</span></span><br><span class="line">						<span class="keyword">SET</span> state <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">					<span class="keyword">ELSE</span></span><br><span class="line">						<span class="comment">-- 库存不足</span></span><br><span class="line">						<span class="keyword">SET</span> state <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">					<span class="keyword">END</span> IF;</span><br><span class="line">			<span class="keyword">ELSE</span> </span><br><span class="line">					<span class="comment">-- 图书不存在</span></span><br><span class="line">					<span class="keyword">set</span> state <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line">			<span class="keyword">END</span> IF;</span><br><span class="line">	<span class="keyword">ELSE</span></span><br><span class="line">			<span class="comment">-- 不存在</span></span><br><span class="line">			<span class="keyword">SET</span> state <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h6 id="9-8-3-创建存储过程实现还书业务"><a href="#9-8-3-创建存储过程实现还书业务" class="headerlink" title="9.8.3 创建存储过程实现还书业务"></a>9.8.3 创建存储过程实现还书业务</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">还在写</span><br></pre></td></tr></table></figure>



<h3 id="9-9-游标"><a href="#9-9-游标" class="headerlink" title="9.9 游标"></a>9.9 游标</h3><blockquote>
<p>如果我们要创建一个存储过程，需要返回查询语句查询到多条数据，该如何实现呢？</p>
</blockquote>
<h6 id="9-9-1-游标的概念"><a href="#9-9-1-游标的概念" class="headerlink" title="9.9.1 游标的概念"></a>9.9.1 游标的概念</h6><p>游标可以用来依次取出查询结果集中的每一条数据——逐条读取查询结果集中的记录</p>
<h6 id="9-9-2-游标的使用"><a href="#9-9-2-游标的使用" class="headerlink" title="9.9.2 游标的使用"></a>9.9.2 游标的使用</h6><p><strong>1. 声明游标</strong></p>
<ul>
<li>声明游标的语法：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> cursor_name <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> select_statement;</span><br></pre></td></tr></table></figure>

<ul>
<li>实例</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> mycursor <span class="keyword">FOR</span> <span class="keyword">SELECT</span> book_name,book_author,book_price <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> book_id<span class="operator">=</span>id;</span><br></pre></td></tr></table></figure>

<p><strong>2.打开游标</strong></p>
<ul>
<li>语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">OPEN</span> mycursor;</span><br></pre></td></tr></table></figure>

<p><strong>3. 使用游标</strong></p>
<p> 使用游标：提取游标当前指向的记录（提取之后，游标自动下移）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 使用游标：提取游标当前指向的记录（提取之后，游标自动下移）</span><br><span class="line">	<span class="keyword">FETCH</span> <span class="keyword">INTO</span> mycursor <span class="keyword">INTO</span> bname,bauthor,bprice;</span><br></pre></td></tr></table></figure>

<h6 id="9-9-3-游标使用案例"><a href="#9-9-3-游标使用案例" class="headerlink" title="9.9.3  游标使用案例"></a>9.9.3  游标使用案例</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test2(<span class="keyword">OUT</span> <span class="keyword">result</span> <span class="type">VARCHAR</span>(<span class="number">200</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">DECLARE</span> bname <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line">		<span class="keyword">DECLARE</span> bauthor <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line">		<span class="keyword">DECLARE</span> bprice <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>);</span><br><span class="line">		<span class="keyword">DECLARE</span> num <span class="type">INT</span>;</span><br><span class="line">		<span class="keyword">DECLARE</span> i <span class="type">INT</span>;</span><br><span class="line">		<span class="keyword">DECLARE</span> str <span class="type">VARCHAR</span>(<span class="number">50</span>);</span><br><span class="line">		# 此查询语句查询以后返回的是一个结果集（多条记录），使用游标</span><br><span class="line">		<span class="keyword">DECLARE</span> mycursor <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> <span class="keyword">SELECT</span> book_name,book_author,book_price <span class="keyword">FROM</span> books;</span><br><span class="line">		<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">INTO</span> num <span class="keyword">FROM</span> books;</span><br><span class="line">		# 打开游标</span><br><span class="line">		<span class="keyword">OPEN</span> mycursor;</span><br><span class="line">		# 使用游标要结合循环语句</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		WHILE i<span class="operator">&lt;</span>num DO</span><br><span class="line">		# 使用游标：提取游标当前指向的记录（提取之后，游标自动下移）</span><br><span class="line">		<span class="keyword">FETCH</span> mycursor <span class="keyword">INTO</span> bname,bauthor,bprice;</span><br><span class="line">		<span class="keyword">SET</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">		# <span class="keyword">SET</span> str <span class="operator">=</span>CONCAT_WS(<span class="string">&#x27;~&#x27;</span>,bname,bauthor,bprice);</span><br><span class="line">		<span class="keyword">SELECT</span> CONCAT_WS(<span class="string">&#x27;~&#x27;</span>,bname,bauthor,bprice) <span class="keyword">INTO</span> str;</span><br><span class="line">		<span class="keyword">SET</span> <span class="keyword">result</span> <span class="operator">=</span> CONCAT_WS(<span class="string">&#x27;,&#x27;</span>,<span class="keyword">result</span>,str);</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line">   </span><br><span class="line">	 # 关闭游标</span><br><span class="line">	 <span class="keyword">CLOSE</span> mycursor;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@r</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">CALL</span> proc_test2(<span class="variable">@r</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@r</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>

<h2 id="十、-触发器"><a href="#十、-触发器" class="headerlink" title="十、 触发器"></a>十、 触发器</h2><h3 id="10-1-触发器介绍"><a href="#10-1-触发器介绍" class="headerlink" title="10.1 触发器介绍"></a>10.1 触发器介绍</h3><p>触发器，就是一种特殊的存储过程。触发器和存储过程一样是一个能完成特定功能、存储在数据库服务器上的SQL片段，但是触发器无需调用，当对数据表中的数据进行DML操作时自动触发这个SQL片段的执行，无需手动调用。</p>
<p>在MySQL，只有执行insert\delete\update操作才能触发触发器的执行。</p>
<h3 id="10-2-触发器的使用"><a href="#10-2-触发器的使用" class="headerlink" title="10.2 触发器的使用"></a>10.2 触发器的使用</h3><h6 id="10-2-1-案例说明"><a href="#10-2-1-案例说明" class="headerlink" title="10.2.1 案例说明"></a>10.2.1 案例说明</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 学生信息表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">	stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">	stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">	stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 学生信息操作日志</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stulogs(</span><br><span class="line">		id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">		<span class="type">time</span> <span class="type">TIMESTAMP</span>,</span><br><span class="line">		log_text <span class="type">VARCHAR</span>(<span class="number">200</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 当向students表中添加学生信息时，同时要在stulogs表中添加一条操作日志</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">VALUES</span>(<span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;夏利&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"># 记录日志</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(NOW(),<span class="string">&#x27;添加1004学生信息&#x27;</span>);</span><br><span class="line"># 当向students表中删除学生信息时，同时要在stulogs表中添加一条操作日志</span><br></pre></td></tr></table></figure>

<p><strong>案例：</strong>当向学生信息表添加、删除、修改学生信息时，使用触发器自定进行日志记录</p>
<h6 id="10-2-2-创建触发器"><a href="#10-2-2-创建触发器" class="headerlink" title="10.2.2 创建触发器"></a>10.2.2 创建触发器</h6><p>语法</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_name</span><br><span class="line"><span class="operator">&lt;</span>BEFORE <span class="operator">|</span> AFTER<span class="operator">&gt;</span>				# 定义触发时机</span><br><span class="line"><span class="operator">&lt;</span><span class="keyword">INSERT</span> <span class="operator">|</span> <span class="keyword">DELETE</span> <span class="operator">|</span> <span class="keyword">UPDATE</span><span class="operator">&gt;</span>		# 定义DML类型</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span>					# 声明为行级触发器（只要操作一条记录就触发器执行一次）</span><br><span class="line">sql_statement					# 触发器操作</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 创建触发器：当学生信息表发生添加操作时，则向信息表中记录一条日志</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test1</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> students</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;添加&#x27;</span>,NEW.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h6 id="10-2-3-查看触发器"><a href="#10-2-3-查看触发器" class="headerlink" title="10.2.3 查看触发器"></a>10.2.3 查看触发器</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> triggers;</span><br></pre></td></tr></table></figure>

<h6 id="10-2-4-测试触发器"><a href="#10-2-4-测试触发器" class="headerlink" title="10.2.4 测试触发器"></a>10.2.4 测试触发器</h6><ul>
<li>我们创建触发器时在students表发生insert操作时触发，我们只需要执行学生信息的添加操作</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 测试<span class="number">1</span>：添加一个学生信息，触发器执行了一次</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">VALUES</span>(<span class="string">&#x27;1005&#x27;</span>,<span class="string">&#x27;小明&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"># 测试<span class="number">2</span>：一条<span class="keyword">SQL</span>指令添加了<span class="number">2</span>条学生信息，触发器执行了<span class="number">2</span>次</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">VALUES</span>(<span class="string">&#x27;1006&#x27;</span>,<span class="string">&#x27;小刚&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>),(<span class="string">&#x27;1007&#x27;</span>,<span class="string">&#x27;李磊&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<h6 id="10-2-5-删除触发器"><a href="#10-2-5-删除触发器" class="headerlink" title="10.2.5 删除触发器"></a>10.2.5 删除触发器</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> tri_test1;</span><br></pre></td></tr></table></figure>

<h3 id="10-3-NEW与OLD"><a href="#10-3-NEW与OLD" class="headerlink" title="10.3 NEW与OLD"></a>10.3 NEW与OLD</h3><blockquote>
<p>触发器用于鉴定数据表中数据的insert、delete、update操作，在触发器中通常处理一些DML的关联操作。我们通常可以使用<code>NEW</code>和<code>OLD</code>关键字在触发器中获取触发这个触发器的DML的数据。</p>
<ul>
<li>NEW：在触发器中用于获取insert操作添加的数据、update操作修改后的记录</li>
<li>OLD：在触发器中用于获取delete操作删除前的数据、update操作修改前的数据</li>
</ul>
</blockquote>
<h6 id="10-3-1-NEW"><a href="#10-3-1-NEW" class="headerlink" title="10.3.1 NEW"></a>10.3.1 NEW</h6><ul>
<li>insert操作中：NEW表示添加的新记录</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_tset1</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> students</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;添加&#x27;</span>,NEW.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>update操作中：NEW表示修改后的数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 创建触发器: 在监听<span class="keyword">update</span>操作的触发器中，可以使用<span class="keyword">NEW</span>获取修改后的数据</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test2</span><br><span class="line">AFTER <span class="keyword">UPDATE</span> <span class="keyword">ON</span> students <span class="keyword">for</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;将学生信息修改为&#x27;</span>,NEW.stu_num,NEW.stu_name));</span><br></pre></td></tr></table></figure>

<h6 id="10-3-2-OLD"><a href="#10-3-2-OLD" class="headerlink" title="10.3.2 OLD"></a>10.3.2 OLD</h6><ul>
<li>delete操作中：OLD表示删除的记录</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test3</span><br><span class="line">AFTER <span class="keyword">DELETE</span> <span class="keyword">ON</span> students <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;删除&#x27;</span>,OLD.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>update操作中：OLD表示修改前的记录</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test2</span><br><span class="line">AFTER <span class="keyword">UPDATE</span> <span class="keyword">ON</span> students <span class="keyword">for</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;将学生姓名从【&#x27;</span>,OLD.stu_name,<span class="string">&#x27;】修改为【&#x27;</span>,NEW.stu_name,<span class="string">&#x27;】&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="10-4-触发器使用总结"><a href="#10-4-触发器使用总结" class="headerlink" title="10.4 触发器使用总结"></a>10.4 触发器使用总结</h3><h6 id="10-4-1-优点"><a href="#10-4-1-优点" class="headerlink" title="10.4.1 优点"></a>10.4.1 优点</h6><ul>
<li>触发器是自动执行的，当对触发器相关的表执行相应的DML操作时立即执行；</li>
<li>触发器可以实现表中的数据的级联操作（关联操作），有利于保证数据的完整性；</li>
<li>触发器可以对DML操作的数据进行更为复杂的合法性校验</li>
</ul>
<h6 id="10-4-2-缺点"><a href="#10-4-2-缺点" class="headerlink" title="10.4.2 缺点"></a>10.4.2 缺点</h6><ul>
<li>使用触发器实现的业务逻辑如果出现问题将难以定位，后期维护困难；</li>
<li>大量使用触发器容易导致代码结构杂乱，增加了程序的复杂性；</li>
<li>当触发器操作的数据量比较大时，执行效率会大大降低。</li>
</ul>
<h6 id="10-4-3-使用建议"><a href="#10-4-3-使用建议" class="headerlink" title="10.4.3 使用建议"></a>10.4.3 使用建议</h6><ul>
<li>在互联网项目中，应避免使用触发器；</li>
<li>对于并发量不大的项目可以选择使用存储过程，但是在互联网引用中不提倡使用存储过程（原因：存储过程时将实现业务的逻辑交给数据库处理，一则增减了数据库的负载，二则不利于数据库的迁移）</li>
</ul>
<h2 id="十一、视图"><a href="#十一、视图" class="headerlink" title="十一、视图"></a>十一、视图</h2><h3 id="11-1-视图的概念"><a href="#11-1-视图的概念" class="headerlink" title="11.1 视图的概念"></a>11.1 视图的概念</h3><p>视图，就是<code>由数据库中一张表或者多张表根据特定的条件查询出的数据结构造成的</code>虚拟表</p>
<h3 id="11-2-视图的作用"><a href="#11-2-视图的作用" class="headerlink" title="11.2 视图的作用"></a>11.2 视图的作用</h3><ul>
<li><p><strong>安全性</strong>：如果我们直接将数据表授权给用户操作，那么用户可以CRUD数据表中所有数据，加入我们想要对数据表中的部分数据进行保护，可以将公开的数据生成视图，授权用户访问视图;用户通过查询视图可以获取娄据表中公开的数据，从而达到将数据表中的部分数据对用户隐藏。</p>
</li>
<li><p><strong>简单性</strong>：如果我们需要查询的数据来源于多张数据表，可以使用多表连接查询来实现；我们通过视图将这些联表查询的结果对用户开放，用户则可以直接通过查询视图获取多张数据表，操作更便捷。</p>
</li>
</ul>
<h3 id="11-3-创建视图"><a href="#11-3-创建视图" class="headerlink" title="11.3 创建视图"></a>11.3 创建视图</h3><h6 id="11-3-1-语法"><a href="#11-3-1-语法" class="headerlink" title="11.3.1 语法"></a>11.3.1 语法</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> view_name</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">select_statement</span><br></pre></td></tr></table></figure>

<h6 id="13-3-2-实例"><a href="#13-3-2-实例" class="headerlink" title="13.3.2 实例"></a>13.3.2 实例</h6><ul>
<li>示例1：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图实例<span class="number">1</span>：将学生表中性别为男的学生生成一个视图</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_test1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询视图</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> view_test1;</span><br></pre></td></tr></table></figure>

<ul>
<li>示例2：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图的示例<span class="number">2</span>：查询学生借书的信息（学生名、图书名、借书数量）</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_test2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.stu_name,b.book_name,borrow_num</span><br><span class="line"><span class="keyword">FROM</span> books b <span class="keyword">INNER</span> <span class="keyword">JOIN</span> records r <span class="keyword">INNER</span> <span class="keyword">JOIN</span> students s</span><br><span class="line"><span class="keyword">ON</span> b.book_id <span class="operator">=</span> r.bid <span class="keyword">AND</span> r.snum<span class="operator">=</span>s.stu_num;</span><br><span class="line"></span><br><span class="line"># 查询视图</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> view_test2;</span><br></pre></td></tr></table></figure>

<h3 id="11-4-视图数据的特性"><a href="#11-4-视图数据的特性" class="headerlink" title="11.4 视图数据的特性"></a>11.4 视图数据的特性</h3><p>视图时虚拟表，查询视图的数据是来源于数据表。当对视图进行操作时对原数据表中的数据是否影响呢?</p>
<p><strong>查询操作：</strong>如果在数据表中添加了新的数据，而这个数据满足创建视图时 查询语句的条件，通过查询视图也可以查询出新增数据；当删除原表中满足查询条件的数据时，也会从视图中删除。</p>
<p><strong>新增数据：</strong>如果在视图中添加数据，数据会被添加到原表中</p>
<p><strong>删除数据：</strong>如果从视图删除数据，数据将从原表中删除</p>
<p><strong>修改操作：</strong>如果通过修改数据，则也将修改原数据表中的数据</p>
<p><code>视图的使用建议：</code>对复杂查询简化操作，并且不会对数据进行修改的情况下可以使用视图。</p>
<h3 id="11-5-查询视图结构"><a href="#11-5-查询视图结构" class="headerlink" title="11.5 查询视图结构"></a>11.5 查询视图结构</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询视图结构</span><br><span class="line"><span class="keyword">DESC</span> view_test2;</span><br></pre></td></tr></table></figure>

<h3 id="11-6-修改视图"><a href="#11-6-修改视图" class="headerlink" title="11.6 修改视图"></a>11.6 修改视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 方式<span class="number">1</span>:</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> view_test1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;、</span><br><span class="line"></span><br><span class="line"># 方式<span class="number">2</span>:修改原有的数据表</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> view_test1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="11-7-删除视图"><a href="#11-7-删除视图" class="headerlink" title="11.7 删除视图"></a>11.7 删除视图</h3><ul>
<li>删除数据表时会同时会删除数据表中的数据，删除视图不会影响源数据表中的数据</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 删除视图</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> view_test1</span><br></pre></td></tr></table></figure>



<h2 id="十二、索引"><a href="#十二、索引" class="headerlink" title="十二、索引"></a>十二、索引</h2><blockquote>
<p>数据库是用来存储数据，在互联网应用中数据库存储的数据可能会很多（大数据），数据表中数据查询的速度会随着数据量的增长逐渐变慢，从而导致相应用户请求的速度变慢——用户体验差，我们如何提高数据库的查询效率呢？</p>
</blockquote>
<h3 id="12-1-索引的介绍"><a href="#12-1-索引的介绍" class="headerlink" title="12.1 索引的介绍"></a>12.1 索引的介绍</h3><p>索引，就是用来提高数据表中数据的查询效率的。</p>
<blockquote>
<p>索引，就是将数据表中的某一列&#x2F;某几列的值取出来构造成便于查找的结构进行存储，生成数据表的<code>目录</code>当我们进行数据查询的时候，则现在<code>目录</code>中进行查找得到对应的数据地址，然后再到数据表中根据地址快速的获取记录，避免扫描全表。</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pS6M6KA"><img src="https://s1.ax1x.com/2023/02/05/pS6M6KA.png" alt="pS6M6KA.png"></a></p>
<h3 id="12-2-索引的分类"><a href="#12-2-索引的分类" class="headerlink" title="12.2 索引的分类"></a>12.2 索引的分类</h3><p>MySQL中的索引，根据创建索引的列的不同，可以分为：</p>
<ul>
<li>主键索引：在数据表的主键字段创建的索引，这个字段必须被PRIMARY KEY修饰，每张表只能有一个主键</li>
<li>唯一索引：在数据表中的唯一列创建的索引（UNIQUE），此列的所有值只能出现一次，可以为NULL</li>
<li>普通索引：在普通字段上创建的索引，没有唯一性限制</li>
<li>组合索引：两个及以上字段联合起来创建的索引</li>
</ul>
<p><code>说明</code>：</p>
<ol>
<li>在创建数据表时，将字段声明为主键（添加主键约束），会自动在主键字段创建主键索引；</li>
<li>再创建数据表时，将字段声明为唯一键（添加唯一约束），会自动在唯一字段创建唯一索引；</li>
</ol>
<h3 id="12-3-创建索引"><a href="#12-3-创建索引" class="headerlink" title="12.3 创建索引"></a>12.3 创建索引</h3><h6 id="12-3-1-唯一索引"><a href="#12-3-1-唯一索引" class="headerlink" title="12.3.1 唯一索引"></a>12.3.1 唯一索引</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 创建唯一索引：创建唯一索引的列的值不能重复</span><br><span class="line"># <span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> 表名（列名）</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX index_test1 <span class="keyword">on</span> tb_testindex(tid);</span><br></pre></td></tr></table></figure>

<h6 id="12-3-2-普通索引"><a href="#12-3-2-普通索引" class="headerlink" title="12.3.2 普通索引"></a>12.3.2 普通索引</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 创建普通索引：不要求创建索引的列的值的唯一性</span><br><span class="line"># <span class="keyword">CREATE</span> INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> 表名（列名）</span><br><span class="line"><span class="keyword">CREATE</span> INDEX index_test1 <span class="keyword">on</span> tb_testindex(name);</span><br></pre></td></tr></table></figure>

<h6 id="12-3-3-组合索引"><a href="#12-3-3-组合索引" class="headerlink" title="12.3.3 组合索引"></a>12.3.3 组合索引</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 创建组合索引：</span><br><span class="line"># <span class="keyword">CREATE</span> INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> 表名（列名<span class="number">1</span>,列名<span class="number">2.</span>..）</span><br><span class="line"><span class="keyword">CREATE</span> INDEX index_test3 <span class="keyword">on</span> tb_testindex(tid,name);</span><br></pre></td></tr></table></figure>

<h6 id="12-3-4-全文索引"><a href="#12-3-4-全文索引" class="headerlink" title="12.3.4 全文索引"></a>12.3.4 全文索引</h6><blockquote>
<p>MySQL5.6版本新增的索引，可以通过此索引进行全文检索操作，因为MySQL全文检索不支持中文，因此这个全文索引不被开发者关注，在开发中通常是 通过搜索引擎（数据库中间件）实现全文索引</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> FULLTEXT INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> <span class="keyword">ON</span> 表明（字段名）;</span><br></pre></td></tr></table></figure>



<h3 id="12-4-索引使用"><a href="#12-4-索引使用" class="headerlink" title="12.4 索引使用"></a>12.4 索引使用</h3><blockquote>
<p>索引创建完成之后无需调用，当根据创建索引的列进行数据查询的时候，会自动使用索引；</p>
<p>组合索引需要根据创建索引的所有字段进行查询时触发。</p>
</blockquote>
<ul>
<li>在命令行窗口中可以查看查询语句的查询规划：</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_testindex <span class="keyword">WHERE</span> tid<span class="operator">=</span><span class="number">250000</span>\G;</span><br></pre></td></tr></table></figure>



<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pS6MrgH"><img src="https://s1.ax1x.com/2023/02/05/pS6MrgH.png" alt="pS6MrgH.png"></a></p>
<h3 id="12-5-查看索引"><a href="#12-5-查看索引" class="headerlink" title="12.5 查看索引"></a>12.5 查看索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_testindex\G;</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pS6Msvd"><img src="https://s1.ax1x.com/2023/02/05/pS6Msvd.png" alt="pS6Msvd.png"></a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查询数据表的索引</span><br><span class="line"><span class="keyword">SHOW</span> INDEXES <span class="keyword">FROM</span> tb_testindex;</span><br><span class="line"></span><br><span class="line"># 查询数据表的索引</span><br><span class="line"><span class="keyword">SHOW</span> INDEXES <span class="keyword">FROM</span> tb_testindex;</span><br></pre></td></tr></table></figure>

<h3 id="12-6-删除索引"><a href="#12-6-删除索引" class="headerlink" title="12.6 删除索引"></a>12.6 删除索引</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 删除索引：索引是建立在表的字段上的，不同的表可能会出现相同名称的索引，因此删除索引时需要指定表名</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_testindex <span class="keyword">DROP</span> INDEX index_test3;</span><br><span class="line"><span class="keyword">DROP</span> INDEX index_test3 <span class="keyword">ON</span> tb_testindex;</span><br></pre></td></tr></table></figure>



<h3 id="12-7-索引的使用总结"><a href="#12-7-索引的使用总结" class="headerlink" title="12.7 索引的使用总结"></a>12.7 索引的使用总结</h3><h6 id="12-7-1-优点"><a href="#12-7-1-优点" class="headerlink" title="12.7.1 优点"></a>12.7.1 优点</h6><ul>
<li>索引大大降低了数据库服务器执行查询操作时扫描的数据，提高查询效率；</li>
<li>索引可以避免服务器排序、将随机IO变成顺序IO；</li>
</ul>
<h6 id="12-7-2-缺点"><a href="#12-7-2-缺点" class="headerlink" title="12.7.2 缺点"></a>12.7.2 缺点</h6><ul>
<li>索引是根据数据列表创建的，当数据表中数据发生DML操作时，索引页需要更新；</li>
<li>索引文件也会占用磁盘空间；</li>
</ul>
<p>12.7.3 注意事项</p>
<ul>
<li>数据表中数据不多时，全表扫描可能更快</li>
<li>数据量大，但是DML操作很频繁时，不建议使用索引；</li>
<li>不要在数据重复度高的列上创建索引（性别）；</li>
<li>创建索引之后，要注意查询SQL语句的编写，避免索引失效。</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://alaningby.github.io">AlaningBy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://alaningby.github.io/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/">http://alaningby.github.io/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://alaningby.github.io" target="_blank">AlaningBy</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/sql/">sql</a></div><div class="post_share"><div class="social-share" data-image="https://s1.ax1x.com/2023/02/06/pSgVd61.png" data-sites="twitter,wechat,weibo"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/01/05/xshell-%E8%BF%9E%E6%8E%A5-kali%EF%BC%88%E5%BF%85%E5%A4%87%E6%8A%80%E8%83%BD%EF%BC%89/"><img class="next-cover" src="https://s1.ax1x.com/2023/01/06/pSEV0MT.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">xshell 连接 kali（必备技能）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/11/20/sql/" title="sql随记"><img class="cover" src="https://s1.ax1x.com/2022/11/12/zPNmBd.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-20</div><div class="title">sql随记</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/touxiang.JPG" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">AlaningBy</div><div class="author-info__description">我的烂笔头</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/AlaningBy/AlaningBy.github.io"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/AlaningBy" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople1.js"></script><script src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/zdog.dist.js"></script><script id="rendered-js" src="https://fastly.jsdelivr.net/gh/xiaopengand/blogCdn@latest/xzxr/twopeople.js"></script><style>.card-widget.card-announcement {
margin: 0;
align-items: center;
justify-content: center;
text-align: center;
}
canvas {
display: block;
margin: 0 auto;
cursor: move;
}</style><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81MySQL"><span class="toc-text">一、MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.1 数据库介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">1.2 MySQL数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-SQL%E7%BB%93%E6%9E%84%E5%8C%96%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-text">1.3 SQL结构化查询语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-SQL%E9%AB%98%E7%BA%A7"><span class="toc-text">1.4 SQL高级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-text">1.5 数据库设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1"><span class="toc-text">1.6数据库事务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BB%8B%E7%BB%8D"><span class="toc-text">二、数据库介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E5%BF%B5"><span class="toc-text">2.1数据库概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">2.2关系型数据库与非关系型数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3%E5%B8%B8%E8%A7%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%A7%E5%93%81%E5%85%B3"><span class="toc-text">2.3常见的数据库产品关</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-4-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%AF%E8%AF%AD"><span class="toc-text">2.4 数据库术语</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-text">三、MySQL数据库环境准备</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-MySQL%E7%89%88%E6%9C%AC%E5%8F%8A%E4%B8%8B%E8%BD%BD"><span class="toc-text">3.1 MySQL版本及下载</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-1-1%E7%89%88%E6%9C%AC"><span class="toc-text">3.1.1版本</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-1-2%E4%B8%8B%E8%BD%BD"><span class="toc-text">3.1.2下载</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-MySQL%E5%AE%89%E8%A3%85"><span class="toc-text">3.2 MySQL安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-MySQL%E9%85%8D%E7%BD%AE"><span class="toc-text">3.3 MySQL配置</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-1-%E7%AB%AF%E5%8F%A3%E9%85%8D%E7%BD%AE"><span class="toc-text">3.3.1 端口配置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-2-%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E8%AE%BE%E7%BD%AE"><span class="toc-text">3.3.2 账号密码设置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3-3-%E6%9C%8D%E5%8A%A1%E5%90%8D%E7%A7%B0"><span class="toc-text">3.3.3 服务名称</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-MySQL%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%81%9C%E6%AD%A2"><span class="toc-text">3.4 MySQL服务的启动与停止</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4-1%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%AE%A1%E7%90%86%E7%AA%97%E5%8F%A3"><span class="toc-text">3.4.1计算机管理窗口</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-MySQL%E5%8D%B8%E8%BD%BD"><span class="toc-text">3.5 MySQL卸载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81MySQL%E7%9A%84%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-text">四、MySQL的管理工具</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-MysQL-Command-line-client%E4%BD%BF%E7%94%A8"><span class="toc-text">4.1 MysQL Command line client使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7Navicat%E4%BD%BF%E7%94%A8"><span class="toc-text">4.2 可视化工具Navicat使用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-1-Navicat%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD%E5%8F%8A%E5%AE%89%E8%A3%85"><span class="toc-text">4.2.1 Navicat工具下载及安装</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-2-%E5%88%9B%E5%BB%BA%E8%BF%9E%E6%8E%A5"><span class="toc-text">4.2.2 创建连接</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81MysQL%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84"><span class="toc-text">五、MysQL逻辑结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%84"><span class="toc-text">5.1 逻辑结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E8%AE%B0%E5%BD%95-x2F-%E5%85%83%E7%BB%84"><span class="toc-text">5.2 记录&#x2F;元组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81SQL"><span class="toc-text">六、SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-SQL%E6%A6%82%E8%BF%B0"><span class="toc-text">6.1 SQL概述</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#6-1-1-SQL%E5%8F%91%E5%B1%95"><span class="toc-text">6.1.1 SQL发展</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-1-2-SQL%E5%88%86%E7%B1%BB"><span class="toc-text">6.1.2 SQL分类</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-SQL%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">6.2 SQL基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-DDL"><span class="toc-text">6.3 DDL</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#6-3-1-DDL%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-text">6.3.1 DDL数据库操作</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-3-2-DDL-%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-text">6.3.2 DDL-数据表操作</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">6.4MySQL数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#6-4-1%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-text">6.4.1数值类型</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-4-2%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-text">6.4.2字符串类型</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-4-3%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"><span class="toc-text">6.4.3日期类型</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5%E5%AD%97%E6%AE%B5%E7%BA%A6%E6%9D%9F"><span class="toc-text">6.5字段约束</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#6-5-1%E7%BA%A6%E6%9D%9F%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-text">6.5.1约束的介绍</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-5-2%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-text">6.5.2非空约束</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-5-4%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">6.5.4主键约束</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-5-5%E4%B8%BB%E9%94%AE%E7%9A%84%E8%87%AA%E5%8A%A8%E5%A2%9E%E9%95%BF"><span class="toc-text">6.5.5主键的自动增长</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-5-6%E8%81%94%E5%90%88%E4%B8%BB%E9%94%AE"><span class="toc-text">6.5.6联合主键</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-5-7%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">6.5.7外键约束</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-DML%E6%95%B0%E6%8D%AE%E6%93%8D%E7%BA%B5%E8%AF%AD%E8%A8%80"><span class="toc-text">6.6 DML数据操纵语言</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#6-6-1%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-text">6.6.1插入数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-6-2%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-text">6.6.2删除数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-6-3%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-text">6.6.3修改数据</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7-DQL-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="toc-text">6.7 DQL 数据查询语句</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-1%E6%9F%A5%E8%AF%A2%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-text">6.7.1查询基础语法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-2-where%E5%AD%90%E5%8F%A5"><span class="toc-text">6.7.2 where子句</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-3-LIKE%E5%AD%90%E5%8F%A5"><span class="toc-text">6.7.3 LIKE子句</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-4-%E5%AF%B9%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">6.7.4 对查询结果的处理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-5-order-by%E6%8E%92%E5%BA%8F"><span class="toc-text">6.7.5 order by排序</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-6-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-text">6.7.6 聚合函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-7-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0-%E5%92%8C-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-text">6.7.7 日期函数 和 字符串函数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-8-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2-group-by"><span class="toc-text">6.7.8 分组查询-group by</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6-7-9-%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2-limit"><span class="toc-text">6.7.9 分页查询-limit</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB"><span class="toc-text">七、数据表的关联关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E5%85%B3%E8%81%94%E5%85%B3%E7%B3%BB%E4%BB%8B%E7%BB%8D"><span class="toc-text">7.1关联关系介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E4%B8%80%E5%AF%B9%E4%B8%80%E5%85%B3%E8%81%94"><span class="toc-text">7.2 一对一关联</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3%E4%B8%80%E5%AF%B9%E5%A4%9A%E4%B8%8E%E5%A4%9A%E5%AF%B9%E4%B8%80"><span class="toc-text">7.3一对多与多对一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E5%A4%9A%E5%AF%B9%E5%A4%9A%E5%85%B3%E8%81%94"><span class="toc-text">7.4 多对多关联</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-text">7.5 外键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%C2%B7%E7%BA%A7%E8%81%94"><span class="toc-text">7.6 外键约束·级联</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-text">八、连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="toc-text">8.1 数据准备</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#8-1-1%E5%88%9B%E5%BB%BA%E5%AD%A6%E7%94%9F%E7%8F%AD%E7%BA%A7%E4%BF%A1%E6%81%AF%E8%A1%A8%E5%92%8C%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E8%A1%A8"><span class="toc-text">8.1.1创建学生班级信息表和学生信息表</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-1-2%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-text">8.1.2添加数据</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%86%85%E8%BF%9E%E6%8E%A5-INNER-JOIN"><span class="toc-text">8.2 内连接 INNER JOIN</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#8-2-1%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF"><span class="toc-text">8.2.1笛卡尔积</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-2-2-%E5%86%85%E8%BF%9E%E6%8E%A5%E6%9D%A1%E4%BB%B6"><span class="toc-text">8.2.2 内连接条件</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E5%B7%A6%E8%BF%9E%E6%8E%A5LEFT-JOIN"><span class="toc-text">8.3 左连接LEFT JOIN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E5%8F%B3%E8%BF%9E%E6%8E%A5-RIGHT-JOIN"><span class="toc-text">8.4 右连接 RIGHT JOIN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-%E6%95%B0%E6%8D%AE%E8%A1%A8%E5%88%AB%E5%90%8D"><span class="toc-text">8.5 数据表别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-%E5%AD%90%E6%9F%A5%E8%AF%A2-x2F-%E5%B5%8C%E5%A5%97%E6%9F%A5%E8%AF%A2"><span class="toc-text">8.6 子查询&#x2F;嵌套查询</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#8-6-1-%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%8D%95%E4%B8%AA%E5%80%BC-%E5%8D%95%E8%A1%8C%E5%8D%95%E5%88%97"><span class="toc-text">8.6.1 子查询返回单个值-单行单列</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-6-2-%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%80%BC-%E5%A4%9A%E8%A1%8C%E5%8D%95%E5%88%97"><span class="toc-text">8.6.2 子查询返回多个值-多行单列</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8-6-3-%E5%AD%90%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%A4%9A%E4%B8%AA%E5%80%BC-%E5%A4%9A%E8%A1%8C%E5%A4%9A%E5%88%97"><span class="toc-text">8.6.3 子查询返回多个值-多行多列</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">九、存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="toc-text">9.1 存储过程介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-1-1-SQL%E6%8C%87%E4%BB%A4%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B"><span class="toc-text">9.1.1 SQL指令执行过程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-1-2-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-text">9.1.2 存储过程的介绍</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">9.2 创建存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-2-1-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%88%9B%E5%BB%BA%E8%AF%AD%E6%B3%95"><span class="toc-text">9.2.1 存储过程创建语法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">9.3 调用存储过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">9.4 存储过程中变量的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-4-1-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-text">9.4.1 局部变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-4-2-%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F"><span class="toc-text">9.4.2 用户变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-4-3-%E7%BB%99%E5%8F%98%E9%87%8F%E8%AE%BE%E7%BD%AE%E5%80%BC"><span class="toc-text">9.4.3 给变量设置值</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-4-4-%E5%B0%86%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E8%B5%8B%E5%80%BC%E7%BB%99%E5%8F%98%E9%87%8F"><span class="toc-text">9.4.4 将查询结果赋值给变量</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-4-5-%E7%94%A8%E6%88%B7%E5%8F%98%E9%87%8F%E4%BD%BF%E7%94%A8%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">9.4.5 用户变量使用的注意事项</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">9.5 存储过程的参数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-5-1-IN-%E8%BE%93%E5%85%A5%E5%8F%82%E6%95%B0"><span class="toc-text">9.5.1 IN 输入参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-5-2-OUT%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-text">9.5.2 OUT输出参数</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-5-3-INOUT-%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-text">9.5.3 INOUT 输入输出参数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-text">9.6 存储过程中的流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-6-1-%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5"><span class="toc-text">9.6.1 分支语句</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-6-2-%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5"><span class="toc-text">9.6.2 循环语句</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E7%AE%A1%E7%90%86"><span class="toc-text">9.7 存储过程的管理</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-7-1-%E6%9F%A5%E8%AF%A2%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">9.7.1 查询存储过程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-7-2-%E4%BF%AE%E6%94%B9%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">9.7.2 修改存储过程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-7-3-%E5%88%A0%E9%99%A4%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">9.7.3 删除存储过程</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%BB%83%E4%B9%A0%E6%A1%88%E4%BE%8B"><span class="toc-text">9.8 存储过程练习案例</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-8-1-%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87"><span class="toc-text">9.8.1 数据准备</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-8-2-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-text">9.8.2 创建存储过程</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-8-3-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E5%AE%9E%E7%8E%B0%E8%BF%98%E4%B9%A6%E4%B8%9A%E5%8A%A1"><span class="toc-text">9.8.3 创建存储过程实现还书业务</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-9-%E6%B8%B8%E6%A0%87"><span class="toc-text">9.9 游标</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#9-9-1-%E6%B8%B8%E6%A0%87%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">9.9.1 游标的概念</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-9-2-%E6%B8%B8%E6%A0%87%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">9.9.2 游标的使用</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9-9-3-%E6%B8%B8%E6%A0%87%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-text">9.9.3  游标使用案例</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E3%80%81-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-text">十、 触发器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-text">10.1 触发器介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E8%A7%A6%E5%8F%91%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">10.2 触发器的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#10-2-1-%E6%A1%88%E4%BE%8B%E8%AF%B4%E6%98%8E"><span class="toc-text">10.2.1 案例说明</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-2-2-%E5%88%9B%E5%BB%BA%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-text">10.2.2 创建触发器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-2-3-%E6%9F%A5%E7%9C%8B%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-text">10.2.3 查看触发器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-2-4-%E6%B5%8B%E8%AF%95%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-text">10.2.4 测试触发器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-2-5-%E5%88%A0%E9%99%A4%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-text">10.2.5 删除触发器</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-NEW%E4%B8%8EOLD"><span class="toc-text">10.3 NEW与OLD</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#10-3-1-NEW"><span class="toc-text">10.3.1 NEW</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-3-2-OLD"><span class="toc-text">10.3.2 OLD</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-%E8%A7%A6%E5%8F%91%E5%99%A8%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93"><span class="toc-text">10.4 触发器使用总结</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#10-4-1-%E4%BC%98%E7%82%B9"><span class="toc-text">10.4.1 优点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-4-2-%E7%BC%BA%E7%82%B9"><span class="toc-text">10.4.2 缺点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10-4-3-%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE"><span class="toc-text">10.4.3 使用建议</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%A7%86%E5%9B%BE"><span class="toc-text">十一、视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E8%A7%86%E5%9B%BE%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">11.1 视图的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-text">11.2 视图的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-text">11.3 创建视图</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#11-3-1-%E8%AF%AD%E6%B3%95"><span class="toc-text">11.3.1 语法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#13-3-2-%E5%AE%9E%E4%BE%8B"><span class="toc-text">13.3.2 实例</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-%E8%A7%86%E5%9B%BE%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-text">11.4 视图数据的特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-%E6%9F%A5%E8%AF%A2%E8%A7%86%E5%9B%BE%E7%BB%93%E6%9E%84"><span class="toc-text">11.5 查询视图结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-6-%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE"><span class="toc-text">11.6 修改视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-7-%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-text">11.7 删除视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E7%B4%A2%E5%BC%95"><span class="toc-text">十二、索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-text">12.1 索引的介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">12.2 索引的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-3-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-text">12.3 创建索引</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#12-3-1-%E5%94%AF%E4%B8%80%E7%B4%A2%E5%BC%95"><span class="toc-text">12.3.1 唯一索引</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#12-3-2-%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95"><span class="toc-text">12.3.2 普通索引</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#12-3-3-%E7%BB%84%E5%90%88%E7%B4%A2%E5%BC%95"><span class="toc-text">12.3.3 组合索引</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#12-3-4-%E5%85%A8%E6%96%87%E7%B4%A2%E5%BC%95"><span class="toc-text">12.3.4 全文索引</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-4-%E7%B4%A2%E5%BC%95%E4%BD%BF%E7%94%A8"><span class="toc-text">12.4 索引使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-5-%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95"><span class="toc-text">12.5 查看索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-6-%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-text">12.6 删除索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-7-%E7%B4%A2%E5%BC%95%E7%9A%84%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93"><span class="toc-text">12.7 索引的使用总结</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#12-7-1-%E4%BC%98%E7%82%B9"><span class="toc-text">12.7.1 优点</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#12-7-2-%E7%BC%BA%E7%82%B9"><span class="toc-text">12.7.2 缺点</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/" title="MySQL笔记"><img src="https://s1.ax1x.com/2023/02/06/pSgVd61.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL笔记"/></a><div class="content"><a class="title" href="/2023/02/06/MySQL%E7%AC%94%E8%AE%B0/" title="MySQL笔记">MySQL笔记</a><time datetime="2023-02-08T08:28:39.224Z" title="更新于 2023-02-08 16:28:39">2023-02-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/28/c%E8%AF%AD%E8%A8%80%E6%8A%A5%E9%94%991/" title="c语言报错1"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="c语言报错1"/></a><div class="content"><a class="title" href="/2021/11/28/c%E8%AF%AD%E8%A8%80%E6%8A%A5%E9%94%991/" title="c语言报错1">c语言报错1</a><time datetime="2023-02-06T15:37:35.024Z" title="更新于 2023-02-06 23:37:35">2023-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/04/Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="Java环境配置"><img src="https://s1.ax1x.com/2023/01/05/pSAlf3j.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java环境配置"/></a><div class="content"><a class="title" href="/2023/01/04/Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/" title="Java环境配置">Java环境配置</a><time datetime="2023-01-06T09:18:12.833Z" title="更新于 2023-01-06 17:18:12">2023-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/05/xshell-%E8%BF%9E%E6%8E%A5-kali%EF%BC%88%E5%BF%85%E5%A4%87%E6%8A%80%E8%83%BD%EF%BC%89/" title="xshell 连接 kali（必备技能）"><img src="https://s1.ax1x.com/2023/01/06/pSEV0MT.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xshell 连接 kali（必备技能）"/></a><div class="content"><a class="title" href="/2023/01/05/xshell-%E8%BF%9E%E6%8E%A5-kali%EF%BC%88%E5%BF%85%E5%A4%87%E6%8A%80%E8%83%BD%EF%BC%89/" title="xshell 连接 kali（必备技能）">xshell 连接 kali（必备技能）</a><time datetime="2023-01-06T09:17:32.192Z" title="更新于 2023-01-06 17:17:32">2023-01-06</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s1.ax1x.com/2023/02/06/pSgVd61.png')"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By AlaningBy</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>