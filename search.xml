<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>sql笔记#day6</title>
      <link href="/2023/02/05/sql%E7%AC%94%E8%AE%B0-day6/"/>
      <url>/2023/02/05/sql%E7%AC%94%E8%AE%B0-day6/</url>
      
        <content type="html"><![CDATA[<h4 id="十、-触发器"><a href="#十、-触发器" class="headerlink" title="十、 触发器"></a>十、 触发器</h4><h5 id="10-1-触发器介绍"><a href="#10-1-触发器介绍" class="headerlink" title="10.1 触发器介绍"></a>10.1 触发器介绍</h5><p>触发器，就是一种特殊的存储过程。触发器和存储过程一样是一个能完成特定功能、存储在数据库服务器上的SQL片段，但是触发器无需调用，当对数据表中的数据进行DML操作时自动触发这个SQL片段的执行，无需手动调用。</p><p>在MySQL，只有执行insert\delete\update操作才能触发触发器的执行。</p><h5 id="10-2-触发器的使用"><a href="#10-2-触发器的使用" class="headerlink" title="10.2 触发器的使用"></a>10.2 触发器的使用</h5><h6 id="10-2-1-案例说明"><a href="#10-2-1-案例说明" class="headerlink" title="10.2.1 案例说明"></a>10.2.1 案例说明</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 学生信息表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 学生信息操作日志</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stulogs(</span><br><span class="line">id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line"><span class="type">time</span> <span class="type">TIMESTAMP</span>,</span><br><span class="line">log_text <span class="type">VARCHAR</span>(<span class="number">200</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 当向students表中添加学生信息时，同时要在stulogs表中添加一条操作日志</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">VALUES</span>(<span class="string">&#x27;1004&#x27;</span>,<span class="string">&#x27;夏利&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"># 记录日志</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(NOW(),<span class="string">&#x27;添加1004学生信息&#x27;</span>);</span><br><span class="line"># 当向students表中删除学生信息时，同时要在stulogs表中添加一条操作日志</span><br></pre></td></tr></table></figure><p><strong>案例：</strong>当向学生信息表添加、删除、修改学生信息时，使用触发器自定进行日志记录</p><h6 id="10-2-2-创建触发器"><a href="#10-2-2-创建触发器" class="headerlink" title="10.2.2 创建触发器"></a>10.2.2 创建触发器</h6><p>语法</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_name</span><br><span class="line"><span class="operator">&lt;</span>BEFORE <span class="operator">|</span> AFTER<span class="operator">&gt;</span># 定义触发时机</span><br><span class="line"><span class="operator">&lt;</span><span class="keyword">INSERT</span> <span class="operator">|</span> <span class="keyword">DELETE</span> <span class="operator">|</span> <span class="keyword">UPDATE</span><span class="operator">&gt;</span># 定义DML类型</span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span># 声明为行级触发器（只要操作一条记录就触发器执行一次）</span><br><span class="line">sql_statement# 触发器操作</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 创建触发器：当学生信息表发生添加操作时，则向信息表中记录一条日志</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test1</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> students</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;添加&#x27;</span>,NEW.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure><h6 id="10-2-3-查看触发器"><a href="#10-2-3-查看触发器" class="headerlink" title="10.2.3 查看触发器"></a>10.2.3 查看触发器</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> triggers;</span><br></pre></td></tr></table></figure><h6 id="10-2-4-测试触发器"><a href="#10-2-4-测试触发器" class="headerlink" title="10.2.4 测试触发器"></a>10.2.4 测试触发器</h6><ul><li>我们创建触发器时在students表发生insert操作时触发，我们只需要执行学生信息的添加操作</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 测试<span class="number">1</span>：添加一个学生信息，触发器执行了一次</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">VALUES</span>(<span class="string">&#x27;1005&#x27;</span>,<span class="string">&#x27;小明&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line"># 测试<span class="number">2</span>：一条<span class="keyword">SQL</span>指令添加了<span class="number">2</span>条学生信息，触发器执行了<span class="number">2</span>次</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">VALUES</span>(<span class="string">&#x27;1006&#x27;</span>,<span class="string">&#x27;小刚&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>),(<span class="string">&#x27;1007&#x27;</span>,<span class="string">&#x27;李磊&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure><h6 id="10-2-5-删除触发器"><a href="#10-2-5-删除触发器" class="headerlink" title="10.2.5 删除触发器"></a>10.2.5 删除触发器</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> tri_test1;</span><br></pre></td></tr></table></figure><h5 id="10-3-NEW与OLD"><a href="#10-3-NEW与OLD" class="headerlink" title="10.3 NEW与OLD"></a>10.3 NEW与OLD</h5><blockquote><p>触发器用于鉴定数据表中数据的insert、delete、update操作，在触发器中通常处理一些DML的关联操作。我们通常可以使用<code>NEW</code>和<code>OLD</code>关键字在触发器中获取触发这个触发器的DML的数据。</p><ul><li>NEW：在触发器中用于获取insert操作添加的数据、update操作修改后的记录</li><li>OLD：在触发器中用于获取delete操作删除前的数据、update操作修改前的数据</li></ul></blockquote><h6 id="10-3-1-NEW"><a href="#10-3-1-NEW" class="headerlink" title="10.3.1 NEW"></a>10.3.1 NEW</h6><ul><li>insert操作中：NEW表示添加的新记录</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_tset1</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> students</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;添加&#x27;</span>,NEW.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure><ul><li>update操作中：NEW表示修改后的数据</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 创建触发器: 在监听<span class="keyword">update</span>操作的触发器中，可以使用<span class="keyword">NEW</span>获取修改后的数据</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test2</span><br><span class="line">AFTER <span class="keyword">UPDATE</span> <span class="keyword">ON</span> students <span class="keyword">for</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;将学生信息修改为&#x27;</span>,NEW.stu_num,NEW.stu_name));</span><br></pre></td></tr></table></figure><h6 id="10-3-2-OLD"><a href="#10-3-2-OLD" class="headerlink" title="10.3.2 OLD"></a>10.3.2 OLD</h6><ul><li>delete操作中：OLD表示删除的记录</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test3</span><br><span class="line">AFTER <span class="keyword">DELETE</span> <span class="keyword">ON</span> students <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;删除&#x27;</span>,OLD.stu_num,<span class="string">&#x27;学生信息&#x27;</span>));</span><br></pre></td></tr></table></figure><ul><li>update操作中：OLD表示修改前的记录</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> tri_test2</span><br><span class="line">AFTER <span class="keyword">UPDATE</span> <span class="keyword">ON</span> students <span class="keyword">for</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> stulogs(<span class="type">time</span>,log_text) <span class="keyword">VALUES</span>(now(),CONCAT(<span class="string">&#x27;将学生姓名从【&#x27;</span>,OLD.stu_name,<span class="string">&#x27;】修改为【&#x27;</span>,NEW.stu_name,<span class="string">&#x27;】&#x27;</span>));</span><br></pre></td></tr></table></figure><h5 id="10-4-触发器使用总结"><a href="#10-4-触发器使用总结" class="headerlink" title="10.4 触发器使用总结"></a>10.4 触发器使用总结</h5><h6 id="10-4-1-优点"><a href="#10-4-1-优点" class="headerlink" title="10.4.1 优点"></a>10.4.1 优点</h6><ul><li>触发器是自动执行的，当对触发器相关的表执行相应的DML操作时立即执行；</li><li>触发器可以实现表中的数据的级联操作（关联操作），有利于保证数据的完整性；</li><li>触发器可以对DML操作的数据进行更为复杂的合法性校验</li></ul><h6 id="10-4-2-缺点"><a href="#10-4-2-缺点" class="headerlink" title="10.4.2 缺点"></a>10.4.2 缺点</h6><ul><li>使用触发器实现的业务逻辑如果出现问题将难以定位，后期维护困难；</li><li>大量使用触发器容易导致代码结构杂乱，增加了程序的复杂性；</li><li>当触发器操作的数据量比较大时，执行效率会大大降低。</li></ul><h6 id="10-4-3-使用建议"><a href="#10-4-3-使用建议" class="headerlink" title="10.4.3 使用建议"></a>10.4.3 使用建议</h6><ul><li>在互联网项目中，应避免使用触发器；</li><li>对于并发量不大的项目可以选择使用存储过程，但是在互联网引用中不提倡使用存储过程（原因：存储过程时将实现业务的逻辑交给数据库处理，一则增减了数据库的负载，二则不利于数据库的迁移）</li></ul><h4 id="十一、-视图"><a href="#十一、-视图" class="headerlink" title="十一、 视图"></a>十一、 视图</h4><h5 id="11-1-视图的概念"><a href="#11-1-视图的概念" class="headerlink" title="11.1 视图的概念"></a>11.1 视图的概念</h5><p>视图，就是<code>由数据库中一张表或者多张表根据特定的条件查询出的数据结构造成的</code>虚拟表</p><h5 id="11-2-视图的作用"><a href="#11-2-视图的作用" class="headerlink" title="11.2 视图的作用"></a>11.2 视图的作用</h5><ul><li><p><strong>安全性</strong>：如果我们直接将数据表授权给用户操作，那么用户可以CRUD数据表中所有数据，加入我们想要对数据表中的部分数据进行保护，可以将公开的数据生成视图，授权用户访问视图;用户通过查询视图可以获取娄据表中公开的数据，从而达到将数据表中的部分数据对用户隐藏。</p></li><li><p><strong>简单性</strong>：如果我们需要查询的数据来源于多张数据表，可以使用多表连接查询来实现；我们通过视图将这些联表查询的结果对用户开放，用户则可以直接通过查询视图获取多张数据表，操作更便捷。</p></li></ul><h5 id="11-3-创建视图"><a href="#11-3-创建视图" class="headerlink" title="11.3 创建视图"></a>11.3 创建视图</h5><h6 id="11-3-1-语法"><a href="#11-3-1-语法" class="headerlink" title="11.3.1 语法"></a>11.3.1 语法</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> view_name</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">select_statement</span><br></pre></td></tr></table></figure><h6 id="13-3-2-实例"><a href="#13-3-2-实例" class="headerlink" title="13.3.2 实例"></a>13.3.2 实例</h6><ul><li>示例1：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图实例<span class="number">1</span>：将学生表中性别为男的学生生成一个视图</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_test1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询视图</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> view_test1;</span><br></pre></td></tr></table></figure><ul><li>示例2：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 创建视图的示例<span class="number">2</span>：查询学生借书的信息（学生名、图书名、借书数量）</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_test2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.stu_name,b.book_name,borrow_num</span><br><span class="line"><span class="keyword">FROM</span> books b <span class="keyword">INNER</span> <span class="keyword">JOIN</span> records r <span class="keyword">INNER</span> <span class="keyword">JOIN</span> students s</span><br><span class="line"><span class="keyword">ON</span> b.book_id <span class="operator">=</span> r.bid <span class="keyword">AND</span> r.snum<span class="operator">=</span>s.stu_num;</span><br><span class="line"></span><br><span class="line"># 查询视图</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> view_test2;</span><br></pre></td></tr></table></figure><h5 id="11-4-视图数据的特性"><a href="#11-4-视图数据的特性" class="headerlink" title="11.4 视图数据的特性"></a>11.4 视图数据的特性</h5><p>视图时虚拟表，查询视图的数据是来源于数据表。当对视图进行操作时对原数据表中的数据是否影响呢?</p><p><strong>查询操作：</strong>如果在数据表中添加了新的数据，而这个数据满足创建视图时 查询语句的条件，通过查询视图也可以查询出新增数据；当删除原表中满足查询条件的数据时，也会从视图中删除。</p><p><strong>新增数据：</strong>如果在视图中添加数据，数据会被添加到原表中</p><p><strong>删除数据：</strong>如果从视图删除数据，数据将从原表中删除</p><p><strong>修改操作：</strong>如果通过修改数据，则也将修改原数据表中的数据</p><p><code>视图的使用建议：</code>对复杂查询简化操作，并且不会对数据进行修改的情况下可以使用视图。</p><h5 id="11-5-查询视图结构"><a href="#11-5-查询视图结构" class="headerlink" title="11.5 查询视图结构"></a>11.5 查询视图结构</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 查询视图结构</span><br><span class="line"><span class="keyword">DESC</span> view_test2;</span><br></pre></td></tr></table></figure><h5 id="11-6-修改视图"><a href="#11-6-修改视图" class="headerlink" title="11.6 修改视图"></a>11.6 修改视图</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 方式<span class="number">1</span>:</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> view_test1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;、</span><br><span class="line"></span><br><span class="line"># 方式<span class="number">2</span>:修改原有的数据表</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> view_test1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure><h5 id="11-7-删除视图"><a href="#11-7-删除视图" class="headerlink" title="11.7 删除视图"></a>11.7 删除视图</h5><ul><li>删除数据表时会同时会删除数据表中的数据，删除视图不会影响源数据表中的数据</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 删除视图</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> view_test1</span><br></pre></td></tr></table></figure><h4 id="十二、索引"><a href="#十二、索引" class="headerlink" title="十二、索引"></a>十二、索引</h4><blockquote><p>数据库是用来存储数据，在互联网应用中数据库存储的数据可能会很多（大数据），数据表中数据查询的速度会随着数据量的增长逐渐变慢，从而导致相应用户请求的速度变慢——用户体验差，我们如何提高数据库的查询效率呢？</p></blockquote><h5 id="12-1-索引的介绍"><a href="#12-1-索引的介绍" class="headerlink" title="12.1 索引的介绍"></a>12.1 索引的介绍</h5><p>索引，就是用来提高数据表中数据的查询效率的。</p><blockquote><p>索引，就是将数据表中的某一列&#x2F;某几列的值取出来构造成便于查找的结构进行存储，生成数据表的<code>目录</code>当我们进行数据查询的时候，则现在<code>目录</code>中进行查找得到对应的数据地址，然后再到数据表中根据地址快速的获取记录，避免扫描全表。</p></blockquote><p><a href="https://imgse.com/i/pS6M6KA"><img src="https://s1.ax1x.com/2023/02/05/pS6M6KA.png" alt="pS6M6KA.png"></a></p><h5 id="12-2-索引的分类"><a href="#12-2-索引的分类" class="headerlink" title="12.2 索引的分类"></a>12.2 索引的分类</h5><p>MySQL中的索引，根据创建索引的列的不同，可以分为：</p><ul><li>主键索引：在数据表的主键字段创建的索引，这个字段必须被PRIMARY KEY修饰，每张表只能有一个主键</li><li>唯一索引：在数据表中的唯一列创建的索引（UNIQUE），此列的所有值只能出现一次，可以为NULL</li><li>普通索引：在普通字段上创建的索引，没有唯一性限制</li><li>组合索引：两个及以上字段联合起来创建的索引</li></ul><p><code>说明</code>：</p><ol><li>在创建数据表时，将字段声明为主键（添加主键约束），会自动在主键字段创建主键索引；</li><li>再创建数据表时，将字段声明为唯一键（添加唯一约束），会自动在唯一字段创建唯一索引；</li></ol><h5 id="12-3-创建索引"><a href="#12-3-创建索引" class="headerlink" title="12.3 创建索引"></a>12.3 创建索引</h5><h6 id="12-3-1-唯一索引"><a href="#12-3-1-唯一索引" class="headerlink" title="12.3.1 唯一索引"></a>12.3.1 唯一索引</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 创建唯一索引：创建唯一索引的列的值不能重复</span><br><span class="line"># <span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> 表名（列名）</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX index_test1 <span class="keyword">on</span> tb_testindex(tid);</span><br></pre></td></tr></table></figure><h6 id="12-3-2-普通索引"><a href="#12-3-2-普通索引" class="headerlink" title="12.3.2 普通索引"></a>12.3.2 普通索引</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 创建普通索引：不要求创建索引的列的值的唯一性</span><br><span class="line"># <span class="keyword">CREATE</span> INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> 表名（列名）</span><br><span class="line"><span class="keyword">CREATE</span> INDEX index_test1 <span class="keyword">on</span> tb_testindex(name);</span><br></pre></td></tr></table></figure><h6 id="12-3-3-组合索引"><a href="#12-3-3-组合索引" class="headerlink" title="12.3.3 组合索引"></a>12.3.3 组合索引</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 创建组合索引：</span><br><span class="line"># <span class="keyword">CREATE</span> INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> 表名（列名<span class="number">1</span>,列名<span class="number">2.</span>..）</span><br><span class="line"><span class="keyword">CREATE</span> INDEX index_test3 <span class="keyword">on</span> tb_testindex(tid,name);</span><br></pre></td></tr></table></figure><h6 id="12-3-4-全文索引"><a href="#12-3-4-全文索引" class="headerlink" title="12.3.4 全文索引"></a>12.3.4 全文索引</h6><blockquote><p>MySQL5.6版本新增的索引，可以通过此索引进行全文检索操作，因为MySQL全文检索不支持中文，因此这个全文索引不被开发者关注，在开发中通常是 通过搜索引擎（数据库中间件）实现全文索引</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> FULLTEXT INDEX <span class="operator">&lt;</span>index_name<span class="operator">&gt;</span> <span class="keyword">ON</span> 表明（字段名）;</span><br></pre></td></tr></table></figure><h5 id="12-4-索引使用"><a href="#12-4-索引使用" class="headerlink" title="12.4 索引使用"></a>12.4 索引使用</h5><blockquote><p>索引创建完成之后无需调用，当根据创建索引的列进行数据查询的时候，会自动使用索引；</p><p>组合索引需要根据创建索引的所有字段进行查询时触发。</p></blockquote><ul><li>在命令行窗口中可以查看查询语句的查询规划：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">explain <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> tb_testindex <span class="keyword">WHERE</span> tid<span class="operator">=</span><span class="number">250000</span>\G;</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pS6MrgH"><img src="https://s1.ax1x.com/2023/02/05/pS6MrgH.png" alt="pS6MrgH.png"></a></p><h5 id="12-5-查看索引"><a href="#12-5-查看索引" class="headerlink" title="12.5 查看索引"></a>12.5 查看索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> tb_testindex\G;</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pS6Msvd"><img src="https://s1.ax1x.com/2023/02/05/pS6Msvd.png" alt="pS6Msvd.png"></a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查询数据表的索引</span><br><span class="line"><span class="keyword">SHOW</span> INDEXES <span class="keyword">FROM</span> tb_testindex;</span><br><span class="line"></span><br><span class="line"># 查询数据表的索引</span><br><span class="line"><span class="keyword">SHOW</span> INDEXES <span class="keyword">FROM</span> tb_testindex;</span><br></pre></td></tr></table></figure><h5 id="12-6-删除索引"><a href="#12-6-删除索引" class="headerlink" title="12.6 删除索引"></a>12.6 删除索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 删除索引：索引是建立在表的字段上的，不同的表可能会出现相同名称的索引，因此删除索引时需要指定表名</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_testindex <span class="keyword">DROP</span> INDEX index_test3;</span><br><span class="line"><span class="keyword">DROP</span> INDEX index_test3 <span class="keyword">ON</span> tb_testindex;</span><br></pre></td></tr></table></figure><h5 id="12-7-索引的使用总结"><a href="#12-7-索引的使用总结" class="headerlink" title="12.7 索引的使用总结"></a>12.7 索引的使用总结</h5><h6 id="12-7-1-优点"><a href="#12-7-1-优点" class="headerlink" title="12.7.1 优点"></a>12.7.1 优点</h6><ul><li>索引大大降低了数据库服务器执行查询操作时扫描的数据，提高查询效率；</li><li>索引可以避免服务器排序、将随机IO变成顺序IO；</li></ul><h6 id="12-7-2-缺点"><a href="#12-7-2-缺点" class="headerlink" title="12.7.2 缺点"></a>12.7.2 缺点</h6><ul><li>索引是根据数据列表创建的，当数据表中数据发生DML操作时，索引页需要更新；</li><li>索引文件也会占用磁盘空间；</li></ul><p>12.7.3 注意事项</p><ul><li>数据表中数据不多时，全表扫描可能更快</li><li>数据量大，但是DML操作很频繁时，不建议使用索引；</li><li>不要在数据重复度高的列上创建索引（性别）；</li><li>创建索引之后，要注意查询SQL语句的编写，避免索引失效。</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql笔记#day5</title>
      <link href="/2023/01/23/sql%E7%AC%94%E8%AE%B0-day5/"/>
      <url>/2023/01/23/sql%E7%AC%94%E8%AE%B0-day5/</url>
      
        <content type="html"><![CDATA[<h4 id="八、连接查询"><a href="#八、连接查询" class="headerlink" title="八、连接查询"></a>八、连接查询</h4><blockquote><p>通过对DQL的学习，我们可以很轻松的从一张数据表中查询出需要的数据；在企业的应用开发中，我们经常需要从多张表中查询数据（例如：我们查询学生信息的时候需要同时查询学生的班级信息）</p><p>在MySQL中可以使用join实现多表的联合查询——连接查询，join按照其功能不同分为三个操作：</p><ul><li><code>inner join 内连接</code></li><li><code>left join 左连接</code></li><li><code>right join 右连接</code></li></ul></blockquote><h5 id="8-1-数据准备"><a href="#8-1-数据准备" class="headerlink" title="8.1 数据准备"></a>8.1 数据准备</h5><h6 id="8-1-1创建学生班级信息表和学生信息表"><a href="#8-1-1创建学生班级信息表和学生信息表" class="headerlink" title="8.1.1创建学生班级信息表和学生信息表"></a>8.1.1创建学生班级信息表和学生信息表</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classes(</span><br><span class="line">class_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increament,</span><br><span class="line">class_name <span class="type">varchar</span>(<span class="number">40</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">class_remark <span class="type">varchar</span>(<span class="number">200</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">    stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">    stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid <span class="type">int</span>,</span><br><span class="line">    <span class="keyword">constraint</span> FK_STUDENT_CLASSES <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> classes(class_id) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h6 id="8-1-2添加数据"><a href="#8-1-2添加数据" class="headerlink" title="8.1.2添加数据"></a>8.1.2添加数据</h6><p>添加班级信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">2018</span>包含三个学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2018&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">#<span class="number">2019</span>包含两个学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2019&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line">#以下两个班级没有包含对应的学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2020&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2021&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br></pre></td></tr></table></figure><p>添加学生信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 以下三个学生信息属于class_id<span class="operator">=</span><span class="number">1</span> 的班级<span class="number">2018</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220101&#x27;</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220102&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220103&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"># 以下三个学生信息属于class_id<span class="operator">=</span><span class="number">2</span> 的班级<span class="number">2019</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220104&#x27;</span>,<span class="string">&#x27;赵六&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220105&#x27;</span>,<span class="string">&#x27;孙琪&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"> #小红和小明没有设置班级信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;20220106&#x27;</span>,<span class="string">&#x27;小红&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;20220107&#x27;</span>,<span class="string">&#x27;小明&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure><h5 id="8-2-内连接-INNER-JOIN"><a href="#8-2-内连接-INNER-JOIN" class="headerlink" title="8.2 内连接 INNER JOIN"></a>8.2 内连接 INNER JOIN</h5><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ... <span class="keyword">from</span> tableName <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tableName2;</span><br></pre></td></tr></table></figure><h6 id="8-2-1笛卡尔积"><a href="#8-2-1笛卡尔积" class="headerlink" title="8.2.1笛卡尔积"></a>8.2.1笛卡尔积</h6><ul><li><p>笛卡尔积（A集合&amp;B集合）：使用A中的每一个记录一次关联B中的每一个记录，笛卡尔积总数&#x3D;A总数*B总数</p></li><li><p>如果直接执行<code>select ... from tableName INNER JOIN tableName2;</code>会获取两种数据表中的数据集合的笛卡尔积（依次使用tableName1表中的每一条记录 去 匹配tableName2中的每一条记录）</p></li></ul><h6 id="8-2-2-内连接条件"><a href="#8-2-2-内连接条件" class="headerlink" title="8.2.2 内连接条件"></a>8.2.2 内连接条件</h6><blockquote><p>两张表使用 INNER JOIN连接查询之后产生的笛卡尔积数据很多是无意义的，我们如何消除无意义的数据呢？</p><p>添加两张表进行查询时的条件</p></blockquote><ul><li>使用<code>ON</code>关键字设置两张表连接查询的匹配条件</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用<span class="keyword">where</span>设置过滤条件：先生成笛卡尔积，再从笛卡尔积中过滤数据（效率很低）</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">INNER</span> <span class="keyword">JOIN</span> classes <span class="keyword">WHERE</span> students.cid<span class="operator">=</span>classes.class_id;</span><br><span class="line"></span><br><span class="line"># 使用 <span class="keyword">ON</span>设置连接查询条件：先判断连接条件是否成立，如果成立两张表的数据进行组合生成一条结果记录</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">INNER</span> <span class="keyword">JOIN</span> classes <span class="keyword">ON</span> students.cid<span class="operator">=</span>classes.class_id;</span><br></pre></td></tr></table></figure><ul><li>结果：只获取两种表中匹配条件成立的数据，任何一张表在另一张表如果没有找到对应匹配则不会出现在查询结果中（例如：小红和小明没有对应的班级信息，2020和2021没有对应的学生）</li></ul><h5 id="8-3-左连接LEFT-JOIN"><a href="#8-3-左连接LEFT-JOIN" class="headerlink" title="8.3 左连接LEFT JOIN"></a>8.3 左连接LEFT JOIN</h5><blockquote><p>需求：查询出所有的学生信息，如果学生有对应的班级信息，则将对应的班级信息也查询出来</p></blockquote><p>左连接：显示左表中的所有数据，如果在右表中存在与做表满足匹配条件的数据，则进行匹配；如果右表中不存在匹配数据，则显示为NULL。</p><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> leftTable <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> rightTable <span class="keyword">ON</span> 匹配条件 [<span class="keyword">where</span>条件];</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pSY3sfK"><img src="https://s1.ax1x.com/2023/01/23/pSY3sfK.png" alt="pSY3sfK.png"></a></p><h5 id="8-4-右连接-RIGHT-JOIN"><a href="#8-4-右连接-RIGHT-JOIN" class="headerlink" title="8.4 右连接 RIGHT JOIN"></a>8.4 右连接 RIGHT JOIN</h5><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> leftTable <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> rightTable <span class="keyword">ON</span> 匹配条件 [<span class="keyword">where</span>条件];</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pSY3rY6"><img src="https://s1.ax1x.com/2023/01/23/pSY3rY6.png" alt="pSY3rY6.png"></a></p><h5 id="8-5-数据表别名"><a href="#8-5-数据表别名" class="headerlink" title="8.5 数据表别名"></a>8.5 数据表别名</h5><blockquote><p>如果在连接查询的表中存在多个重复的字段，我们可以用<code>表名.字段名</code>来进行区分，如果表明太长则不便于SQL语句的编写，我们可以使用数据表别名</p></blockquote><p>使用实例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.<span class="operator">*</span>,c.class_name</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> classes c</span><br><span class="line"><span class="keyword">ON</span> s.cid<span class="operator">=</span>c.class_id</span><br></pre></td></tr></table></figure><h5 id="8-6-子查询-x2F-嵌套查询"><a href="#8-6-子查询-x2F-嵌套查询" class="headerlink" title="8.6 子查询&#x2F;嵌套查询"></a>8.6 子查询&#x2F;嵌套查询</h5><blockquote><p>子查询——先进行查询一次，第一次查询的结果作为</p></blockquote><h6 id="8-6-1-子查询返回单个值-单行单列"><a href="#8-6-1-子查询返回单个值-单行单列" class="headerlink" title="8.6.1 子查询返回单个值-单行单列"></a>8.6.1 子查询返回单个值-单行单列</h6><p>**案例1:**查询班级名称为’2018’班级中的学生信息(只知道班级名称，而不知道班级ID)</p><ul><li>传统的查询方式</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a.查询<span class="number">2018</span>班的班级编号</span><br><span class="line"><span class="keyword">select</span> class_id <span class="keyword">from</span> classes <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2018&#x27;</span></span><br><span class="line"></span><br><span class="line">b.查询此班级编号下的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><ul><li>子查询</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#如果返子查询返回的结果是一个值（单行单列），条件可以直接使用关系运算符（<span class="operator">=</span>   <span class="operator">!=</span>   ....）</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span>(<span class="keyword">select</span> class_id <span class="keyword">from</span> classes <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2018&#x27;</span>);</span><br></pre></td></tr></table></figure><h6 id="8-6-2-子查询返回多个值-多行单列"><a href="#8-6-2-子查询返回多个值-多行单列" class="headerlink" title="8.6.2 子查询返回多个值-多行单列"></a>8.6.2 子查询返回多个值-多行单列</h6><p><strong>案例2:</strong></p><ul><li>传统的查询方式</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.查询左右<span class="number">201</span>X的班级编号</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> classes <span class="keyword">where</span> class_name <span class="keyword">LIKE</span> <span class="string">&#x27;201%&#x27;</span>;</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pSY30T1"><img src="https://s1.ax1x.com/2023/01/23/pSY30T1.png" alt="pSY30T1.png"></a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">b.查询这些班级编号中的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pSY3wwR"><img src="https://s1.ax1x.com/2023/01/23/pSY3wwR.png" alt="pSY3wwR.png"></a></p><ul><li>子查询</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 如果子查询返回的值是多个值（单列多行），条件使用 <span class="keyword">IN</span><span class="operator">/</span><span class="keyword">NOT</span> <span class="keyword">IN</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> students <span class="keyword">where</span> cid <span class="keyword">IN</span> (<span class="keyword">select</span> class_id <span class="keyword">from</span> classes <span class="keyword">where</span> class_name <span class="keyword">LIKE</span> <span class="string">&#x27;201%&#x27;</span>);</span><br></pre></td></tr></table></figure><h6 id="8-6-3-子查询返回多个值-多行多列"><a href="#8-6-3-子查询返回多个值-多行多列" class="headerlink" title="8.6.3 子查询返回多个值-多行多列"></a>8.6.3 子查询返回多个值-多行多列</h6><p><strong>案例3：</strong><code>查询cid=1的班级中性别为男的学生信息</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 多条件查询</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> cid <span class="operator">=</span> <span class="number">1</span> <span class="keyword">AND</span> stu_gender<span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 子查询:先查询cid<span class="operator">=</span><span class="number">1</span> 班级中的所有学生信息，将这些信息作为一个整体虚拟表（多行多列）</span><br><span class="line"># 再基于这个虚拟表查询性别为男的学生信息（虚拟表需要别名）</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> cid <span class="operator">=</span> <span class="number">1</span>) t <span class="keyword">WHERE</span> t.stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="九、存储过程"><a href="#九、存储过程" class="headerlink" title="九、存储过程"></a>九、存储过程</h4><h5 id="9-1-存储过程介绍"><a href="#9-1-存储过程介绍" class="headerlink" title="9.1 存储过程介绍"></a>9.1 存储过程介绍</h5><p>9.1.1 SQL指令执行过程</p><p><a href="https://imgse.com/i/pSY3DFx"><img src="https://s1.ax1x.com/2023/01/23/pSY3DFx.png" alt="pSY3DFx.png"></a></p><p>从SQL指令执行的流程中我们分析存在的问题：</p><ol><li>如果我们需要重复多次执行相同的SQL，SQL执行都需要通过连接传递到MySQL，并且需要经过编译和执行的步骤；</li><li>如果我们需要连续执行多个SQL指令，并且第二个SQL指令需要使用第一个SQL指令执行的结果作为参数；</li></ol><h6 id="9-1-2-存储过程的介绍"><a href="#9-1-2-存储过程的介绍" class="headerlink" title="9.1.2 存储过程的介绍"></a>9.1.2 存储过程的介绍</h6><blockquote><p>存储过程：</p><p>将能够完成特定功能的SQL指令进行封装（SQL指令集），编译之后存储再数据库服务器上，并且为之取一个名字，客户端可以通过名字直接调用这个SQL指令集，获取执行结果。</p></blockquote><p>存储过程优点</p><ol><li>SQL指令无需客户端编写，通过网络传送，可以节省网络开销，同时避免SQL指令在网络传输过程被恶意篡改保证安全性；</li><li>存储过程经过编译创建保存在数据库中，执行过程中无需重复地进行编译操作，对SQL指令的执行过程进行了性能提升；</li><li>存储过程中多个SQL指令之间存在逻辑关系，支持流程控制语句（分支、循环），可以实现更复杂的业务；</li></ol><p>存储过程的缺点：</p><ol><li>存储过程是根据不同的数据库进行编译、创建并存储在数据库中；当我们需要切换到其他数据库产品时，需要重写针对新数据库的存储过程；</li><li>存储过程受限于数据库产品，如果需要性能的优化会成为一个问题；</li><li>在互联网项目中，如果需要数据库的高（连接）并发访问，使用存储过程会增加数据库的连接执行时间（因为我们将复杂的业务交给了数据库进行处理）</li></ol><h5 id="9-2-创建存储过程"><a href="#9-2-创建存储过程" class="headerlink" title="9.2 创建存储过程"></a>9.2 创建存储过程</h5><blockquote><p>存储过程：就是将能够完成特定功能的SQL指令进行封装</p></blockquote><h6 id="9-2-1-存储过程创建语法"><a href="#9-2-1-存储过程创建语法" class="headerlink" title="9.2.1 存储过程创建语法"></a>9.2.1 存储过程创建语法</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 语法</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> <span class="operator">&lt;</span>proc_name<span class="operator">&gt;</span>([<span class="keyword">IN</span><span class="operator">/</span><span class="keyword">OUT</span> args])</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SQL</span></span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><p>示例:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#创建一个存储过程实现加法以运算：</span><br><span class="line">#JAVA语法中，方法是由参数和返回值的，</span><br><span class="line">#存储过程中是由输入参数 和 输出参数的</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> proc_test1(<span class="keyword">IN</span> a <span class="type">int</span>,<span class="keyword">In</span> b <span class="type">int</span>,<span class="keyword">OUT</span> c <span class="type">int</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line"><span class="keyword">SET</span> c<span class="operator">=</span> a<span class="operator">+</span>b;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><h5 id="9-3-调用存储过程"><a href="#9-3-调用存储过程" class="headerlink" title="9.3 调用存储过程"></a>9.3 调用存储过程</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 定义变量<span class="variable">@m</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@m</span><span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"># 调用存储过程，将<span class="number">3</span>传给a,将<span class="number">2</span>传给b ，将<span class="variable">@m</span>传递给c</span><br><span class="line"><span class="keyword">CALL</span> proc_test1(<span class="number">3</span>,<span class="number">2</span>,<span class="variable">@m</span>);</span><br><span class="line"># 显示变量值</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@m</span> <span class="keyword">from</span> DUAL;</span><br></pre></td></tr></table></figure><h5 id="9-4-存储过程中变量的使用"><a href="#9-4-存储过程中变量的使用" class="headerlink" title="9.4 存储过程中变量的使用"></a>9.4 存储过程中变量的使用</h5><blockquote><p>存储过程中的变量分为两种：局部变量   用户变量</p></blockquote><h6 id="9-4-1-局部变量"><a href="#9-4-1-局部变量" class="headerlink" title="9.4.1 局部变量"></a>9.4.1 局部变量</h6><p>局部变量：定义在存储过程中的变量，只能存储在过程内部使用。</p><ul><li>局部变量定义语法</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 局部变量要定义在存储过程中，而且必须定义在存储过程中开始</span><br><span class="line"><span class="keyword">declare</span> <span class="operator">&lt;</span>attr_name<span class="operator">&gt;</span> <span class="operator">&lt;</span>type<span class="operator">&gt;</span> [<span class="keyword">default</span> <span class="keyword">value</span>];</span><br></pre></td></tr></table></figure><ul><li>局部变量定义示例：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 创建一个存储过程：计算输入参数的平方与 输入参数<span class="operator">/</span><span class="number">2</span> 之和</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_teset2(<span class="keyword">IN</span> a <span class="type">INT</span> , <span class="keyword">OUT</span> r <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> x <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> y <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">SET</span> x <span class="operator">=</span> a<span class="operator">*</span>a;</span><br><span class="line"><span class="keyword">SET</span> y <span class="operator">=</span> a<span class="operator">/</span><span class="number">2</span>;</span><br><span class="line"><span class="keyword">SET</span> r <span class="operator">=</span> x<span class="operator">+</span>y;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="9-4-2-用户变量"><a href="#9-4-2-用户变量" class="headerlink" title="9.4.2 用户变量"></a>9.4.2 用户变量</h6><p>用户变量：相当于全局变量，定义的用户变量可以通过<code>select @attrName from dual </code> 进行查询</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#用户变量会存储在MySQL数据库的数据字典中（dual）</span><br><span class="line">#用户变量定义使用<span class="keyword">set</span>关键字直接定义，变量名要以@开头</span><br><span class="line"><span class="keyword">set</span> <span class="variable">@n</span><span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure><h6 id="9-4-3-给变量设置值"><a href="#9-4-3-给变量设置值" class="headerlink" title="9.4.3 给变量设置值"></a>9.4.3 给变量设置值</h6><ul><li>无论是局部变量还是用户变量，都是使用<code>set</code>关键字修改值</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="variable">@n</span><span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">CALL</span> proc_test2 (<span class="number">6</span>, <span class="variable">@n</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@n</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure><h6 id="9-4-4-将查询结果赋值给变量"><a href="#9-4-4-将查询结果赋值给变量" class="headerlink" title="9.4.4 将查询结果赋值给变量"></a>9.4.4 将查询结果赋值给变量</h6><p>在存储过程中使用select…into…给变量赋值</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查询学生数量</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> pro_test3(<span class="keyword">OUT</span> c <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(stu_num) <span class="keyword">INTO</span> c <span class="keyword">FROM</span> students; #赋值给c</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"># 调用存储过程</span><br><span class="line"><span class="keyword">call</span> pro_test3(<span class="variable">@n</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@n</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure><h6 id="9-4-5-用户变量使用的注意事项"><a href="#9-4-5-用户变量使用的注意事项" class="headerlink" title="9.4.5 用户变量使用的注意事项"></a>9.4.5 用户变量使用的注意事项</h6><blockquote><p>因为用户变量相当于全局变量，可以在SQL指令以及多个存储过程中共享，在开发中建议尽量少使用用户变量，用户变量过多会导致程序不易理解、难以维护。</p></blockquote><h5 id="9-5-存储过程的参数"><a href="#9-5-存储过程的参数" class="headerlink" title="9.5 存储过程的参数"></a>9.5 存储过程的参数</h5><blockquote><p>MySQL存储过程的参数一共有三种：IN \ OUT \ INOUT</p></blockquote><h6 id="9-5-1-IN-输入参数"><a href="#9-5-1-IN-输入参数" class="headerlink" title="9.5.1 IN 输入参数"></a>9.5.1 IN 输入参数</h6><p>输入参数——在调用存储过程中传递数据给存储过程的参数（在调用的过程中必须为具有实际值的变量）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 创建存储过程：添加学生信息</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test4(<span class="keyword">IN</span> snum <span class="type">char</span>(<span class="number">8</span>),<span class="keyword">IN</span> sname <span class="type">char</span>(<span class="number">20</span>), <span class="keyword">IN</span> gender <span class="type">CHAR</span>(<span class="number">2</span>), <span class="keyword">IN</span> age <span class="type">int</span>,<span class="keyword">IN</span> cid <span class="type">INT</span>, <span class="keyword">In</span> remark <span class="type">VARCHAR</span>(<span class="number">255</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark)</span><br><span class="line"><span class="keyword">VALUES</span>(snum,sname,gender,age,cid,remark);</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test4(<span class="string">&#x27;20220108&#x27;</span>, <span class="string">&#x27;小丽&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">20</span>, <span class="number">1</span>, <span class="string">&#x27;aaa&#x27;</span>);</span><br></pre></td></tr></table></figure><h6 id="9-5-2-OUT输出参数"><a href="#9-5-2-OUT输出参数" class="headerlink" title="9.5.2 OUT输出参数"></a>9.5.2 OUT输出参数</h6><p>输出参数——将存储过程中产生的数据返回给过程的调用者，相当于JAVA方法的返回值，但不同的是一个存储过程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#创建存储过程，根据学生学号查询学生姓名</span><br><span class="line">CREATE PROCEDURE proc_test5(IN snum char(8),OUT sname VARCHAR(20))</span><br><span class="line">BEGIN</span><br><span class="line">SELECT stu_name INTO sname FROM students where stu_num=snum;</span><br><span class="line">END;</span><br><span class="line"></span><br><span class="line">SET @name=&#x27;&#x27;;</span><br><span class="line">CALL proc_test5(&#x27;20220108&#x27;,@name);</span><br><span class="line">SELECT @name from DUAL;</span><br></pre></td></tr></table></figure><h6 id="9-5-3-INOUT-输入输出参数"><a href="#9-5-3-INOUT-输入输出参数" class="headerlink" title="9.5.3 INOUT 输入输出参数"></a>9.5.3 INOUT 输入输出参数</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test6(<span class="keyword">INOUT</span> str <span class="type">VARCHAR</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SELECT</span> stu_name <span class="keyword">INTO</span> str <span class="keyword">FROM</span> students <span class="keyword">where</span> stu_num<span class="operator">=</span>str;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@name</span><span class="operator">=</span><span class="string">&#x27;20220108&#x27;</span>;</span><br><span class="line"><span class="keyword">CALL</span> proc_test6(<span class="variable">@name</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@name</span> <span class="keyword">from</span> DUAL;</span><br></pre></td></tr></table></figure><h5 id="9-6-存储过程中的流程控制"><a href="#9-6-存储过程中的流程控制" class="headerlink" title="9.6 存储过程中的流程控制"></a>9.6 存储过程中的流程控制</h5><blockquote><p>在存储过程中流程控制语句用于实现逻辑的控制</p></blockquote><h6 id="9-6-1-分支语句"><a href="#9-6-1-分支语句" class="headerlink" title="9.6.1 分支语句"></a>9.6.1 分支语句</h6><ul><li>if - then - else</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 单分支：如果条件成立，则执行<span class="keyword">SQL</span></span><br><span class="line">if conditions <span class="keyword">then</span></span><br><span class="line"><span class="comment">--SQL</span></span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line"># 如果参数a的值为<span class="number">1</span>，则添加一条班级信息</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test7(<span class="keyword">IN</span> a <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">IF a<span class="operator">=</span><span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;2022&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 双分支：如果条件成立则执行SQL1，否则执行SQL2</span><br><span class="line">if conditions <span class="keyword">then</span></span><br><span class="line"><span class="comment">--SQL1</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="comment">--SQL2</span></span><br><span class="line"><span class="keyword">end</span> if;</span><br><span class="line"></span><br><span class="line"># 如果参数a的值为<span class="number">1</span>，则添加一条班级信息，否则添加一条学生信息</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test7(<span class="keyword">IN</span> a <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">IF a<span class="operator">=</span><span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;2022&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;20220109&#x27;</span>,<span class="string">&#x27;小花&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">19</span>,<span class="number">1</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"> <span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test7(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><ul><li>case</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test8(<span class="keyword">IN</span> a <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">case</span> a </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="comment">-- SQL1  如果a的值为1，则执行SQL1</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(<span class="string">&#x27;2023&#x27;</span>,<span class="string">&#x27;hfajds&#x27;</span>);</span><br><span class="line"><span class="keyword">when</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="comment">-- SQL2 如果a的值为2，则执行SQL2</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students(stu_num,stu_name,stu_gender,stu_age,cid,remark)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;20220110&#x27;</span>,<span class="string">&#x27;小刚&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">21</span>,<span class="number">2</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="comment">-- SQL 如果变量的值和所有的when的值都不匹配，则执行else中的这个SQL</span></span><br><span class="line"><span class="keyword">UPDATE</span> students <span class="keyword">set</span> stu_age<span class="operator">=</span><span class="number">18</span> <span class="keyword">WHERE</span> stu_num<span class="operator">=</span><span class="string">&#x27;20220109&#x27;</span>;</span><br><span class="line"><span class="keyword">END</span> <span class="keyword">CASE</span>;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><h6 id="9-6-2-循环语句"><a href="#9-6-2-循环语句" class="headerlink" title="9.6.2 循环语句"></a>9.6.2 循环语句</h6><ul><li>while</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test9(<span class="keyword">IN</span> num <span class="type">INT</span>)</span><br><span class="line"> <span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">int</span>;#定义局部变量</span><br><span class="line"><span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">WHILE i<span class="operator">&lt;</span>num DO</span><br><span class="line"><span class="comment">-- SQL</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(CONCAT(<span class="string">&#x27;H&#x27;</span>,i),<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line"><span class="keyword">SET</span> i<span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test9(<span class="number">4</span>);</span><br></pre></td></tr></table></figure><ul><li>repeat</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test10(<span class="keyword">IN</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">SET</span> i <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">REPEAT</span><br><span class="line">  <span class="comment">-- SQL</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(CONCAT(<span class="string">&#x27;Z&#x27;</span>,i),<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line"><span class="keyword">SET</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">UNTIL i <span class="operator">&gt;</span> num <span class="keyword">END</span> REPEAT;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test10(<span class="number">4</span>);</span><br></pre></td></tr></table></figure><ul><li>loop</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test11(<span class="keyword">IN</span> num <span class="type">int</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span> ;</span><br><span class="line"><span class="keyword">set</span> i <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">myloop: LOOP</span><br><span class="line"><span class="comment">-- SQL</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> classes(class_name,remark) <span class="keyword">VALUES</span>(CONCAT(<span class="string">&#x27;HTML&#x27;</span>,i),<span class="string">&#x27;....&#x27;</span>);</span><br><span class="line"><span class="keyword">SET</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line">IF i <span class="operator">=</span>num <span class="keyword">THEN</span></span><br><span class="line">LEAVE myloop; </span><br><span class="line"><span class="keyword">END</span> IF; </span><br><span class="line"><span class="keyword">END</span> LOOP myloop;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CALL</span> proc_test11(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><h5 id="9-7-存储过程的管理"><a href="#9-7-存储过程的管理" class="headerlink" title="9.7 存储过程的管理"></a>9.7 存储过程的管理</h5><h6 id="9-7-1-查询存储过程"><a href="#9-7-1-查询存储过程" class="headerlink" title="9.7.1 查询存储过程"></a>9.7.1 查询存储过程</h6><blockquote><p>存储过程是隶属于某个数据库的，也就是说当我们将存储过程创建在某个数据库之后，只能在当前数据库中调用此存储过程。</p><p>查询存储过程：查询某个数据库中有哪些存储过程</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 根据数据库名，查询当前数据库中的存储过程</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">PROCEDURE</span> STATUS <span class="keyword">WHERE</span> db<span class="operator">=</span><span class="string">&#x27;db_test2&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#查询存储过程的创作细节</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> db_test2.proc_test1;</span><br></pre></td></tr></table></figure><h6 id="9-7-2-修改存储过程"><a href="#9-7-2-修改存储过程" class="headerlink" title="9.7.2 修改存储过程"></a>9.7.2 修改存储过程</h6><blockquote><p>修改存储过程指的是修改存储过程的特性&#x2F;特征</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">PROCEDURE</span> <span class="operator">&lt;</span>proc_name<span class="operator">&gt;</span> 特征<span class="number">1</span> [特征<span class="number">2</span>，特征<span class="number">3.</span>..]</span><br></pre></td></tr></table></figure><ul><li><code>CONTAINS SQL</code>表示子程序包含SQL语句，但不包含读或写数据的语句</li><li><code>NO SQL</code>表示子程序中不包含SQL语句</li><li><code>READS SQL DATA</code>表示子程序中包含读数据的语句</li><li><code>MODIFIES SQL DATA</code>表示子程序中包含写数据的语句</li><li><code>SQL SECURITY &#123; DEFINER |INVOKER &#125;</code>指明谁有权限来执行</li><li><code>DEFINER</code>表示只有定义者自己才能够执行</li><li><code>NVOKER</code>表示调用者可以执行</li><li><code>COMMENT &#39;string&#39;</code>表示注释信息</li></ul><h6 id="9-7-3-删除存储过程"><a href="#9-7-3-删除存储过程" class="headerlink" title="9.7.3 删除存储过程"></a>9.7.3 删除存储过程</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 删除存储过程</span><br><span class="line"># 删除数据库中的对象、数据库、列、存储过程、视图、触发器、索引...</span><br><span class="line"># <span class="keyword">delete</span> 删除数据表中的数据</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PROCEDURE</span> proc_test1;</span><br></pre></td></tr></table></figure><h5 id="9-8-存储过程练习案例"><a href="#9-8-存储过程练习案例" class="headerlink" title="9.8 存储过程练习案例"></a>9.8 存储过程练习案例</h5><blockquote><p>使用存储过程解决企业项目开发过程的问题、</p><p>案例：使用存储过程完成借书操作</p></blockquote><h6 id="9-8-1-数据准备"><a href="#9-8-1-数据准备" class="headerlink" title="9.8.1 数据准备"></a>9.8.1 数据准备</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># 创建数据库</span><br><span class="line"><span class="keyword">create</span> database db_test3;</span><br><span class="line"></span><br><span class="line"># 使用数据库</span><br><span class="line">use db_tset3;</span><br><span class="line"></span><br><span class="line"># 创建图书信息表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line">book_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">book_name <span class="type">varchar</span>(<span class="number">58</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">book_author <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">book_price <span class="type">decimal</span>(<span class="number">10</span>,<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">book_stock <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">NULL</span>,</span><br><span class="line">book_desc <span class="type">varchar</span>(<span class="number">200</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 添加图书信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> books(book_name,book_author,book_price,book_stock,book_desc)<span class="keyword">values</span>(<span class="string">&#x27;Java程序设计&#x27;</span>,<span class="string">&#x27;亮亮&#x27;</span>,<span class="number">38.80</span>,<span class="number">12</span>,<span class="string">&#x27;老师带你学Java&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> books(book_name,book_author,book_price,book_stock,book_desc)<span class="keyword">values</span>(<span class="string">&#x27;Java王者之路&#x27;</span>,<span class="string">&#x27;威哥&#x27;</span>,<span class="number">44.40</span>,<span class="number">9</span>,<span class="string">&#x27;威哥Java王者领路人&#x27;</span>);</span><br><span class="line"></span><br><span class="line"># 创建学生信息表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># 添加学生信息</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name, stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;1001&#x27;</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name, stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;1002&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name, stu_gender,stu_age) <span class="keyword">values</span>(<span class="string">&#x27;1003&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>);</span><br></pre></td></tr></table></figure><p><strong>业务分析</strong></p><blockquote><p>哪个学生借哪本书，借了多少本书？</p><p>操作：</p><ul><li>保存借书记录</li><li>修改图书库存</li></ul><p>条件：</p><ul><li>判断学生是否存在？</li><li>判断图书是否存在，库存是否充足？</li></ul></blockquote><p><strong>创建借书记录表</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 借书记录表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">table</span> records(</span><br><span class="line">rid <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY auto_increment,</span><br><span class="line">snum <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">not</span> <span class="keyword">NULL</span>,</span><br><span class="line">bid <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">borrow_num <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">NULL</span>,</span><br><span class="line">is_return <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>, <span class="comment">-- 0 表示未归还， 1 表示已经归还</span></span><br><span class="line">borrow_date <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line"><span class="keyword">CONSTRAINT</span> FK_RECORDS_STUDENTS <span class="keyword">foreign</span> key(snum) <span class="keyword">REFERENCES</span> students(stu_num),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> FK_RECORDS_BOOKS <span class="keyword">FOREIGN</span> KEY(bid) <span class="keyword">REFERENCES</span> books(book_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h6 id="9-8-2-创建存储过程"><a href="#9-8-2-创建存储过程" class="headerlink" title="9.8.2 创建存储过程"></a>9.8.2 创建存储过程</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 实现借书业务</span><br><span class="line"># 参数<span class="number">1</span>：a 输入参数 学号</span><br><span class="line"># 参数<span class="number">2</span>：b 输入参数 图书编号</span><br><span class="line"># 参数<span class="number">3</span>：m 输入参数 借书的数量</span><br><span class="line"># 参数<span class="number">4</span>：state 输出参数 借书的状态 (<span class="number">1</span>：借书成功 <span class="number">2</span>：学号不存在 <span class="number">3</span>：图书不存在 <span class="number">4</span>：库存不足)</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_borrow_book(<span class="keyword">IN</span> a <span class="type">char</span>(<span class="number">4</span>),<span class="keyword">IN</span> b <span class="type">INT</span>,<span class="keyword">IN</span> m <span class="type">INT</span>,<span class="keyword">OUT</span> state <span class="type">INT</span>)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> stu_count <span class="type">int</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> book_count <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> stock <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">-- 判断学号是否存在：根据参数a到学生信息表查询是否有stu_num=a的记录</span></span><br><span class="line"><span class="comment">-- COUNT()函数统计数量</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(stu_num) <span class="keyword">INTO</span> stu_count <span class="keyword">from</span> students <span class="keyword">WHERE</span> stu_num<span class="operator">=</span>a;</span><br><span class="line">IF stu_count<span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="comment">-- 学号存在</span></span><br><span class="line"><span class="comment">-- 判断图书ID是否存在：根据参数b，查询图书记录总数</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(book_id) <span class="keyword">INTO</span> book_count <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> book_id<span class="operator">=</span>b;</span><br><span class="line">if book_count <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="comment">-- 图书存在</span></span><br><span class="line"><span class="comment">-- 判断是图书的库存是否充足，查询当前图书库存，然后和参数m进行比较</span></span><br><span class="line"><span class="keyword">SELECT</span> book_stock <span class="keyword">INTO</span> stock <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> book_id<span class="operator">=</span>b;</span><br><span class="line">IF stock <span class="operator">&gt;=</span> m <span class="keyword">THEN</span></span><br><span class="line"><span class="comment">-- 执行借书</span></span><br><span class="line"><span class="comment">-- 操作1：在借书记录表中添加记录</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> records (snum,bid,borrow_num,is_return,borrow_date) <span class="keyword">VALUES</span>(a,b,m,<span class="number">0</span>,SYSDATE());</span><br><span class="line"><span class="comment">-- 操作2：修改图书库存</span></span><br><span class="line"><span class="keyword">UPDATE</span> books <span class="keyword">SET</span> book_stock<span class="operator">=</span>stock<span class="operator">-</span>m <span class="keyword">WHERE</span> book_id<span class="operator">=</span>b;</span><br><span class="line"><span class="comment">-- 借书成功</span></span><br><span class="line"><span class="keyword">SET</span> state <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="comment">-- 库存不足</span></span><br><span class="line"><span class="keyword">SET</span> state <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">ELSE</span> </span><br><span class="line"><span class="comment">-- 图书不存在</span></span><br><span class="line"><span class="keyword">set</span> state <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">ELSE</span></span><br><span class="line"><span class="comment">-- 不存在</span></span><br><span class="line"><span class="keyword">SET</span> state <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><h6 id="9-8-3-创建存储过程实现还书业务"><a href="#9-8-3-创建存储过程实现还书业务" class="headerlink" title="9.8.3 创建存储过程实现还书业务"></a>9.8.3 创建存储过程实现还书业务</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">还在写</span><br></pre></td></tr></table></figure><h5 id="9-9-游标"><a href="#9-9-游标" class="headerlink" title="9.9 游标"></a>9.9 游标</h5><blockquote><p>如果我们要创建一个存储过程，需要返回查询语句查询到多条数据，该如何实现呢？</p></blockquote><h6 id="9-1-1-游标的概念"><a href="#9-1-1-游标的概念" class="headerlink" title="9.1.1 游标的概念"></a>9.1.1 游标的概念</h6><p>游标可以用来依次取出查询结果集中的每一条数据——逐条读取查询结果集中的记录</p><h6 id="9-1-2-游标的使用"><a href="#9-1-2-游标的使用" class="headerlink" title="9.1.2 游标的使用"></a>9.1.2 游标的使用</h6><p><strong>1. 声明游标</strong></p><ul><li>声明游标的语法：</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> cursor_name <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> select_statement;</span><br></pre></td></tr></table></figure><ul><li>实例</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span> mycursor <span class="keyword">FOR</span> <span class="keyword">SELECT</span> book_name,book_author,book_price <span class="keyword">FROM</span> books <span class="keyword">WHERE</span> book_id<span class="operator">=</span>id;</span><br></pre></td></tr></table></figure><p><strong>2.打开游标</strong></p><ul><li>语法</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">OPEN</span> mycursor;</span><br></pre></td></tr></table></figure><p><strong>3. 使用游标</strong></p><p> 使用游标：提取游标当前指向的记录（提取之后，游标自动下移）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 使用游标：提取游标当前指向的记录（提取之后，游标自动下移）</span><br><span class="line"><span class="keyword">FETCH</span> <span class="keyword">INTO</span> mycursor <span class="keyword">INTO</span> bname,bauthor,bprice;</span><br></pre></td></tr></table></figure><h6 id="9-1-3-游标使用案例"><a href="#9-1-3-游标使用案例" class="headerlink" title="9.1.3  游标使用案例"></a>9.1.3  游标使用案例</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> proc_test2(<span class="keyword">OUT</span> <span class="keyword">result</span> <span class="type">VARCHAR</span>(<span class="number">200</span>))</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> bname <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">DECLARE</span> bauthor <span class="type">VARCHAR</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">DECLARE</span> bprice <span class="type">DECIMAL</span>(<span class="number">10</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">DECLARE</span> num <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> str <span class="type">VARCHAR</span>(<span class="number">50</span>);</span><br><span class="line"># 此查询语句查询以后返回的是一个结果集（多条记录），使用游标</span><br><span class="line"><span class="keyword">DECLARE</span> mycursor <span class="keyword">CURSOR</span> <span class="keyword">FOR</span> <span class="keyword">SELECT</span> book_name,book_author,book_price <span class="keyword">FROM</span> books;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="number">1</span>) <span class="keyword">INTO</span> num <span class="keyword">FROM</span> books;</span><br><span class="line"># 打开游标</span><br><span class="line"><span class="keyword">OPEN</span> mycursor;</span><br><span class="line"># 使用游标要结合循环语句</span><br><span class="line"><span class="keyword">SET</span> i <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">WHILE i<span class="operator">&lt;</span>num DO</span><br><span class="line"># 使用游标：提取游标当前指向的记录（提取之后，游标自动下移）</span><br><span class="line"><span class="keyword">FETCH</span> mycursor <span class="keyword">INTO</span> bname,bauthor,bprice;</span><br><span class="line"><span class="keyword">SET</span> i <span class="operator">=</span> i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"># <span class="keyword">SET</span> str <span class="operator">=</span>CONCAT_WS(<span class="string">&#x27;~&#x27;</span>,bname,bauthor,bprice);</span><br><span class="line"><span class="keyword">SELECT</span> CONCAT_WS(<span class="string">&#x27;~&#x27;</span>,bname,bauthor,bprice) <span class="keyword">INTO</span> str;</span><br><span class="line"><span class="keyword">SET</span> <span class="keyword">result</span> <span class="operator">=</span> CONCAT_WS(<span class="string">&#x27;,&#x27;</span>,<span class="keyword">result</span>,str);</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line">   </span><br><span class="line"> # 关闭游标</span><br><span class="line"> <span class="keyword">CLOSE</span> mycursor;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@r</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">CALL</span> proc_test2(<span class="variable">@r</span>);</span><br><span class="line"><span class="keyword">SELECT</span> <span class="variable">@r</span> <span class="keyword">FROM</span> DUAL;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql笔记#day 4</title>
      <link href="/2023/01/15/sql%E7%AC%94%E8%AE%B0-day-4/"/>
      <url>/2023/01/15/sql%E7%AC%94%E8%AE%B0-day-4/</url>
      
        <content type="html"><![CDATA[<h6 id="6-7-7-日期函数-和-字符串函数"><a href="#6-7-7-日期函数-和-字符串函数" class="headerlink" title="6.7.7 日期函数 和 字符串函数"></a>6.7.7 日期函数 和 字符串函数</h6><p><strong>日期函数</strong></p><blockquote><p>当我们向日期类型的列表添加数据时，可以通过字符串类型赋值（字符串的格式为 XXXX-XX-XX XX:XX:XX）如果我们向要获取当前系统时间添加到日期类型的列，可以用<code>now()</code>或者<code>sysdate()</code></p></blockquote><p>示例：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">desc</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field         <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> stu_num       <span class="operator">|</span> <span class="type">char</span>(<span class="number">8</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_name      <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">20</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_gender    <span class="operator">|</span> <span class="type">char</span>(<span class="number">2</span>)     <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_age       <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_tel       <span class="operator">|</span> <span class="type">char</span>(<span class="number">11</span>)    <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_qq        <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">11</span>) <span class="operator">|</span> YES  <span class="operator">|</span> UNI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> stu_enterence <span class="operator">|</span> datetime    <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+-------------+------+-----+---------+-------+</span></span><br><span class="line"></span><br><span class="line"># 通过字符串类型给日期</span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel,stu_qq,stu_enterence)</span><br><span class="line">   <span class="keyword">values</span>(<span class="string">&#x27;20200108&#x27;</span>,<span class="string">&#x27;张肖三&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;13434343344&#x27;</span>,<span class="string">&#x27;1231111&#x27;</span>,<span class="string">&#x27;2022-11-19 23:33:45&#x27;</span>);</span><br><span class="line">    </span><br><span class="line"># 通过now()函数获取当前时间</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel,stu_qq,stu_enterence)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20200109&#x27;</span>,<span class="string">&#x27;张四三&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;13434356344&#x27;</span>,<span class="string">&#x27;123111661&#x27;</span>,now());</span><br><span class="line">    </span><br><span class="line"># 通过sysdate()函数获取当前时间</span><br><span class="line"> <span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel,stu_qq,stu_enterence)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20200110&#x27;</span>,<span class="string">&#x27;李磊&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;13993456344&#x27;</span>,<span class="string">&#x27;124441661&#x27;</span>,sysdate());</span><br><span class="line">    </span><br><span class="line"> # 通过now()和sysdate()获得当前系统时间</span><br><span class="line">  <span class="keyword">select</span> sysdate();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> sysdate()           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-11</span><span class="number">-19</span> <span class="number">23</span>:<span class="number">53</span>:<span class="number">18</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">select</span> now();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> now()               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-11</span><span class="number">-19</span> <span class="number">23</span>:<span class="number">54</span>:<span class="number">14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br></pre></td></tr></table></figure><p><strong>字符串函数</strong></p><blockquote><p>通过sql指令对字符串进行处理</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># concat(colunm1,colunm2...)</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> concat(stu_name,<span class="string">&#x27;-&#x27;</span>,stu_gender) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> concat(stu_name,<span class="string">&#x27;-&#x27;</span>,stu_gender) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"><span class="operator">|</span> polly<span class="operator">-</span>男                        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯<span class="operator">-</span>男                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅<span class="operator">-</span>女                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七<span class="operator">-</span>女                         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------+</span></span><br><span class="line"></span><br><span class="line"># <span class="built_in">upper</span>(colunm) 将指定列的值转换为大写写</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">upper</span>(stu_name) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">upper</span>(stu_name) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> 孙七            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> POLLY           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"></span><br><span class="line"># <span class="built_in">lower</span>(colunm) 将指定列的值转换为小写</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">lower</span>(stu_name) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">lower</span>(stu_name) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> 孙七            <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> polly           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"></span><br><span class="line"># <span class="built_in">substring</span>(<span class="keyword">column</span>,<span class="keyword">start</span>,len) 从指定列中截取需要的片段</span><br><span class="line"> <span class="keyword">select</span> stu_name,<span class="built_in">substring</span>(stu_tel,<span class="number">7</span>,<span class="number">4</span>) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+------------------------+</span></span><br><span class="line"><span class="operator">|</span> stu_name  <span class="operator">|</span> <span class="built_in">substring</span>(stu_tel,<span class="number">7</span>,<span class="number">4</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+------------------------+</span></span><br><span class="line"><span class="operator">|</span> 王五      <span class="operator">|</span> <span class="number">0336</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙七      <span class="operator">|</span> <span class="number">7374</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> polly     <span class="operator">|</span> <span class="number">5645</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 奥达斯    <span class="operator">|</span> <span class="number">3333</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅    <span class="operator">|</span> <span class="number">5132</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 李七      <span class="operator">|</span> <span class="number">8564</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+------------------------+</span></span><br></pre></td></tr></table></figure><h6 id="6-7-8-分组查询-group-by"><a href="#6-7-8-分组查询-group-by" class="headerlink" title="6.7.8 分组查询-group by"></a>6.7.8 分组查询-group by</h6><blockquote><p>分组——将数据表中的记录按照指定的列进行分组、</p></blockquote><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 分组字段<span class="operator">/</span>聚合函数 <span class="keyword">from</span> 表名 [<span class="keyword">where</span>条件] <span class="keyword">group</span> <span class="keyword">by</span> 分组列名 [<span class="keyword">having</span>条件]   (加上中括号的为可有可无的)</span><br></pre></td></tr></table></figure><ul><li><code>SELECT</code>后使用<code>*</code>显示对查询的结果进行分组之后，显示每组第一条记录（这种显示通常是无意义的）</li><li><code>select</code>后通常显示分组字段和聚合函数（对分组字段和聚合函数进行统计、求和、求平均值等）</li><li>语句执行顺序：1、先根据where语句条件从数据库中查询记录 2、对查询记录进行分组 3、执行having对分组后的数据进行筛选</li></ul><p><strong>示例</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"># 先对查询的学生信息按性别进行分组（分成了男、女两组），然后再分别统计每组学生的个数</span><br><span class="line"><span class="keyword">select</span> stu_gender,<span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_gender <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+</span></span><br><span class="line"><span class="operator">|</span> 男         <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 女         <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+----------------+</span></span><br><span class="line"></span><br><span class="line">#先对学生按照年龄进行分组（<span class="number">17</span>、<span class="number">20</span>、<span class="number">21</span>、<span class="number">22</span>四组），然后统计各组的学生数量，还可以对最终的结果进行排序</span><br><span class="line"><span class="keyword">select</span> stu_age,<span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_age <span class="keyword">order</span> <span class="keyword">by</span> stu_age;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">21</span> <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">22</span> <span class="operator">|</span>              <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"></span><br><span class="line">#先按照性别进行分组，然后统计每组平均年龄</span><br><span class="line"><span class="keyword">select</span> stu_gender,<span class="built_in">avg</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_gender;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> stu_gender <span class="operator">|</span> <span class="built_in">avg</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">19.7500</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">20.5000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+--------------+</span></span><br><span class="line"></span><br><span class="line">#查询所有学生，按年龄进行分组，分组之后分别统计每组的人数，再筛选当前组人数<span class="operator">&gt;</span><span class="number">1</span>的组，再按年龄升序显示出来</span><br><span class="line"><span class="keyword">select</span> stu_age,<span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus <span class="keyword">group</span> <span class="keyword">by</span> stu_age <span class="keyword">having</span> <span class="built_in">count</span>(stu_num)<span class="operator">&gt;</span><span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> stu_age;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span>              <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">21</span> <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"></span><br><span class="line"># 查询性别为‘男’学生，按年龄进行分组，分组之后分别统计每组的人数，再筛选当前组人数<span class="operator">&gt;</span><span class="number">1</span>的组，再按年龄升序显示出来 </span><br><span class="line"><span class="keyword">select</span> stu_age,<span class="built_in">count</span>(stu_num)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span> stus</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">group</span> <span class="keyword">by</span> stu_age</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">having</span> <span class="built_in">count</span>(stu_num)<span class="operator">&gt;</span><span class="number">1</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">order</span> <span class="keyword">by</span> stu_age;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">21</span> <span class="operator">|</span>              <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+----------------+</span></span><br></pre></td></tr></table></figure><h6 id="6-7-9-分页查询-limit"><a href="#6-7-9-分页查询-limit" class="headerlink" title="6.7.9 分页查询-limit"></a>6.7.9 分页查询-limit</h6><blockquote><p>当数据表中的记录数据比较多的时候，一次性全部查询出来显示给用户，用户的可读性&#x2F;体验就不太好，因此我们可以将这些数据进行分页进行显示。</p></blockquote><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select...</span><br><span class="line">from...</span><br><span class="line">where...</span><br><span class="line">limit param1,param2</span><br></pre></td></tr></table></figure><ul><li>param1 int，表示获取查询语句的结果中的第一条数据的索引（索引从0开始）</li><li>param2 int，表示获取的查询记录的条数（如果剩下的数据条数小于param2，则返回剩下的所有记录）</li></ul><p><strong>案例</strong></p><p>对数据表中的学生信息进行分页显示，总共10条数据，我们每页显示3条</p><blockquote><p>总记录数 count 10</p><p>每页显示 pagesize 3</p><p>总页数 pageCount &#x3D; count % pagesize &#x3D;&#x3D; 0 ? count&#x2F;pageSize : count&#x2F;pagesize+1</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#查询第一页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">0</span>,<span class="number">3</span>;(<span class="number">1</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#查询第二页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">3</span>,<span class="number">3</span>;(<span class="number">2</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#查询第三页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">6</span>,<span class="number">3</span>;(<span class="number">3</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#查询第四页</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus [<span class="keyword">where</span> ...] limit <span class="number">9</span>,<span class="number">3</span>;(<span class="number">4</span><span class="number">-1</span>)<span class="operator">*</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">#如果在一张数据表中，pageNum表示查询的页码，pageSize表示每页显示的条数；同用分页语句如下</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> [<span class="keyword">where</span> ...] limit(pageNum<span class="number">-1</span>)<span class="operator">*</span>pageSize,pageSxie;</span><br></pre></td></tr></table></figure><h4 id="七、数据表的关联关系"><a href="#七、数据表的关联关系" class="headerlink" title="七、数据表的关联关系"></a>七、数据表的关联关系</h4><h5 id="7-1关联关系介绍"><a href="#7-1关联关系介绍" class="headerlink" title="7.1关联关系介绍"></a>7.1关联关系介绍</h5><blockquote><p>MySQL是一个关系型的数据库，不仅可以存储数据，还可以维护数据与数据间的关系——通过在数据表中添加字段建立外键约束</p></blockquote><p>数据与数据之间的关系分为四种：</p><ul><li>一对一关联</li><li>一对多关联</li><li>多对一关联</li><li>多对多关联</li></ul><h5 id="7-2-一对一关联"><a href="#7-2-一对一关联" class="headerlink" title="7.2 一对一关联"></a>7.2 一对一关联</h5><blockquote><p>​人——身份证           一个人只有一个身份证，一个身份证只对应一个人</p><p>​学生——学籍一个学生只有一个学籍，一个学籍也对应唯一的一个学生</p><p>​用户——用户详情一个用户只有一个详情，一个详情也只对应一个用户</p></blockquote><p><strong>方案1：</strong>主键关联——两张数据表中主键相同的数据为相互对应的数据</p><p><a href="https://imgse.com/i/pSlnKuF"><img src="https://s1.ax1x.com/2023/01/15/pSlnKuF.png" alt="pSlnKuF.png"></a></p><p><strong>方案2：</strong>唯一外键在任意一张表中添加一个字段加外键约束与另一张表主键关联，并且将外键列添加唯一约束</p><p><a href="https://imgse.com/i/pSlnmcT"><img src="https://s1.ax1x.com/2023/01/15/pSlnmcT.png" alt="pSlnmcT.png"></a></p><h5 id="7-3一对多与多对一"><a href="#7-3一对多与多对一" class="headerlink" title="7.3一对多与多对一"></a>7.3一对多与多对一</h5><blockquote><p>班级——学生(一对多)  一个班级包含多个学生</p><p>学生——班级(多对一)   多个学生可以属于同一个班级</p><p>图书——分类         商品——商品类别</p></blockquote><p><strong>方案：</strong>在多的一端添加外键，与一的一端形成关联</p><p><a href="https://imgse.com/i/pSlne3V"><img src="https://s1.ax1x.com/2023/01/15/pSlne3V.png" alt="pSlne3V.png"></a></p><h5 id="7-4-多对多关联"><a href="#7-4-多对多关联" class="headerlink" title="7.4 多对多关联"></a>7.4 多对多关联</h5><blockquote><p>学生——课程   一个学生可以选择多门课程，一门课程也可以由多个学生选择</p><p>会员——社团   一个会员可以参加多个社团，一个社团也可以招纳多个会员</p></blockquote><p><strong>方法：</strong>额外创建一张关系表来维护多对多关联——在关系表中定义两个外键，分别与两个数据表的主键进行关联</p><p><a href="https://imgse.com/i/pSlnZ90"><img src="https://s1.ax1x.com/2023/01/15/pSlnZ90.png" alt="pSlnZ90.png"></a></p><h5 id="7-5-外键约束"><a href="#7-5-外键约束" class="headerlink" title="7.5 外键约束"></a>7.5 外键约束</h5><blockquote><p>外键约束——将一个列添加外键约束与另一张表的主键（唯一列）进行关联之后，这个外键约束的列添加的数据必须要在关联的主键字段中存在</p></blockquote><p>案例：学生表 与 班级表</p><ol><li><p>先创建班级表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> classes(</span><br><span class="line">      class_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">      class_name <span class="type">varchar</span>(<span class="number">40</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">      class_remark <span class="type">varchar</span>(<span class="number">200</span>)</span><br><span class="line">      );</span><br></pre></td></tr></table></figure></li><li><p>创建学生表    （在学生表中添加外键与班级表的主键进行关联）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 【方式一】在创建表的时候，定义cid字段，并添加外键约束</span><br><span class="line"># 由于cid列要与classes表的class_id进行关联，因此cid字段类型和长度要与class_id 一致</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">    stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">    stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid <span class="type">int</span>,</span><br><span class="line">    <span class="keyword">constraint</span> FK_STUDENTS_CLASSES <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> classes(class_id)</span><br><span class="line">);</span><br><span class="line"># <span class="keyword">delete</span> <span class="keyword">from</span> students;</span><br><span class="line">清楚students中的元素</span><br><span class="line"># 【方式二】</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> students(</span><br><span class="line">    stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">    stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    cid <span class="type">int</span></span><br><span class="line">    );</span><br><span class="line"># 在创建表之后，为cid创建外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">add</span> <span class="keyword">constraint</span> FK_STUDENTs_CLASSES <span class="keyword">foreign</span> key(cid) <span class="keyword">references</span> classes(class_id);</span><br><span class="line"></span><br><span class="line">#删除外键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">drop</span> <span class="keyword">foreign</span> key FK_STUDENTs_CLASSES;  </span><br></pre></td></tr></table></figure></li><li><p>向班级列表中添加数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2014&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2015&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2016&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> classes(class_name,class_remark) <span class="keyword">values</span>(<span class="string">&#x27;2017&#x27;</span>,<span class="string">&#x27;...&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> classes;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br></pre></td></tr></table></figure></li><li><p>向学生表中添加学生信息</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220102&#x27;</span>,<span class="string">&#x27;李四&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"># 添加学生时，设置给cid外键列的值必须在其关联主键的主表classes的class_id列存在</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> students(stu_num,stu_name,stu_gender,stu_age,cid) <span class="keyword">values</span>(<span class="string">&#x27;20220103&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>,<span class="number">5</span>);</span><br><span class="line">ERROR <span class="number">1452</span> (<span class="number">23000</span>): Cannot <span class="keyword">add</span> <span class="keyword">or</span> <span class="keyword">update</span> a child <span class="type">row</span>: a <span class="keyword">foreign</span> key <span class="keyword">constraint</span> fails (`db_test2`.`students`, <span class="keyword">CONSTRAINT</span> `FK_STUDENTS_CLASSES` <span class="keyword">FOREIGN</span> KEY (`cid`) <span class="keyword">REFERENCES</span> `classes` (`class_id`))</span><br></pre></td></tr></table></figure></li></ol><h5 id="7-6-外键约束·级联"><a href="#7-6-外键约束·级联" class="headerlink" title="7.6 外键约束·级联"></a>7.6 外键约束·级联</h5><blockquote><p>当学生表中存在学生信息关联班级表的某条记录时，就不能对班级表的这条记录进行修改ID和删除操作：</p></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">select * from classes;</span><br><span class="line">+----------+------------+--------------+</span><br><span class="line">| class_id | class_name | class_remark |</span><br><span class="line">+----------+------------+--------------+</span><br><span class="line">|        1 | 2014       | ...          |   #班级表中class_id=1的班级信息，被学生表中的记录关联了，</span><br><span class="line">|        2 | 2015       | ...          |   # 我们就不能修改2014的class_id，并且不能删除</span><br><span class="line">|        3 | 2016       | ...          |</span><br><span class="line">|        4 | 2017       | ...          |</span><br><span class="line">+----------+------------+--------------+</span><br><span class="line"></span><br><span class="line"> select * from students;</span><br><span class="line">+----------+----------+------------+---------+------+</span><br><span class="line">| stu_num  | stu_name | stu_gender | stu_age | cid  |</span><br><span class="line">+----------+----------+------------+---------+------+</span><br><span class="line">| 20220101 | 张三     | 男         |      18 |    1 |</span><br><span class="line">| 20220102 | 李四     | 男         |      18 |    1 |</span><br><span class="line">| 20220103 | 王五     | 男         |      18 |    1 |</span><br><span class="line">| 20220104 | 赵六     | 男         |      18 |    2 |</span><br><span class="line">+----------+----------+------------+---------+------+</span><br><span class="line"></span><br><span class="line"># 修改报错</span><br><span class="line">update classes set class_id=5 where class_name=&#x27;2014&#x27;;</span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`db_test2`.`students`, CONSTRAINT `FK_STUDENTs_CLASSES` FOREIGN KEY (`cid`) REFERENCES `classes` (`class_id`))</span><br><span class="line"></span><br><span class="line"># 删除报错</span><br><span class="line">delete from classes where class_id=1;</span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`db_test2`.`students`, CONSTRAINT `FK_STUDENTs_CLASSES` FOREIGN KEY (`cid`) REFERENCES `classes` (`class_id`))</span><br></pre></td></tr></table></figure><blockquote><p>如果一定要修改2014的班级ID，实现方法如下：</p><ul><li>将引用2014班级id的学生记录中的cid为NULL</li><li>再修改班级信息表中2014记录的class_id</li><li>将学生表中cid设置为NULL的记录的cid重新修改为2014这个班级新的id</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">update</span> students <span class="keyword">set</span> cid<span class="operator">=</span><span class="keyword">NULL</span> <span class="keyword">where</span> cid<span class="operator">=</span><span class="number">1</span>;  #结果如下</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、<span class="keyword">update</span> classes <span class="keyword">set</span> class_id<span class="operator">=</span><span class="number">5</span> <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2014&#x27;</span>; #结果如下</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、<span class="keyword">update</span> students <span class="keyword">set</span> cid<span class="operator">=</span><span class="number">5</span> <span class="keyword">where</span> cid <span class="keyword">IS</span> <span class="keyword">NULL</span>;  #结果如下</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br></pre></td></tr></table></figure><p><strong><code>我们可以使用级联操作来实现：</code></strong></p><ol><li><p>在添加外键时，设置<strong>级联修改</strong>和<strong>级联删除</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 删除原有的外键</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">drop</span> <span class="keyword">foreign</span> key FK_STUDENTS_CLASSES;</span><br><span class="line"></span><br><span class="line"># 重新添加外键，并设置级联修改和级联删除</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> students <span class="keyword">add</span> <span class="keyword">constraint</span> FK_STUDENTS_CLASSES <span class="keyword">foreign</span> key <span class="keyword">references</span> classes(class_id) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCADE <span class="keyword">ON</span> DELET CASCADE;</span><br></pre></td></tr></table></figure></li><li><p>测试级联修改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"># 班级信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"></span><br><span class="line"># 学生信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line">#直接修改<span class="number">2014</span>的class_id,关联<span class="number">2014</span>这个班级的学生记录的cid也会同步修改。</span><br><span class="line"><span class="keyword">update</span> classes <span class="keyword">set</span> class_id<span class="operator">=</span><span class="number">1</span> <span class="keyword">where</span> class_name<span class="operator">=</span><span class="string">&#x27;2014&#x27;</span>;</span><br><span class="line"># class</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span> <span class="number">2014</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line"># student</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220101</span> <span class="operator">|</span> 张三     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220102</span> <span class="operator">|</span> 李四     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220103</span> <span class="operator">|</span> 王五     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br></pre></td></tr></table></figure></li><li><p>设置级联删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#删除class_id<span class="operator">=</span> <span class="number">1</span>的班级信息，学生表引用此班级信息的记录也会被同步删除。</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> classes <span class="keyword">where</span> class_id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"># 班级信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span> class_id <span class="operator">|</span> class_name <span class="operator">|</span> class_remark <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">2015</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2016</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">2017</span>       <span class="operator">|</span> ...          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------+--------------+</span></span><br><span class="line"></span><br><span class="line"># 学生信息</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> cid  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20220104</span> <span class="operator">|</span> 赵六     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">18</span> <span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+----------+------------+---------+------+</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>xshell 连接 kali（必备技能）</title>
      <link href="/2023/01/05/xshell-%E8%BF%9E%E6%8E%A5-kali%EF%BC%88%E5%BF%85%E5%A4%87%E6%8A%80%E8%83%BD%EF%BC%89/"/>
      <url>/2023/01/05/xshell-%E8%BF%9E%E6%8E%A5-kali%EF%BC%88%E5%BF%85%E5%A4%87%E6%8A%80%E8%83%BD%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h4 id="检查ssh状态"><a href="#检查ssh状态" class="headerlink" title="检查ssh状态"></a>检查ssh状态</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查kali的ssh协议是否打开</span></span><br><span class="line">$ service ssh status</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pSAqoVg"><img src="https://s1.ax1x.com/2023/01/06/pSAqoVg.png" alt="pSAqoVg.png"></a></p><p>如图所示，显示<code>inactive</code>即ssh没有打开，则我们要先打开ssh协议。</p><p>输入命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ service ssh start</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 再次检查kali的ssh协议是否打开</span></span><br><span class="line">$ service ssh status</span><br></pre></td></tr></table></figure><p><a href="https://imgse.com/i/pSAqL2q"><img src="https://s1.ax1x.com/2023/01/06/pSAqL2q.png" alt="pSAqL2q.png"></a></p><p>如上图所示，ssh协议打开了。</p><h4 id="修改KALI文件配置"><a href="#修改KALI文件配置" class="headerlink" title="修改KALI文件配置"></a>修改KALI文件配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>找到PermitRootLogin这一行，然后去掉其前面的注释符号，再将后面的prohibit-passwd改成yes。</p><p><a href="https://imgse.com/i/pSAqhKf"><img src="https://s1.ax1x.com/2023/01/06/pSAqhKf.png" alt="pSAqhKf.png"></a></p><p><a href="https://imgse.com/i/pSAq4r8"><img src="https://s1.ax1x.com/2023/01/06/pSAq4r8.png" alt="pSAq4r8.png"></a></p><p>esc+:+wq保存退出。</p><h4 id="连接kali"><a href="#连接kali" class="headerlink" title="连接kali"></a>连接kali</h4><p>终端输入<code>ifconfig</code>查看kali的ip</p><p><a href="https://imgse.com/i/pSAq5qS"><img src="https://s1.ax1x.com/2023/01/06/pSAq5qS.png" alt="pSAq5qS.png" style="zoom:67%;"></a></p><p>将IP输入至xshell并输入密码。</p><p><a href="https://imgse.com/i/pSAqTaQ"><img src="https://s1.ax1x.com/2023/01/06/pSAqTaQ.png" alt="pSAqTaQ.png" style="zoom:67%;"></a></p><p><a href="https://imgse.com/i/pSAq75j"><img src="https://s1.ax1x.com/2023/01/06/pSAq75j.png" alt="pSAq75j.png" style="zoom:67%;"></a></p><p>设置好后点击连接，此时弹出SSH安全警告，这里我们选择“接受并保存”。</p><p><a href="https://imgse.com/i/pSAqbPs"><img src="https://s1.ax1x.com/2023/01/06/pSAqbPs.png" alt="pSAqbPs.png" style="zoom:67%;"></a></p><p>连接成功</p><p><a href="https://imgse.com/i/pSAqqGn"><img src="https://s1.ax1x.com/2023/01/06/pSAqqGn.png" alt="pSAqqGn.png" style="zoom:67%;"></a></p>]]></content>
      
      
      
        <tags>
            
            <tag> xshell </tag>
            
            <tag> kali </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java环境配置</title>
      <link href="/2023/01/04/Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
      <url>/2023/01/04/Java%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h4 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h4><p>打开链接<a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p><p>选择JDK11，x64 installer下载</p><p>没有注册Oracle的账号要注册，或者直接百度Oracle共享账号（网上一大堆）</p><p><a href="https://imgse.com/i/pSA1daT"><img src="https://s1.ax1x.com/2023/01/05/pSA1daT.png" alt="pSA1daT.png"></a></p><p>下载好后单击打开执行文件</p><p><a href="https://imgse.com/i/pSA1aZV"><img src="https://s1.ax1x.com/2023/01/05/pSA1aZV.md.png" alt="pSA1aZV.md.png"></a></p><p>下一步</p><p><a href="https://imgse.com/i/pSA1trq"><img src="https://s1.ax1x.com/2023/01/05/pSA1trq.png" alt="pSA1trq.png"></a></p><p>路径我选择默认，一直下一步直到安装完成。</p><h4 id="环境变量配置"><a href="#环境变量配置" class="headerlink" title="环境变量配置"></a>环境变量配置</h4><p><a href="https://imgse.com/i/pSA1BiF"><img src="https://s1.ax1x.com/2023/01/05/pSA1BiF.png" alt="pSA1BiF.png"></a></p><p>点击系统变量的新建</p><p>[[<a href="https://imgse.com/i/pSA1YMn"><img src="https://s1.ax1x.com/2023/01/05/pSA1YMn.png" alt="pSA1YMn.png"></a></p><p>变量名命名为<code>JAVA_HOME</code></p><p>如果你和我下载的是同一个版本，变量值直接复制这个即可<code>C:\Program Files\Java\jdk-11.0.17</code></p><p>如果不是，请打开你的在安装时的路径并复制进去保存。</p><p><a href="https://imgse.com/i/pSA1DG4"><img src="https://s1.ax1x.com/2023/01/05/pSA1DG4.png" alt="pSA1DG4.png"></a></p><p>接下来双击系统变量中的Path</p><p><a href="https://imgse.com/i/pSA1rRJ"><img src="https://s1.ax1x.com/2023/01/05/pSA1rRJ.png" alt="pSA1rRJ.png"></a></p><p>新建两个变量</p><p><code>%JAVA_HOME%\jre\bin</code></p><p><code>%JAVA_HOME%\bin</code></p><p><a href="https://imgse.com/i/pSA1sz9"><img src="https://s1.ax1x.com/2023/01/05/pSA1sz9.png" alt="pSA1sz9.png"></a></p><p>确认保存即可。</p><h4 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h4><p>win+R输入cmd回车</p><p><code>java -version</code></p><p><a href="https://imgse.com/i/pSA1cs1"><img src="https://s1.ax1x.com/2023/01/05/pSA1cs1.png" alt="pSA1cs1.png"></a></p><p><code>javac -version</code></p><p><a href="https://imgse.com/i/pSA1gqx"><img src="https://s1.ax1x.com/2023/01/05/pSA1gqx.png" alt="pSA1gqx.png"></a></p><p>出现这两个版本信息代表成功配置好了JAVA环境。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 安装教程 </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DVWA配置中可能会碰到的问题</title>
      <link href="/2023/01/02/DVWA%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%A2%B0%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2023/01/02/DVWA%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%8F%AF%E8%83%BD%E4%BC%9A%E7%A2%B0%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>在浏览器中访问<code>https://codeload.github.com/digininja/DVWA/zip/refs/heads/master</code>下载DVWA的安装包</p><p>在setup界面可能会碰到的问题</p><p><a href="https://imgse.com/i/pSPaTiT"><img src="https://s1.ax1x.com/2023/01/02/pSPaTiT.md.png" alt="pSPaTiT.md.png"></a></p><p>点击<code>Create/Reset Database</code>即可</p><p><a href="https://imgse.com/i/pSPa5d0"><img src="https://s1.ax1x.com/2023/01/02/pSPa5d0.png" alt="pSPa5d0.png"></a></p><p>等待1~2秒会自动跳转登入界面</p><p><a href="https://imgse.com/i/pSPaIoV"><img src="https://s1.ax1x.com/2023/01/02/pSPaIoV.png" alt="pSPaIoV.png" style="zoom:80%;"></a></p><p>管理员账号</p><p>账号<code>admin</code>，密码<code>password</code></p><p>成功登入的界面</p><p><a href="https://imgse.com/i/pSPa7JU"><img src="https://s1.ax1x.com/2023/01/02/pSPa7JU.md.png" alt="pSPa7JU.md.png"></a></p>]]></content>
      
      
      
        <tags>
            
            <tag> DVWA </tag>
            
            <tag> 安装教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ARP欺骗小实验</title>
      <link href="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/"/>
      <url>/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<p>阿里云盘：cainzwb.exe软件<br><a href="https://www.aliyundrive.com/s/oSLEiNsnb7o">https://www.aliyundrive.com/s/oSLEiNsnb7o</a><br>提取码: 10yg</p><h3 id="（一）ARP欺骗原理："><a href="#（一）ARP欺骗原理：" class="headerlink" title="（一）ARP欺骗原理："></a>（一）ARP欺骗原理：</h3><p>欺骗源把自己伪装成局域网内的另一台主机2，将主机2的IP地址对应的MAC地址替换为欺骗源的IP地址对应的MAC地址，使得局域网内的主机1发往主机2的报文都流欺骗源。</p><h3 id="（二）-实验环境："><a href="#（二）-实验环境：" class="headerlink" title="（二）  实验环境："></a>（二）  实验环境：</h3><p>1） 硬件：PC机</p><p>2） 软件：VMare workstation虚拟机，window操作系统，Cain攻击软件。</p><h3 id="（三）环境搭建："><a href="#（三）环境搭建：" class="headerlink" title="（三）环境搭建："></a>（三）环境搭建：</h3><p>1）使用VMare workstation创建3个虚拟机：攻击机（windows-2003），受害人1号（windows7），受害人2号（window XP）</p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image002.jpg" alt="img"></p><p>2）配置3台虚拟机的IP地址，使其处于同一网段下：</p><p>​    攻击机：192.168.3.44</p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image004.gif" alt="img"></p><p>受害人1：192.168.3.46</p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image006.gif" alt="img"></p><p>​    受害人2： 192.168.3.45</p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image008.gif" alt="img"></p><p>测试：用中间人主机ping两台受害者的主机，受害人1ping受害人2：</p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image010.jpg" alt="img"></p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image012.jpg" alt="img"></p><p>可以发现，三台主机之间可以互相通信。</p><h3 id="（四）实验步骤"><a href="#（四）实验步骤" class="headerlink" title="（四）实验步骤"></a>（四）实验步骤</h3><p>1）在攻击机上安装Cain软件：</p><p><a href="https://imgse.com/i/zaUdSS"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUdSS.jpg" alt="zaUdSS.jpg"></a><a href="https://imgse.com/i/zaUNJf"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUNJf.jpg" alt="zaUNJf.jpg"></a></p><p>2）点击左上角网卡的标志，再点击Sniffer选项，扫描所选网段之下所有主机，发现网关的IP地址为192.168.3.1，MAC地址为：98-BE-DC-53-72-56，另外两台受害者主机MAC分别为00-0C-29-52-F6-C3，00-0C-29-52-F5-B1</p><p><a href="https://imgse.com/i/zaUUW8"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUUW8.jpg" alt="zaUUW8.jpg"></a></p><p>3）在开始arp攻击开始之前，先从受害人1的视角观察其他主机的MAC地址，MAC地址是各自的真实地址。</p><p><a href="https://imgse.com/i/zaUBLj"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUBLj.jpg" alt="zaUBLj.jpg"></a></p><p>4）攻击机开始伪造MAC地址：</p><p>​    选中两台受害者主机，在攻击机上点击stat&#x2F;stop APR按键</p><p><a href="https://imgse.com/i/zaUres"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUres.jpg" alt="zaUres.jpg"></a></p><p>​    再次在受害人1的主机上使用ARP -a命令观察另外两台主机的MAC地址：</p><p><a href="https://imgse.com/i/zaUswn"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUswn.jpg" alt="zaUswn.jpg"></a></p><p>​    此时发现受害人2（192.168.44）的MAC地址变成与攻击机的MAC地址一样，说明此时攻击机已经可以开始监听两台主机之间的数据包了！</p><h3 id="（五）实验内容"><a href="#（五）实验内容" class="headerlink" title="（五）实验内容"></a>（五）实验内容</h3><h5 id="小实验1：获取TELNET账号密码"><a href="#小实验1：获取TELNET账号密码" class="headerlink" title="小实验1：获取TELNET账号密码"></a>小实验1：获取TELNET账号密码</h5><p><a href="https://imgse.com/i/zaUyoq"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUyoq.jpg" alt="zaUyoq.jpg"></a></p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image026.jpg" alt="img"></p><p>在受害人1（192.168.3.46）的主机上使用telnet 192.168.3.45 命令登入</p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image028.gif" alt="img"></p><p>再到攻击机（192.168.3.44）上查看</p><p><a href="https://imgse.com/i/zaUcF0"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUcF0.jpg" alt="zaUcF0.jpg" border="0"></a></p><p>发现一条新的记录，右击打开查看，成功获取到账号为Adminstrator，密码为123.com</p><p><a href="https://imgse.com/i/zaUgYV"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUgYV.jpg" alt="zaUgYV.jpg"></a></p><h5 id="小实验2：FTP抓包"><a href="#小实验2：FTP抓包" class="headerlink" title="小实验2：FTP抓包"></a>小实验2：FTP抓包</h5><p>在受害人2的主机上，开启IIS服务，充当IIS服务器</p><p>并使用net user hzp 123.com &#x2F;add命令创建账号为hzp，密码为123.com的账号提供给受害人1使用。</p><p><a href="https://imgse.com/i/zaU2WT"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaU2WT.jpg" alt="zaU2WT.jpg"></a></p><p><a href="https://imgse.com/i/zaUWSU"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUWSU.jpg" alt="zaUWSU.jpg"></a></p><p>用受害人2的主机使用新建的账号密码访问受害人1的主机</p><p><a href="https://imgse.com/i/zaUflF"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUflF.jpg" alt="zaUflF.jpg"></a></p><p>在攻击机上查看抓取的数据报，发现账号密码已经以明文方式显现出来。</p><p><a href="https://imgse.com/i/zaUhy4"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaUhy4.jpg" alt="zaUhy4.jpg"></a></p><h5 id="小实验3：通过网页登入账号密码"><a href="#小实验3：通过网页登入账号密码" class="headerlink" title="小实验3：通过网页登入账号密码"></a>小实验3：通过网页登入账号密码</h5><p>​    受害人3访问需要输入账号密码的网页</p><p><a href="https://imgse.com/i/zaU4OJ"><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/zaU4OJ.jpg" alt="zaU4OJ.jpg"></a></p><p>​    登入成功之后，再攻击机上Cain查看，发现已经抓到受害人的账号密码，但密码以密文形式出现，需要其他方法破解。</p><p><img src="/2022/11/28/ARP%E6%AC%BA%E9%AA%97%E5%B0%8F%E5%AE%9E%E9%AA%8C/clip_image044.jpg" alt="img"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为什么numpy中round(2.5)=2</title>
      <link href="/2022/11/27/%E4%B8%BA%E4%BB%80%E4%B9%88numpy%E4%B8%ADround-2-5-2/"/>
      <url>/2022/11/27/%E4%B8%BA%E4%BB%80%E4%B9%88numpy%E4%B8%ADround-2-5-2/</url>
      
        <content type="html"><![CDATA[<p>先看下面的代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">array = [<span class="number">.5</span>, <span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">3.5</span>, <span class="number">4.5</span>, <span class="number">10.1</span>]</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;Input array : \n&quot;</span>, array)</span><br><span class="line">  </span><br><span class="line">r_array= np.around(array)</span><br><span class="line"><span class="built_in">print</span> (<span class="string">&quot;\nRounded values : \n&quot;</span>,r_array)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 输出</span></span><br><span class="line">Input array :</span><br><span class="line"> [<span class="number">0.5</span>, <span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">3.5</span>, <span class="number">4.5</span>, <span class="number">10.1</span>]</span><br><span class="line"></span><br><span class="line">Rounded values :</span><br><span class="line"> [ <span class="number">0.</span>  <span class="number">2.</span>  <span class="number">2.</span>  <span class="number">4.</span>  <span class="number">4.</span> <span class="number">10.</span>]</span><br></pre></td></tr></table></figure><p>众所周知，Python2.x和Python3.x版本在很多地方存在差异，不过有一处可能并没有受到太多人的关注：<strong>round()函数的行为</strong>。</p><p>在Python 2.x中，round()函数的机制是四舍五入，也符合大多数人的认知。</p><p>Python 3.x中<code>round(2.5) == 2</code>,而<code>round(3.5) == 4</code>, 并没有遵从四舍五入的规则。事实上Python 3.x的文档是这样描述的：</p><blockquote><p>For the built-in types supporting round(), values are rounded to the closest multiple of 10 to the power minus ndigits; if two multiples are equally close, rounding is done toward the even choice (so, for example, both round(0.5) and round(-0.5) are 0, and round(1.5) is 2). Any integer value is valid for ndigits (positive, zero, or negative). The return value is an integer if ndigits is omitted or None. Otherwise the return value has the same type as number.</p></blockquote><p>可以看到，Python 3.x在处理类似round(2.5)的情况时，2.5与2和3的差值相等，都是0.5,此时会返回偶数，也就是2。对于round(3.5), 3.5与3和4的差值相等，返回偶数4。</p><p>虽然这种“四舍六入五成双”的规则比较奇怪，但Python 3.x的设计者的并不是脑洞大开才选择这样的实现方式，事实上这种舍入规则，也被称作高斯舍入(Gaussian rounding)和银行家舍入(bankers’ rounding),是IEEE 754中的五种标准舍入规则之一。</p><p>银行舍入算法比起传统的四舍五入的优势在于<strong>更加均衡</strong>。举个例子，对于<code>0.1</code>到<code>0.9</code><br>九个数字，四舍五入保留整数的话<code>0.1, 0.2, 0.3, 0.4</code><br>四个数字会舍为<code>0</code>，</p><p>而<code>0.5, 0.6, 0.7, 0.8, 0.9</code>五个数字会入为<code>1</code>，这其实是不平均的。</p><p>让我们考虑更多数字进来。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python习题</title>
      <link href="/2022/11/20/python%E5%AE%9E%E7%8E%B0%E9%98%B6%E4%B9%98/"/>
      <url>/2022/11/20/python%E5%AE%9E%E7%8E%B0%E9%98%B6%E4%B9%98/</url>
      
        <content type="html"><![CDATA[<h4 id="阶乘"><a href="#阶乘" class="headerlink" title="阶乘"></a>阶乘</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 非递归实现阶乘</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fact</span>(<span class="params">n</span>):</span><br><span class="line">    m=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> n== <span class="number">0</span> <span class="keyword">or</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n+<span class="number">1</span>):</span><br><span class="line">        m=m*i</span><br><span class="line">    <span class="keyword">return</span> m</span><br><span class="line">n= <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;输入一个数字：&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(fact(n))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 递归实现阶乘</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fact</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">0</span> <span class="keyword">or</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:    </span><br><span class="line">        <span class="keyword">return</span> n*fact(n-<span class="number">1</span>)</span><br><span class="line">n=<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;输入一个数字：&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(fact(n))</span><br></pre></td></tr></table></figure><h4 id="百元百鸡"><a href="#百元百鸡" class="headerlink" title="百元百鸡"></a>百元百鸡</h4><blockquote><p>百钱买百鸡的问题算是一套非常经典的不定方程的问题，</p><p>题目很简单： 公鸡5文钱一只，母鸡3文钱一只，小鸡3只一文钱， 用100文钱买一百只鸡,有多少种方法</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方案一：穷举法</span></span><br><span class="line">g,m,x=<span class="number">5</span>,<span class="number">3</span>,<span class="number">1</span> <span class="comment">#公鸡，母鸡，小鸡的价格</span></span><br><span class="line">count=<span class="number">0</span><span class="comment">#记录方法的种数</span></span><br><span class="line">format_title=<span class="string">&#x27;&#123;:&lt;10&#125;&#123;:&lt;10&#125;&#123;:&lt;10&#125;&#x27;</span><span class="comment">#格式化输出</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;公鸡    &#x27;</span>,<span class="string">&#x27;母鸡     &#x27;</span>,<span class="string">&#x27;小鸡  &#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">20</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">33</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">33</span>):</span><br><span class="line">            <span class="keyword">if</span> i*<span class="number">5</span>+j*<span class="number">3</span>+k == <span class="number">100</span> <span class="keyword">and</span> i+j+<span class="number">3</span>*k==<span class="number">100</span>:</span><br><span class="line">                <span class="built_in">print</span>(format_title.<span class="built_in">format</span>(i,j,k))</span><br><span class="line">                count+=<span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;查找结束，一共&#123;&#125;种方法&#x27;</span>.<span class="built_in">format</span>(count))</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">公鸡     母鸡      小鸡</span><br><span class="line"><span class="number">0</span>        <span class="number">25</span>        <span class="number">25</span></span><br><span class="line"><span class="number">4</span>        <span class="number">18</span>        <span class="number">26</span></span><br><span class="line"><span class="number">8</span>        <span class="number">11</span>        <span class="number">27</span></span><br><span class="line"><span class="number">12</span>       <span class="number">4</span>         <span class="number">28</span></span><br><span class="line">查找结束，一共<span class="number">4</span>种方法</span><br></pre></td></tr></table></figure><p>至于循环为什么是20，33，33？个人认为如果全买公鸡的话，口算可知100&#x2F;5&#x3D;20，所以只要循环20次而不是题目要求的100只，买公鸡和母鸡也是同理100&#x2F;3&#x3D;33只，这样可以减少时间复杂度，提高代码的效率。</p>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql笔记#day 3</title>
      <link href="/2022/11/18/sql%E7%AC%94%E8%AE%B0day3/"/>
      <url>/2022/11/18/sql%E7%AC%94%E8%AE%B0day3/</url>
      
        <content type="html"><![CDATA[<h6 id="6-5-5主键的自动增长"><a href="#6-5-5主键的自动增长" class="headerlink" title="6.5.5主键的自动增长"></a>6.5.5主键的自动增长</h6><blockquote><p>在我们创建一张数据表时，如果数据表中有列可以作为主键（例如:学生表的学号、图书表的isbn)我们可以直接设置这个列为主键;</p><p>当有些数据表中没有合适的列作为主键时，我们可以额外定义一个与记录本身无关的列（ID)作为主键，此列数据无具体的含义主要用于标识一条记录，在 mysql中我们可以将此列定义为int，同时设置为<code>自动增长</code>，当我们向数据表中新增—条记录时，无需提供ID列的值，它会自动生成。</p></blockquote><ul><li>定义int类型字段自动生长：<code>auto_increment</code></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> types(</span><br><span class="line">type_id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">type_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">type_remark <span class="type">varchar</span>(<span class="number">100</span>));</span><br></pre></td></tr></table></figure><p>在mysql中，只能将int类型转换为自动生长</p><p>注意：自动生长是从1开始，每添加一条记录自动加一，当我们把某条记录删除之后再添加数据，自动生长的数据也不会重复生成(自动生长只保证唯一性，不保证连续性)</p><h6 id="6-5-6联合主键"><a href="#6-5-6联合主键" class="headerlink" title="6.5.6联合主键"></a>6.5.6联合主键</h6><blockquote><p>联合主键——将数据表中的多列组合再一起设置为表的主键</p></blockquote><p><strong>定义联合主键</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> grades(</span><br><span class="line">stu_num <span class="type">char</span>(<span class="number">8</span>),</span><br><span class="line">    course_id <span class="type">int</span>,</span><br><span class="line">    score <span class="type">int</span>,</span><br><span class="line">    <span class="keyword">primary</span> key(stu_num,course_id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>注意：在实际企业项目的数据库中，联合主键的使用频率并不高；当一个数据库中没有明确的字段可以作为主键时，我们可以额外添加一个ID字段作为主键。</p><h6 id="6-5-7外键约束"><a href="#6-5-7外键约束" class="headerlink" title="6.5.7外键约束"></a>6.5.7外键约束</h6><p>在夺标关联部分详解。</p><h4 id="6-6-DML数据操纵语言"><a href="#6-6-DML数据操纵语言" class="headerlink" title="6.6 DML数据操纵语言"></a>6.6 DML数据操纵语言</h4><blockquote><p>用于完成对数据表中的数据的插入、删除、修改</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> stus(</span><br><span class="line">stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">primary</span> key,</span><br><span class="line">stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_tel  <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">stu_qq <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h6 id="6-6-1插入数据"><a href="#6-6-1插入数据" class="headerlink" title="6.6.1插入数据"></a>6.6.1插入数据</h6><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>(columName,columName) <span class="keyword">values</span>(value1,value2,value3...)</span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">## 向数据表中指定的列表添加数据（不允许为空的列表必须有数据）</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_gender,stu_age,stu_tel)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20210101&#x27;</span>,<span class="string">&#x27;三&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">21</span>,<span class="string">&#x27;13030303300&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">## 数据表名后的字段名列表顺序可以不与表中一致，但是<span class="keyword">values</span>中的值的顺序必须与表名后字段名顺序对应</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> stus(stu_num,stu_name,stu_age,stu_tel,stu_gender)</span><br><span class="line">    <span class="keyword">values</span>(<span class="string">&#x27;20210103&#x27;</span>,<span class="string">&#x27;王五&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;13030303360&#x27;</span>,<span class="string">&#x27;女&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">## 当要向表中的所有列添加数据时，数据比奥后面的字段名可以省略，但是<span class="keyword">values</span>中的顺序要与数据表定义的字段保持一致；</span><br><span class="line"></span><br><span class="line">## 在项目开发中，即使要向所有列表添加数据，建议将列表的列表名显示写出来。增加代码的可读性。</span><br></pre></td></tr></table></figure><h6 id="6-6-2删除数据"><a href="#6-6-2删除数据" class="headerlink" title="6.6.2删除数据"></a>6.6.2删除数据</h6><blockquote><p>从数据表中删除满足特定条件（所有）的数据</p></blockquote><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> <span class="keyword">where</span> conditions;</span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num<span class="operator">=</span><span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age<span class="operator">&gt;</span><span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">## 如果删除语句没有<span class="keyword">where</span>语句，则删除当前数据表中所有的记录（敏感操作）</span><br></pre></td></tr></table></figure><h6 id="6-6-3修改数据"><a href="#6-6-3修改数据" class="headerlink" title="6.6.3修改数据"></a>6.6.3修改数据</h6><blockquote><p>对数据表中已经添加的记录进行修改update</p></blockquote><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> <span class="keyword">set</span> </span><br></pre></td></tr></table></figure><p><strong>示例</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## 将学号为<span class="number">20210105</span>的学生名修改为‘孙七’</span><br><span class="line"><span class="keyword">update</span> stus <span class="keyword">set</span> stu_name<span class="operator">=</span><span class="string">&#x27;孙七&#x27;</span> <span class="keyword">where</span> stu_num<span class="operator">=</span><span class="string">&#x27;20210105&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## 将学号为<span class="number">20210103</span>的学生性别修改为 男，同时将QQ修改为<span class="number">66666</span></span><br><span class="line"><span class="keyword">update</span> stus <span class="keyword">set</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>,stu_qq<span class="operator">=</span><span class="string">&#x27;66666&#x27;</span> <span class="keyword">where</span> stu_num<span class="operator">=</span><span class="string">&#x27;20210103&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## 根据主键修改其他所有列</span><br><span class="line"></span><br><span class="line">## 如果<span class="keyword">update</span>语句没有<span class="keyword">where</span>子句，则表示修改当前所有行（记录）</span><br></pre></td></tr></table></figure><h4 id="6-7-DQL-数据查询语句"><a href="#6-7-DQL-数据查询语句" class="headerlink" title="6.7 DQL 数据查询语句"></a>6.7 DQL 数据查询语句</h4><blockquote><p>从数据表中提取满足特定条件的记录</p><ul><li>单表查询</li><li>多表联合查询</li></ul></blockquote><h6 id="6-7-1查询基础语法"><a href="#6-7-1查询基础语法" class="headerlink" title="6.7.1查询基础语法"></a>6.7.1查询基础语法</h6><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## <span class="keyword">select</span> 关键字</span><br><span class="line"><span class="keyword">select</span> columunName1、<span class="number">2</span>、<span class="number">3.</span>.. <span class="keyword">from</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line"> ##如果是要显示查询到的记录所有列，则可以使用<span class="operator">*</span> 替代字段列表名（在项目开发中不建议使用<span class="operator">*</span>）</span><br></pre></td></tr></table></figure><h6 id="6-7-2-where子句"><a href="#6-7-2-where子句" class="headerlink" title="6.7.2 where子句"></a>6.7.2 where子句</h6><blockquote><p>在删除、修改及查询的语句后都可以添加where子句（条件），用于筛选满足特定的添加的数据进行删除、修改和查询操作。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> tableName <span class="keyword">where</span> conditions;</span><br><span class="line"><span class="keyword">update</span> tableName <span class="keyword">set</span> ... <span class="keyword">where</span> conditions;</span><br><span class="line">seclect ... <span class="keyword">from</span> tableName <span class="keyword">where</span> conditions;</span><br></pre></td></tr></table></figure><p><strong>条件</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">## <span class="operator">=</span> 等于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num <span class="operator">=</span> <span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">!=</span> 不等于 <span class="operator">&lt;&gt;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num <span class="operator">!=</span> <span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_num <span class="operator">&lt;&gt;</span> <span class="string">&#x27;20210101&#x27;</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&gt;</span> 大于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&gt;</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&lt;</span> 小于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&lt;</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&gt;=</span> 大于等于</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&gt;=</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="operator">&lt;=</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="operator">&lt;=</span> <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">## <span class="keyword">between</span> <span class="keyword">and</span>  [v1,v2]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>条件逻辑运算符</strong></p><blockquote><p>在where子句中，可以将多个条件通过逻辑运算符（ and or not）进行连接，通过多个条件来筛选要操作的数据。</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## <span class="keyword">and</span> 筛选多个条件同时满足得到记录</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">and</span> stu_age<span class="operator">=</span><span class="operator">&lt;</span><span class="number">21</span>;</span><br><span class="line"></span><br><span class="line">## <span class="keyword">or</span> 筛选多个条件中至少满足一个条件的记录；</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">or</span> stu_age<span class="operator">=</span><span class="operator">&lt;</span><span class="number">21</span>;</span><br><span class="line"></span><br><span class="line">## <span class="keyword">not</span> 取反</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">18</span> <span class="keyword">and</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure><h6 id="6-7-3-LIKE子句"><a href="#6-7-3-LIKE子句" class="headerlink" title="6.7.3 LIKE子句"></a>6.7.3 LIKE子句</h6><blockquote><p>在where子句的条件中，我们可以使用like关键字来实现模糊查询。</p></blockquote><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tableName <span class="keyword">where</span> columnName <span class="keyword">like</span> <span class="string">&#x27;reg&#x27;</span>;</span><br></pre></td></tr></table></figure><ul><li>在like关键字后的reg表达式中<ul><li><code>%</code>表示任意多个字符【<code>%o%</code>包含字母o】</li><li><code>_</code>表示一个字符【<code>_o</code>第二个字母为o】</li></ul></li></ul><p><strong>示例</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 查询学生姓名包含字母o的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;_o%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询学生姓名第一个字为‘张’的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;张%&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询学生姓名最后一个字母为o的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;%o&#x27;</span>;</span><br><span class="line"></span><br><span class="line"># 查询学生姓名中第二个字母为o的学生信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_name <span class="keyword">like</span> <span class="string">&#x27;_o%&#x27;</span>;</span><br></pre></td></tr></table></figure><h6 id="6-7-4-对查询结果的处理"><a href="#6-7-4-对查询结果的处理" class="headerlink" title="6.7.4 对查询结果的处理"></a>6.7.4 对查询结果的处理</h6><p><strong>设置查询的列</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> columnName1,columnName2... <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age<span class="operator">&gt;</span><span class="number">20</span>;</span><br></pre></td></tr></table></figure><p><strong>计算列</strong></p><blockquote><p>对从数据表中查询的记录的列进行一定的运算之后显示出来</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## 用当前年份减去年龄等于出生年份</span><br><span class="line"><span class="keyword">select</span> stu_name,<span class="number">2021</span><span class="operator">-</span>stu_age <span class="keyword">from</span> stus;</span><br></pre></td></tr></table></figure><p><strong>字段别名</strong></p><blockquote><p>我们可以为查询结果的列名去定义一个语义性更强的别名(如下案例中的<code>as</code>可以省略)</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stu_name <span class="keyword">as</span> 姓名,<span class="number">2022</span><span class="operator">-</span>stu_age <span class="keyword">as</span> 出生年份 <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 姓名      <span class="operator">|</span> 出生年份       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br><span class="line"><span class="operator">|</span> 王五      <span class="operator">|</span>         <span class="number">2002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 孙七      <span class="operator">|</span>         <span class="number">2001</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> polly     <span class="operator">|</span>        <span class="number">2003</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 韩梅梅     <span class="operator">|</span>        <span class="number">2003</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------------+</span></span><br></pre></td></tr></table></figure><p><strong>消除重复行</strong></p><blockquote><p>从查询的结果中将重复的记录消除<code>distinct</code></p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> stu_age <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> stu_age <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> stu_age <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br></pre></td></tr></table></figure><h6 id="6-7-5-order-by排序"><a href="#6-7-5-order-by排序" class="headerlink" title="6.7.5 order by排序"></a>6.7.5 order by排序</h6><blockquote><p>将查询到的满足条件的记录按照指定顺序排序</p></blockquote><p><strong>语法</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tableName <span class="keyword">where</span> conditions <span class="keyword">order</span> <span class="keyword">by</span> columnName <span class="keyword">desc</span><span class="operator">|</span><span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure><ul><li>order by columnName 表示将查询结果按照指定的列排序<ul><li>asc按照指定的列升序（默认）</li><li>desc按照指定的列降序</li></ul></li></ul><p><strong>实例</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 单字段排序</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age <span class="keyword">order</span> <span class="keyword">by</span> stu_gender <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name  <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> stu_tel     <span class="operator">|</span> stu_qq <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12534564</span> <span class="operator">|</span> 黄鹏    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">44561234513</span> <span class="operator">|</span> <span class="number">132456</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210103</span> <span class="operator">|</span> 王五      <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span> <span class="number">13030303360</span> <span class="operator">|</span> <span class="number">66666</span>  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210106</span> <span class="operator">|</span> polly    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">18859456456</span> <span class="operator">|</span> <span class="number">5664</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210105</span> <span class="operator">|</span> 孙七      <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">13826473744</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210541</span> <span class="operator">|</span> 韩梅梅    <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">45685451321</span> <span class="operator">|</span> <span class="number">546512</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"></span><br><span class="line"># 多字段排序 ：先满足第一个排序规则，当第一个排序的列相同时再按照第二个列的规则排序</span><br><span class="line"> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stus <span class="keyword">where</span> stu_age<span class="operator">&gt;</span><span class="number">13</span> <span class="keyword">order</span> <span class="keyword">by</span> stu_gender <span class="keyword">desc</span>,stu_age <span class="keyword">asc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> stu_num  <span class="operator">|</span> stu_name  <span class="operator">|</span> stu_gender <span class="operator">|</span> stu_age <span class="operator">|</span> stu_tel     <span class="operator">|</span> stu_qq <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210107</span> <span class="operator">|</span> 奥达斯    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">14</span> <span class="operator">|</span> <span class="number">13333333333</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">12534564</span> <span class="operator">|</span> 黄鹏    <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">44561234513</span> <span class="operator">|</span> <span class="number">132456</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210106</span> <span class="operator">|</span> polly     <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">18859456456</span> <span class="operator">|</span> <span class="number">5664</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210103</span> <span class="operator">|</span> 王五      <span class="operator">|</span> 男         <span class="operator">|</span>      <span class="number">20</span> <span class="operator">|</span> <span class="number">13030303360</span> <span class="operator">|</span> <span class="number">66666</span>  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210105</span> <span class="operator">|</span> 孙七      <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">17</span> <span class="operator">|</span> <span class="number">13826473744</span> <span class="operator">|</span> <span class="keyword">NULL</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">20210541</span> <span class="operator">|</span> 韩梅梅    <span class="operator">|</span> 女         <span class="operator">|</span>      <span class="number">19</span> <span class="operator">|</span> <span class="number">45685451321</span> <span class="operator">|</span> <span class="number">546512</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-----------+------------+---------+-------------+--------+</span></span><br></pre></td></tr></table></figure><h6 id="6-7-6-聚合函数"><a href="#6-7-6-聚合函数" class="headerlink" title="6.7.6 聚合函数"></a>6.7.6 聚合函数</h6><blockquote><p>SQL提供了一些可以对查询的记录的列进行计算的函数——聚合函数</p></blockquote><ul><li><code>count()</code>统计函数，统计满足条件的指定字段值的个数（记录数）</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 统计学生表中学生总数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(stu_num) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(stu_num) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span>              <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"></span><br><span class="line"># 统计学生表中性别为男的学生总数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(stu_num) <span class="keyword">as</span> 数量 <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span> 数量   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+</span></span><br></pre></td></tr></table></figure><ul><li><code>max()</code>计算最大值，查询满足条件的记录中指定列的最大值</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">max</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">max</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">21</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure><ul><li><code>min()</code>计算最小值，查询满足条件的记录中指定列的最小值</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">min</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">min</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure><ul><li><code>sum()</code>计算和，查询满足条件记录中，计算指定列的值的总和</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 计算所有学生的年龄总和</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">sum</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">113</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"># 计算所有性别为女的学生年龄总和</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">sum</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">36</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure><ul><li><code>avg()</code>求平均值，查询满足条件记录中，计算指定列的平均值</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">select</span> <span class="built_in">avg</span>(stu_age) <span class="keyword">from</span> stus;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">avg</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">18.8333</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">select</span> <span class="built_in">avg</span>(stu_age) <span class="keyword">from</span> stus <span class="keyword">where</span> stu_gender<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">avg</span>(stu_age) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">19.2500</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络实验报告（一）</title>
      <link href="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><strong>实验一：交换机配置实验</strong></p><h5 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h5><ol><li><p>了解交换机的工作原理</p></li><li><p>了解交换机的命令行配置</p></li><li><p>了解虚拟局域网VLAN的配置</p></li></ol><h5 id="二、实验环境与设备"><a href="#二、实验环境与设备" class="headerlink" title="二、实验环境与设备"></a>二、实验环境与设备</h5><p>本实验是在计算机上利用模拟软件进行操作，需要的设备有：PC机，华为路由仿真软件HW-RouteSim 。</p><h5 id="三、实验内容"><a href="#三、实验内容" class="headerlink" title="三、实验内容"></a>三、实验内容</h5><ol><li><p>交换机的基本配置</p></li><li><p>单一交换机的VLAN配置</p></li><li><p>两台交换机的VLAN配置</p></li><li><p>多交换机的VLAN配置</p></li></ol><h5 id="四、实验原理"><a href="#四、实验原理" class="headerlink" title="四、实验原理"></a>四、实验原理</h5><p>交换机采用背板总线结构，为每个端口提供一个独立的共享介质，把冲突域限制在每个端口的范围内。如果将计算机直接连到交换机的端口，那么它将独享该端口提供的带宽；如果计算机通过以太网连入交换机，则该以太网上的所有计算机共享交换机端口提供的带宽。</p><p><strong>1．交换机的工作过程</strong></p><p>当交换机接收到一个数据帧时，它首先会记录该数据帧的源MAC地址和源端口的映射，如果在“MAC地址-端口映射表”中已经存在该映射项，则更新该映射项的生存期，如果没有则在映射表中保存该项。然后查看“MAC地址-端口映射表”中是否存在该数据帧的目的MAC地址与端口的对应关系，如果有就把该数据帧发向对应的端口，如果该对应端口是数据帧的来源端口，就简单地将该数据帧丢弃；如果映射表没有该数据帧的目的MAC地址与端口的对应关系，则向除接收该数据帧的那个端口以外的其他所有端口转发该数据帧。以太网交换机隔离了本地信息，从而避免了网络上不必要的数据流动，实现了通信过滤功能。</p><p><strong>2．虚拟局域网VLAN</strong></p><p>VLAN是建立在局域网交换机上的，以软件方式实现逻辑工作组的划分与管理，逻辑工作组的站点不受物理位置的限制，当一个站点从一个逻辑工作组移到另一个逻辑工作组时，只需要通过软件设定，而不需要改变它在网络中的物理位置；当一个站点从一个物理位置移动到另一个物理位置时，只要将该计算机连入另一台交换机，通过软件设定后该计算机可成为原工作组的一员。</p><p>以太网交换机的每个端口都可以分配给一个VLAN，分配给同一个VLAN的端口共享广播域，即一个站点发送广播信息，同一VLAN中的所有站点都可以接收到。属于不同VLAN中的计算机之间不能直接通信，需要借助于路由器或具有路由功能的第三层交换机。VLAN中继：也称为VLAN主干，是指在交换机与交换机或交换机与路由器之间连接的情况下，在互相连接的两个端口上配置中继模式，使得属于不同VLAN的数据帧都可以通过这条中继链路（VLAN Trunk）进行传输。</p><p>VLAN在交换机上的实现方法常用的有：基于端口划分VLAN（将交换机的端口人工地分配给某个VLAN）；基于MAC地址划分VLAN（根据接入交换机端口的PC机的MAC地址配置给某个VLAN）；基于IP地址划分VLAN（根据接入交换机端口的PC机的IP地址配置给某个VLAN）。</p><p><strong>3.</strong> <strong>交换机的端口</strong></p><p>交换机一般都有三种类型的端口：TRUNK口、ACCESS口、CONSOLE口。</p><p>CONSOLE端口：它是专门用于对交换机进行配置和管理的。通过Console端口连接并配置交换机，是配置和管理交换机必须经过的步骤。</p><p>ACCESS口（默认）：ACCESS端口只能通过缺省VLAN ID的报文。</p><p>TRUNK口：为了让连接在不同交换机但属于同一VLAN的计算机之间能够相互通信，必须把两个交换机相级联的那两个端口配置成TRUNK口工作模式。</p><p><strong>4．交换机的工作视图</strong></p><table><thead><tr><th><strong>视图模式</strong></th><th><strong>提示符</strong></th><th><strong>进入视图的命令</strong></th></tr></thead><tbody><tr><td>用户视图</td><td><Quidway></Quidway></td><td></td></tr><tr><td>系统视图</td><td>[Quidway]</td><td><Quidway>system</Quidway></td></tr><tr><td>接口配置视图</td><td>[Quidway-Ethernet0&#x2F;1]</td><td>[Quidway]interface ethernet 0&#x2F;1</td></tr></tbody></table><p>用户视图：简单查看交换机版本信息。</p><p>系统视图：可以对交换机的配置文件进行管理，查看交换机的配置信息，进行网络的测试和调试等。</p><p>接口配置视图：对交换机的端口进行参数配置。</p><p>Quit命令： 退回到上一级模式。 </p><p><strong>5．交换机的命令行输入</strong></p><p><strong>获得帮助</strong></p><p>[Quidway]?      &#x2F;&#x2F; 查询特权模式下的所有命令</p><p>[Quidway]display ?  &#x2F;&#x2F;查询display命令的所有参数</p><p>[Quidway]display interface ?  &#x2F;&#x2F;查询display interface 命令的所有参数</p><p><strong>命令简写</strong></p><p>全写：[Quidway]display current-configuration &#x2F;&#x2F;显示当前配置</p><p>简写：[Quidway]dis cur</p><p>交换机命名</p><p>sysname 交换机名 &#x2F;&#x2F;更改交换机名称</p><p>使用历史命令</p><p>[Quidway]上&#x2F;下方向键 &#x2F;&#x2F;可以查看曾经用过的命令</p><h5 id="五、实验报告要求"><a href="#五、实验报告要求" class="headerlink" title="五、实验报告要求"></a>五、实验报告要求</h5><ol><li><p>完成实验步骤1（计算机与交换机的连接）部分的要求。</p></li><li><p>完成实验步骤2（单一交换机的VLAN配置）部分的要求。</p></li></ol><h5 id="六、实验步骤"><a href="#六、实验步骤" class="headerlink" title="六、实验步骤"></a>六、实验步骤</h5><p><strong>1．计算机与交换机的连接</strong></p><p>（1）规划网络</p><p>启动华为路由仿真软件HW-RouteSim ，构建如图所示的网络拓扑结构，接着设置PC机的IP地址。</p><p><a href="https://imgse.com/i/zn77ff"><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/zn77ff.png" alt="zn77ff.png" border="0">hehe</a></p><p>设置HostA的IP地址：双击HostA图标， 输入用户名和口令</p><p>PCA login:root</p><p>Password:linux</p><p><a href="https://imgse.com/i/zn7okt"><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/zn7okt.jpg" alt="zn7okt.jpg"></a></p><p>设置主机的IP地址：</p><p>[root#PCA root]# ifconfig eth0 192.168.1.1 netmask 255.255.255.0</p><p> <a href="https://imgse.com/i/zn7TtP"><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/zn7TtP.jpg" alt="zn7TtP.jpg"></a></p><p>查看主机的 IP地址：</p><p>[root#PCA root]# ifconfig</p><p><a href="https://imgse.com/i/zn75TI"><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/zn75TI.jpg" alt="zn75TI.jpg" border="0"></a></p><p>取消主机的IP地址配置:</p><p>[root#PCA root]# ifconfig eth0 down</p><p><a href="https://imgse.com/i/zn740A"><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/zn740A.jpg" alt="zn740A.jpg" border="0"></a></p><p>同理设置HostB的IP地址，并记录设置命令。</p><p><a href="https://imgse.com/i/zn7bp8"><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/zn7bp8.jpg" alt="zn7bp8.jpg" border="0"></a></p><p>（2）测试两台PC机的连通性：</p><p>在PCA中Ping PCB:</p><p>[root@PCA root]# ping 192.168.1.2 (通)</p><p><a href="https://imgse.com/i/zn7q1S"><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/zn7q1S.jpg" alt="zn7q1S.jpg" border="0"></a></p><p>（3）增加一台PC机，并设置它的IP地址为：192.168.2.1，再测试PCA与PCC的连通性，PCB与PCC的连通性。请对连通性测试结果进行分析。</p><p><strong>PCC的IP地址配置截图如下：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image014.jpg" alt="img"></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image016.jpg" alt="img"></p><p><strong>PCB与PCC的连通性测试截图如下：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image018.jpg" alt="img"></p><p><strong>原因分析：</strong></p><p>PCB和PCC不在同一网段（vlan）内。</p><p><strong>2．单一交换机的VLAN配置</strong></p><p>（1）规划网络</p><p>启动华为路由仿真软件HW-RouteSim 3.1，网络拓扑结构图如图所示，设置各个PC机的IP地址，如下：  </p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image019.png" alt="img"></p><p>（2）设置VLAN</p><p>采用基于端口配置VLAN的方法，采用相关命令把交换机端口2至端口4配置到VLAN 2。双击交换机图标，交换机进入用户视图:</p><p><Quidway>system</Quidway></p><p>[Quidway]vlan 2</p><p>[Quidway-vlan2]port ethernet 0&#x2F;2 to ethernet 0&#x2F;4</p><p>[Quidway-vlan2]disp vlan 2      &#x2F;&#x2F;查看交换机的VLAN配置</p><p>可以看到交换机的端口2至端口4属于VLAN 2，其余端口属于VLAN 1（默认）。</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image021.jpg" alt="img"></p><p>（3）删除VLAN</p><p>如果一个VLAN的存在已经没有任何意义，或在配置过程中由于配置错误，需要删除某个VLAN，可用的命令是：</p><p><Quidway>system</Quidway></p><p>[Quidway]undo vlan 2</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image023.jpg" alt="img"></p><p>（4）测试网络连通性</p><p>用ping命令测试网络连通性，在主机A的命令行状态下，测试PING到主机B， PING到主机C的连通情况。记录测试结果（截屏），并对测试结果进行分析。</p><p><strong>ping****主机B的情况截图如下：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image025.jpg" alt="img"></p><p><strong>ping主机C的情况截图如下：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image027.jpg" alt="img"></p><p><strong>结果分析：</strong></p><p>已经删除 VLAN 2有关交换机的2号端口、3号端口和4号端口，使得PCA 与 PCC不连通。</p><p><strong>3．跨交换机VLAN的配置</strong></p><p>（1）规划网络</p><p>启动华为路由仿真软件HW-RouteSim 3.1，构建网络拓扑结构如图所示，设置各主机的IP地址，如下：</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image028.png" alt="img"></p><p>给两个交换机分别取名为SwitchA，SwitchB，命令如下：</p><p>[Quidway]sysname SwitchA</p><p>[SwitchA]</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image030.jpg" alt="img"> <img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image032.jpg" alt="img"></p><p>（2）配置SwitchA端口2至端口4属于VLAN 2，端口5至端口6属于VLAN 3；配置SwitchB端口2至端口4属于VLAN 2，端口5至端口6属于VLAN 3。然后利用disp vlan命令显示交换机SwitchA的VLAN配置情况，如下图。</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image033.png" alt="img"></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image035.jpg" alt="img"></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image037.jpg" alt="img"></p><p>（3）测试网络连通性：</p><p>测试主机A与主机B、主机C、主机D的连通性。</p><p><strong>与主机B的连通性测试：</strong></p><p>如图所示：</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image039.jpg" alt="img"></p><p><strong>与主机C的连通性测试：</strong></p><p>如图所示：</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image041.jpg" alt="img"></p><p><strong>与主机D的连通性测试：</strong></p><p>如图所示：</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image043.jpg" alt="img"></p><p> **[****说明]**：此时，主机A、C属于VLAN 2，主机B、D属于VLAN 3。对于交换机而言，SwitchA和SwitchB的端口1和端口8属于VLAN 1（默认），不同VLAN间的主机不能互通。必须设置VLAN中继，把两个交换机互相连接的端口设置为trunk工作模式，配置允许通过来自哪些VLAN的报文。</p><p>（4）设置端口的trunk模式――为了实现VLAN中继</p><p>交换机的端口工作模式有access模式（默认）和trunk模式，当计算机与交换机相连时，连接端口工作在access模式下时，该端口只能通过本vlan的报文，当交换机与交换机级联时，连接端口应该工作在trunk模式，trunk端口默认只允许vlan 1的报文通过，为了让连接在不同交换机的相同VLAN中的主机能相互通信，需要配置trunk端口允许通过的报文。</p><p>将连接两个交换机的端口设置成trunk模式，SwitchA的端口8是trunk模式，<strong>SwitchA的端口1是trunk模式</strong>。参考如下命令：</p><p>[SwitchA]interface ethernet 0&#x2F;8</p><p>[SwitchA-Ethernet0&#x2F;8]port link-type trunk &#x2F;&#x2F;设置端口工作在trunk模式</p><p>[SwitchA-Ethernet0&#x2F;8]port trunk permit vlan all &#x2F;&#x2F;允许所有VLAN通过</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image045.jpg" alt="img"></p><p><strong>同理设置SwitchB的端口1的trunk模式。</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image047.jpg" alt="img"></p><p>（5）测试主机A与主机B，主机C，主机D的连通性，测试结果说明了什么问题？</p><p><strong>测试主机A与主机B的连通性：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image049.jpg" alt="img"></p><p>  <strong>测试主机A与主机C的连通性：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image051.jpg" alt="img"></p><p><strong>测试主机A与主机D的连通性：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image053.jpg" alt="img"></p><p><strong>由上测试结果说明了如下问题：</strong></p><p>同一个 vlan 下的不同交换机必须设置对应交换机连接端口为 trunk 模式才能进行通信；不管是在同一个交换机还是不同交换机的情况下，vlan不同时，都不能通信。</p><p><strong>4. 三台交换机的VLAN配置（选做题）</strong></p><p>（1）在原有拓扑结构的基础上，添加一台交换机SwitchC，如图所示。要求实现属于相同VLAN的主机之间可以通信，不同VLAN的主机之间不能通信。</p><p>  <strong>拓扑结构如下所示：</strong></p><p><strong>思路分析：</strong></p><p>由于上面SwitchA的端口8和SwitchB的端口1已经设置为trunk模式，这里就不需要设置了。另外，他们分别与SwitchC的端口2，6连接，为使得他们要在同一个vlan下能通信，必须将SwitchC的端口2，6设置为trunk模式。</p><p>（2）<strong>未设置SwtichC端口2和端口6为trunk模式时，</strong>测试主机A与主机C的连通性，测试主机B与主机D的连通性。</p><p><strong>主机A与主机C的连通性测试：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image056.jpg" alt="img"></p><p><strong>主机B与主机D的连通性测试：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image058.jpg" alt="img"></p><p>（3）设置SwitchC的端口2为trunk模式，端口6为trunk模式，并允许所有VLAN报文通过。</p><p>设置SwitchC的端口2为trunk模式，允许所有VLAN报文通过，结果如下：</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image060.jpg" alt="img"></p><p>设置SwitchC的端口6为trunk模式，允许所有VLAN报文通过，结果如下：</p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image062.jpg" alt="img"></p><p>（4）再测试主机A与主机C的连通性，测试主机B与主机D的连通性。</p><p><strong>主机A与主机C的连通性测试：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image064.jpg" alt="img"></p><p><strong>主机B与主机D的连通性测试：</strong></p><p><img src="/2022/11/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/clip_image066.jpg" alt="img"></p><h5 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h5><p>通过本次实验，了解了交换机的工作原理、交换机的命令行配置和虚拟局域网VLAN的配置，掌握了vlan局域网的实现原理。</p><p>Trunk模式：Trunk类型的接口用来连接其它交换机设备，它主要连接干道（主路）链路。为了让连接在不同交换机但属于同一VLAN的计算机之间能够相互通信，必须把两个交换机相级联的那两个端口配置成TRUNK口工作模式。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 计算机网络 </tag>
            
            <tag> 实验报告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql笔记#day 2</title>
      <link href="/2022/11/11/sql%E7%AC%94%E8%AE%B0day2/"/>
      <url>/2022/11/11/sql%E7%AC%94%E8%AE%B0day2/</url>
      
        <content type="html"><![CDATA[<p><em>2022-11-11</em></p><h6 id="6-3-2-DDL-数据表操作"><a href="#6-3-2-DDL-数据表操作" class="headerlink" title="6.3.2 DDL-数据表操作"></a>6.3.2 DDL-数据表操作</h6><p><strong>创建数据表</strong></p><blockquote><p>数据表就是一个二维的表格，一个表格由多列组成，表格中的每一类称之为表格的一个字段</p></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">TABLE</span> students(</span><br><span class="line">stu_num <span class="type">char</span>(<span class="number">8</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">stu_name <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_gender <span class="type">char</span>(<span class="number">2</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_age <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">stu_tel  <span class="type">char</span>(<span class="number">11</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">unique</span>,</span><br><span class="line">stu_qq <span class="type">varchar</span>(<span class="number">11</span>) <span class="keyword">unique</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p><img src="/2022/11/11/sql%E7%AC%94%E8%AE%B0day2/Blog_\source_posts\sql笔记day2\image-20221111110417173.png" alt="image-20221111110417173"></p><p><strong>查询数据表</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure><p><strong>查询数据表</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">desc</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p><strong>删除数据表</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## 删除数据表</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br><span class="line">## 当数据表存在时删除</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p><strong>修改数据表</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">## 修改数据表名字</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> rename <span class="keyword">to</span> <span class="operator">&lt;</span>newTableName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 数据表也有字符集，默认字符集和数据库一致 <span class="type">character</span> <span class="keyword">set</span></span><br><span class="line"> <span class="keyword">alter</span> <span class="keyword">table</span> stus <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br><span class="line"> </span><br><span class="line">## 添加字段 <span class="keyword">add</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stus <span class="keyword">add</span> stu_reamark <span class="type">varchar</span>(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">## 修改字段的列表和类型 change</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> change <span class="operator">&lt;</span>oldColumnName<span class="operator">&gt;</span> <span class="operator">&lt;</span>newColumnName<span class="operator">&gt;</span> <span class="operator">&lt;</span>type<span class="operator">&gt;</span>;</span><br><span class="line">text 是类型，同<span class="type">char</span>,<span class="type">varchar</span>,int...</span><br><span class="line"></span><br><span class="line">## 只修改字段的类型 modify</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="operator">&lt;</span>tableName<span class="operator">&gt;</span> modify <span class="operator">&lt;</span>ColumnName<span class="operator">&gt;</span> <span class="operator">&lt;</span>newType<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 删除字段</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> stus <span class="keyword">drop</span> <span class="operator">&lt;</span>columnName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><h4 id="6-4MySQL数据类型"><a href="#6-4MySQL数据类型" class="headerlink" title="6.4MySQL数据类型"></a>6.4MySQL数据类型</h4><blockquote><p>数据类型  指的是数据表中的列中支持存放的数据类型</p></blockquote><h6 id="6-4-1数值类型"><a href="#6-4-1数值类型" class="headerlink" title="6.4.1数值类型"></a>6.4.1数值类型</h6><p>在mysql中有多种数据类型可以存放数值，不同的类型存放的数值范围或者形式是不同的。</p><table><thead><tr><th>类型</th><th>内存空间大小</th><th>范围</th><th>说明</th></tr></thead><tbody><tr><td>tinyint</td><td>1byte</td><td>有符号-127<del>128<br>无符号 0</del>255</td><td>特小型整数：年龄</td></tr><tr><td>smallint</td><td>2byte</td><td>有符号-3276<del>32767<br>无符号 0</del>255</td><td>小型整数</td></tr><tr><td>mediumint</td><td>3byte</td><td>有符号-2^31<del>2^31-1<br>无符号 0</del>2^32-1</td><td>中型整数</td></tr><tr><td><strong>int&#x2F;integer</strong></td><td>4byte</td><td></td><td>整数</td></tr><tr><td>bigint</td><td>8byte</td><td></td><td>大型整数</td></tr><tr><td>float</td><td>4byte</td><td></td><td>单精度</td></tr><tr><td>double</td><td>8byte</td><td></td><td>双精度</td></tr><tr><td>decimal</td><td>第一参数+2</td><td></td><td>decimal（10，2）<br>表示数有10位<br>2位是小数</td></tr></tbody></table><h6 id="6-4-2字符串类型"><a href="#6-4-2字符串类型" class="headerlink" title="6.4.2字符串类型"></a>6.4.2字符串类型</h6><blockquote><p>存储字符序列的数据类型</p></blockquote><table><thead><tr><th>类型</th><th>字符串序列的长度范围</th><th>说明</th></tr></thead><tbody><tr><td><strong>char</strong></td><td>0~255 bit</td><td>定长字符串，最多 可以存放255个字符；当我们指定数据表字段位char（n）<br>此列中的数据最长为n个字符（一个汉字占2个字符），如果添加的数据少于n，则补‘ \u0000’至n长度</td></tr><tr><td><strong>varchar</strong></td><td>0~65535 bit</td><td>可变长度字符串，此类型的类最大长度为65535，</td></tr><tr><td>tinyblob</td><td>0~255 bit</td><td>存储二进制字符串</td></tr><tr><td>blob</td><td>0~65535 bit</td><td>存储二进制字符串</td></tr><tr><td>mediumblob</td><td>0~1677215 bit</td><td>存储二进制字符串</td></tr><tr><td>longblob</td><td>0~424967295 bit</td><td>存储二进制字符串</td></tr><tr><td>tinytext</td><td>0~255 bit</td><td>文本数据（字符串）</td></tr><tr><td>text</td><td>0~65535 bit</td><td>文本数据（字符串）</td></tr><tr><td>mediumtext</td><td>0~1677215 bit</td><td>文本数据（字符串）</td></tr><tr><td><strong>longtext</strong></td><td>0~424967295 bit</td><td>文本数据（字符串）</td></tr></tbody></table><h6 id="6-4-3日期类型"><a href="#6-4-3日期类型" class="headerlink" title="6.4.3日期类型"></a>6.4.3日期类型</h6><blockquote><p>在mysql数据库中，我们可以使用字符串来存储时间，但是如果我们需要基于时间字段进行查询操作（查询在某个时间段内的数据），就不便于查询实现</p></blockquote><table><thead><tr><th>类型</th><th>格式</th><th>说明</th></tr></thead><tbody><tr><td><strong>date</strong></td><td>2021-09-13</td><td>日期，只存储年、月、日</td></tr><tr><td>time</td><td>11:11:12</td><td>时间，只存储时、分、秒</td></tr><tr><td>year</td><td>2021</td><td>年份</td></tr><tr><td><strong>datetime</strong></td><td>2022-11-11 18:45:56</td><td>日期+时间，存储年月日时分秒</td></tr><tr><td>timestamp</td><td>20221111 184556</td><td>日期+时间，日期+时间（时间戳）</td></tr></tbody></table><h4 id="6-5字段约束"><a href="#6-5字段约束" class="headerlink" title="6.5字段约束"></a>6.5字段约束</h4><h6 id="6-5-1约束的介绍"><a href="#6-5-1约束的介绍" class="headerlink" title="6.5.1约束的介绍"></a>6.5.1约束的介绍</h6><blockquote><p>在创建数据表的时候，指定的对数据表的列的数据限制性的要求（对表中列的数据进行限制）</p></blockquote><p>为什么要给表中的列表添加限制呢？</p><ul><li>保证数据的完整性</li><li>保证数据的正确性</li><li>保证数据的正确性</li></ul><p>字段常见的约束有哪些？</p><ul><li>非空约束 not null： 限制此列的值必须提供，不能为null</li><li>唯一约束 unique：在表中的多条数据，此列的值不能重复</li><li>主键约束 primary key：非空+唯一，能够唯一标识数据表中一条数据</li><li>外键约束 foreign key：建立不同表之间的关联关系</li></ul><h6 id="6-5-2非空约束"><a href="#6-5-2非空约束" class="headerlink" title="6.5.2非空约束"></a>6.5.2非空约束</h6><blockquote><p>限制数据表中此列的值必须提供</p></blockquote><ul><li>创建表：设置图书表的 book_name not null，</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure><img src="/2022/11/11/sql%E7%AC%94%E8%AE%B0day2/Blog_\source\_posts\sql笔记day2\image-20221111191517972.png" alt="image-20221111191517972" style="zoom:67%;"><p>在添加数据时，如果book_isbn、 book_author不给值，可以默认为null</p><p>如果book_name 不给值则提示添加错误</p><p>6.5.3唯一约束</p><blockquote><p>在表中的多条数据，此列的值不能重复</p></blockquote><ul><li>创建表：设置图书表的book_isbn 为 nuique</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">unique</span>,</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure><ul><li>添加数据</li></ul><img src="/2022/11/11/sql%E7%AC%94%E8%AE%B0day2/Blog_\source\_posts\sql笔记day2\image-20221111193023719.png" alt="image-20221111193023719" style="zoom:67%;"><p>当我们添加数据时，如果给定的book_isbn的值已经存在，则显示如上结果。</p><h6 id="6-5-4主键约束"><a href="#6-5-4主键约束" class="headerlink" title="6.5.4主键约束"></a>6.5.4主键约束</h6><blockquote><p>主键——就是数据表中记录的唯一标识，在一张表中最多能有一个主键（主键可以是一个列，也可以是多个列的组合）</p><p>当一个字段声明为主键之后，添加数据时：</p><ul><li>此字段数据不能为null</li><li>此字段数据不能重复</li></ul></blockquote><p>6.5.5<strong>创建表时定义主键</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">primary</span> key,</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure><p><img src="/2022/11/11/sql%E7%AC%94%E8%AE%B0day2/Blog_\source_posts\sql笔记day2\image-20221111193636759.png" alt="image-20221111193636759"></p><p>或者</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line"> book_isbn <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line"> book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line"> book_author <span class="type">varchar</span>(<span class="number">6</span>),</span><br><span class="line"> <span class="keyword">primary</span> key(book_isbn)</span><br><span class="line"> );</span><br></pre></td></tr></table></figure><p><img src="/2022/11/11/sql%E7%AC%94%E8%AE%B0day2/Blog_\source_posts\sql笔记day2\image-20221111194228749.png" alt="image-20221111194228749"></p><p><strong>删除数据表主键约束</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> books <span class="keyword">drop</span> <span class="keyword">primary</span> key;</span><br></pre></td></tr></table></figure><p><strong>创建表之后添加主键约束</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">## 创建表时没有添加主键约束</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> books(</span><br><span class="line">  book_isbn <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line">  book_name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">  book_author <span class="type">varchar</span>(<span class="number">6</span>)</span><br><span class="line">  );</span><br><span class="line">  </span><br><span class="line">## 创建表之后添加主键约束</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> books modify book_isbn <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">primary</span> key;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sql笔记#day 1</title>
      <link href="/2022/11/10/sql%E7%AC%94%E8%AE%B0day1/"/>
      <url>/2022/11/10/sql%E7%AC%94%E8%AE%B0day1/</url>
      
        <content type="html"><![CDATA[<p><em>2022-11-10</em> </p><p><strong>SQL基本语法</strong></p><blockquote><p>在MySQL Command Line Client 或者 navicat 等工具中都可以编写SQL指令</p></blockquote><ul><li><p>SQL指令不区分大小鞋写</p></li><li><p>每条SQL表达式结束之后都以 <code>；</code>结束,</p><p>如果没由分号回车，则会出现<code>-&gt;</code>提示，说明语句没有写完</p></li><li><p>SQL关键字之间以<code>空格</code>进行分割</p></li><li><p>SQL之间可以不限制换行（可以有空格的地方就可以有换行）</p></li></ul><p><strong>DDL</strong></p><p>DDL数据库操作</p><blockquote><p>使用DDL语句可以创建数据库、查询数据库、修改数据库、删除数据库</p></blockquote><p><strong>创建数据库</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">## dbName 表示创建的数据库名称，可以自定义</span><br><span class="line"><span class="keyword">create</span> database <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 创建数据库，当指定的数据库不存在时执行</span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 创建数据库的同时，指定数据库的字符集（字符集：数据存储在数据 库中采用的编码格式）</span><br><span class="line"><span class="keyword">create</span> database db_fmsc <span class="type">character</span> <span class="keyword">set</span> utf8;</span><br></pre></td></tr></table></figure><p><strong>查询数据库</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 显示mysql中的数据库列表</span><br><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"></span><br><span class="line">## 显示指定名称的数据创建的<span class="keyword">SQL</span>指令</span><br><span class="line"><span class="keyword">show</span> database <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p><strong>修改数据库</strong>  修改数据库的字符集</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## 修改数据库的字符集</span><br><span class="line"><span class="keyword">alter</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span> <span class="type">character</span> <span class="keyword">set</span> gbk;</span><br><span class="line"><span class="keyword">alter</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span> <span class="type">character</span> det utf8;</span><br></pre></td></tr></table></figure><p><strong>删除数据库</strong> 删除数据库时会删除当前数据库中所有的数据表以及数据表中的数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 删除数据库</span><br><span class="line"><span class="keyword">drop</span> database <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br><span class="line"></span><br><span class="line">## 如果数据库存在则删除数据库</span><br><span class="line"><span class="keyword">drop</span> database <span class="keyword">is</span> <span class="keyword">exists</span> <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span>;</span><br></pre></td></tr></table></figure><p>若已经删除会出现 Can’t drop  ‘<dbName>’ : database dosen’t exist</dbName></p><p><strong>使用&#x2F;切换数据库</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use <span class="operator">&lt;</span>dbName<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机组成原理实验报告（三）</title>
      <link href="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="实验三-运算器实验"><a href="#实验三-运算器实验" class="headerlink" title="实验三 运算器实验"></a>实验三 运算器实验</h1><h3 id="1．-实验目的和要求"><a href="#1．-实验目的和要求" class="headerlink" title="1． 实验目的和要求"></a>1． 实验目的和要求</h3><h4 id="目的："><a href="#目的：" class="headerlink" title="目的："></a>目的：</h4><p>1） 掌握算术逻辑运算单元的工作原理。 </p><p>2） 熟悉简单运算器的电路组成。</p><p>3） 熟悉 4 位运算功能发生器（74LS181）的算术、逻辑运算功能。</p><h4 id="要求："><a href="#要求：" class="headerlink" title="要求："></a>要求：</h4><p>1） 做好实验预习，看懂电路图，熟悉实验中所用芯片各引脚的功能和连接方法。 </p><p>2） 按照实验内容与步骤的要求，认真仔细地完成实验。 </p><p>3） 写出实验报告。</p><h3 id="2-实验原理"><a href="#2-实验原理" class="headerlink" title="2.实验原理"></a>2.实验原理</h3><p>运算器实验电路如图 2-1 所示。两片 4 位的 74LS181 构成了 8 位字长的 ALU。两个 8 位的 74LS273 作为工作寄存器 DR1 和 DR2，用于暂存参与运算的操作数。参与运算的数 据由数据开关通过三态门 74LS245 送入工作寄存器，ALU 的运算结果也通过三态门 74LS245 发送到数据显示灯上。 参与运算的操作数由 SW7-SW0 共 8 个二进制开关来设置，当SW − BUS&#x3D;0 时，数据 通过三态门 74LS245 输出到 DR1 和 DR2。DR1 接 ALU 的 A 输入端口，DR2 接 ALU 的 B 输入端口。在 P1 的上升沿将数据打入 DR1，送至 74LS181 的 A 输入端口；在 P2 的上升沿 将数据打入 DR2，送至 74LS181 的 B 输入端口。 ALU 由两片 74LS181 构成，其中 74LS181(1)做低 4 位算术逻辑运算，74LS181(2)做高 4 位算术逻辑运算，74LS181(1)的进位输出信号 Cn+4 与 74LS181(2)的进位输入信号 Cn 相 连，两片 74LS181 的控制信号 S3-S0、M 分别相连。运算结果通过一个三态门 74LS245 输 出到数据显示灯上。另外，74LS181(2)的进位输出信号 Cn+4 可另接一个指示灯，用于显示 运算器进位标志信号状态。运算器实验电路如图 2.1 所示。两片 4 位的 74LS181 构成了 8 位字长的 ALU。两个 8 位的 74LS273 作为工作寄存器 DR1 和 DR2，用于暂存参与运算的操作数。参与运算的数 据由数据开关通过三态门 74LS245 送入工作寄存器，ALU 的运算结果也通过三态门 74LS245 发送到数据显示灯上。 参与运算的操作数由 SW7-SW0 共 8 个二进制开关来设置，当SW − BUS&#x3D;0 时，数据 通过三态门 74LS245 输出到 DR1 和 DR2。DR1 接 ALU 的 A 输入端口，DR2 接 ALU 的 B 输入端口。在 P1 的上升沿将数据打入 DR1，送至 74LS181 的 A 输入端口；在 P2 的上升沿 将数据打入 DR2，送至 74LS181 的 B 输入端口。 ALU 由两片 74LS181 构成，其中 74LS181(1)做低 4 位算术逻辑运算，74LS181(2)做高 4 位算术逻辑运算，74LS181(1)的进位输出信号 Cn+4 与 74LS181(2)的进位输入信号 Cn 相 连，两片 74LS181 的控制信号 S3-S0、M 分别相连。运算结果通过一个三态门 74LS245 输 出到数据显示灯上。另外，74LS181(2)的进位输出信号 Cn+4 可另接一个指示灯，用于显示 运算器进位标志信号状态。</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps1.jpg" alt="img"> <p>图2-1</p><h3 id="3-实验环境"><a href="#3-实验环境" class="headerlink" title="3.实验环境"></a>3.实验环境</h3><p>1）硬件：PC机器</p><p>2）软件：WINDOWS、多思计算机组成原理虚拟实验系统。</p><h3 id="4-操作方法与实验步骤"><a href="#4-操作方法与实验步骤" class="headerlink" title="4.操作方法与实验步骤"></a>4.操作方法与实验步骤</h3><pre><code> 1）运行虚拟实验系统，按照图 2.1 绘制运算器实验电路，生成实验电路如图 2.2 所示：</code></pre><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps2.jpg" alt="img"> <p>图4- 1</p><p>2） 进行电路预设置，具体步骤如下： </p><p>① 将ALU − BUS设为高电平，关闭 ALU 输出端的三态门； </p><p>② 将两片 74LS273 的MR都设为高电平，否则 74LS273 会一直处于清零状态。 </p><p>3） 打开电源开关。 </p><p>4） 设置 SW7~SW0 向 DR1 和 DR2 置数。以 DR1&#x3D;65H，DR2&#x3D;A7H 为例，具体步骤如下： </p><p>①　将SW − BUS置 0，打开数据输入端的三态门； </p><p>②　将数据开关的 SW7~SW0 置为 01100101； </p><p>③　发出 P1 单脉冲信号，在 P1 的上升沿，数据打入寄存器 DR1； </p><p>④　将数据开关的 SW7~SW0 置为 10100111； </p><p>⑤　发出 P2 单脉冲信号，在 P2 的上升沿，数据打入寄存器 DR2。 </p><p>⑥　将SW − BUS置 1，关闭数据输入端的三态门；</p><p>5）检验 DR1 和 DR2 中存的数是否正确。其具体操作如下： </p><p>①　ALU − BUS&#x3D;0，打开 ALU 输出端的三态门； </p><p>②　设置 Cn&#x3D;1，ALU 无进位输入； </p><p>③　将 S3、S2、S1、S0、M 置为 00000，指示灯应显示 DR1 中数据 01100101； </p><p>④　将 S3、S2、S1、S0、M 置为 10101，指示灯应显示 DR2 中数据 10100111。 </p><p>6）验证 74LS181 的算术运算和逻辑运算功能（采用正逻辑）。在给定 DR1&#x3D;65H，DR2&#x3D;A7H 的情况下，改变运算器的功能模式，观察运算器的输出，并填入表 4-1，并和理论值进 行比较、验证。</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/image-20221110185327775.png" alt="image-20221110185327775" style="zoom:80%;"><p>注意：A 和B 分别表示参与运算的两个数，“+”表示逻辑或，“plus”表示算术求和。</p><h3 id="5．实验内容及实验数据记录"><a href="#5．实验内容及实验数据记录" class="headerlink" title="5．实验内容及实验数据记录"></a>5．实验内容及实验数据记录</h3><p>1）运行虚拟环境，根据实验电路图4-1绘制如下电路。</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps3.jpg" alt="img" style="zoom:80%;"> <p>图5- 1</p><p>2）进行电路预设置，具体步骤如下：</p><p>①　将 ALU-BUS 设为高电平，关闭 ALU 输出端的三态门；</p><p>②　将两片 74LS273 的 MR 都设为高电平，否则 74LS273 会一直处于清零状态。</p><p>3）如图所示，打开电源开关，并打开图上开关</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps4.jpg" alt="img" style="zoom:80%;"> <p>图5- 2</p><p>4）设置 SW7-SW0向DR1和DR2置数。以 DR1 &#x3D; 65H，DR2 &#x3D; A7H为例，具体步骤如下：</p><p>①　将 SW-BUS 置 0，打开数据输入端的三态门；</p><p>②　将数据开关的 SW7-SW0 置为01100101 ；</p><p>③　发出P1单脉冲信号，在P1的上升沿，数据打入寄存器DR1；</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps5.jpg" alt="img" style="zoom:80%;"> <p>图5- 3</p><p>④　将数据开关的 SW7-SW0 置为10100111；</p><p>⑤　发出P2单脉冲信号，在P2的上升沿，数据打入寄存器DR2。</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps6.jpg" alt="img" style="zoom:80%;"> <p>图5- 4</p><p>⑥　将SW-BUS置1，关闭数据输入端的三态门；</p><p>5）检验DR1和DR2 中存的数是否正确。其具体操作如下：</p><p>①　ALU-BUS&#x3D;0，打开 ALU 输出端的三态门；</p><p>②　设置 Cn&#x3D;1，ALU无进位输入；</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps7.jpg" alt="img" style="zoom:80%;"> <p>图5- 5</p><p>③　将S3、S2、S1、S0、M 置为 00000 ，指示灯应显示 DR1 中数据 01100101；</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps8.jpg" alt="img" style="zoom:80%;"> <p>图5- 6</p><p>④　将S3、S2、S1、S0、M 置为 10101 ，指示灯应显示 DR2 中数据 10100111。</p><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/wps9.jpg" alt="img" style="zoom:80%;"> <p>图5- 7</p><p>6）验证 74LS181 的算术运算和逻辑运算功能（采用正逻辑）。在给定 DR1&#x3D;65H ， DR2 &#x3D; A7H 的情况下，改变运算器的功能模式，观察运算器的输出，并填入表 1，并和理论值进行比较、验证。</p><h3 id="6．实验数据处理与分析"><a href="#6．实验数据处理与分析" class="headerlink" title="6．实验数据处理与分析"></a>6．实验数据处理与分析</h3><img src="/2022/11/10/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%89%EF%BC%89/image-20221110185113221.png" alt="image-20221110185113221" style="zoom:80%;"><h3 id="7-问题讨论"><a href="#7-问题讨论" class="headerlink" title="7.问题讨论"></a>7.问题讨论</h3><ol><li>运算器主要由哪些器件组成？这些器件是怎样连接的？</li></ol><p>答：运算器由算术逻辑单元（ALU）、累加器、状态寄存器、通用寄存器组等组成。</p><ol start="2"><li>芯片 74LS181 没有减法：A minus B 的指令，怎样实现减法功能？</li></ol><p>答：在减法运算时，可用减法取反码运算后用加法器实现。</p><ol start="3"><li>74LS181 有哪两种级联方法？分别要用到哪些引脚？哪一种速度更快？、</li></ol><p>答：第一种是单级先行进位的ALU用四片74181构成的16位行波进位的ALU，第二种为两级先行进位的ALU，分别是用四片74181构成的16位行波进位的ALU和用四片74181和一片74182构成的16位并行ALU，第二种速度更快。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 实验报告 </tag>
            
            <tag> 计算机组成原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VScode简单配置C语言</title>
      <link href="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/"/>
      <url>/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h3 id="下载mingw"><a href="#下载mingw" class="headerlink" title="下载mingw"></a>下载mingw</h3><ul><li>进入mingw官网<a href="https://sourceforge.net/projects/mingw-w64/files/">MinGW-w64 - for 32 and 64 bit Windows - Browse Files at SourceForge.net</a></li></ul><p>下载页面中选择 <code>x86_64-win32-seh</code> 下载<br><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105200423630.png" alt="image-20221105200423630" style="zoom:80%;"></p><p>将下载好的压缩包解压，并记住路径</p><ul><li>第二种下载方式<br>链接：<a href="https://wwn.lanzouh.com/iLOip031ku6b">https://wwn.lanzouh.com/iLOip031ku6b</a> 密码:1234<br>文件路径同上一样记住</li></ul><h3 id="把mingw添加至环境变量"><a href="#把mingw添加至环境变量" class="headerlink" title="把mingw添加至环境变量"></a>把mingw添加至环境变量</h3><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105201148843.png" alt="image-20221105201148843" style="zoom:80%;"><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105201326949.png" alt="image-20221105201326949" style="zoom:80%;"><p>​红框即你解压mingw的路径</p><h3 id="安装VScode的插件"><a href="#安装VScode的插件" class="headerlink" title="安装VScode的插件"></a>安装VScode的插件</h3><p><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105201541597.png" alt="image-20221105201541597"></p><p>打开VScode安装插件 <code>Chinese</code> 和 <code>C/C++</code> ，等待安装完毕后重启VScode</p><h3 id="运行代码"><a href="#运行代码" class="headerlink" title="运行代码"></a>运行代码</h3><ul><li><p>新建文件夹，修改为英文名称并进入，右键 <code>通过Code打开</code> 若在安装时未勾选相关选项，可能没有这个选项，请自行在VScode内操作打开文件夹</p></li><li><p>新建一个文件，英文命名且扩展名为 <code>.c</code> </p></li><li><p>编写相关代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    printf(&quot;Hello World!\n&quot;);</span><br><span class="line">    printf(&quot;你好世界！\n&quot;);</span><br><span class="line">    system(&quot;pause&quot;);    // 防止运行后自动退出，需头文件stdlib.h</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/运行代码.gif" alt="img" style="zoom:80%;">  <img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105201841635.png" alt="image-20221105201841635" style="zoom:80%;"><p>至此成功在内部控制台运行，并在文件夹下自动生成<code>launch.json</code>和<code>tasks.jason</code>文件。</p><h3 id="【大力推荐】程序运行在外部控制台以及解决中文乱码问题"><a href="#【大力推荐】程序运行在外部控制台以及解决中文乱码问题" class="headerlink" title="【大力推荐】程序运行在外部控制台以及解决中文乱码问题"></a>【大力推荐】程序运行在外部控制台以及解决中文乱码问题</h3><ul><li>在自动生成的<code>launch.json</code>文件下把<code>&quot;externalConsole&quot;: false,</code>改为<code>true</code>并保存。</li></ul><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105203612040.png" alt="image-20221105203612040" style="zoom:80%;"><p>再次运行test.cpp文件发现中问乱码</p><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105203843873.png" alt="image-20221105203843873" style="zoom:80%;"><p>我们再在自动生成的<code>tasks.json</code>文件下添加如下代码</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;-fexec-charset=GBK&quot;</span> </span><br></pre></td></tr></table></figure><img src="/2022/11/05/VScode%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AEC%E8%AF%AD%E8%A8%80/image-20221105204130763.png" alt="image-20221105204130763" style="zoom:80%;"><p>这样，外部控制台以及中文乱码问题也解决了！</p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu基础shell指令操作（二）</title>
      <link href="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="实验名称：用户与组群管理"><a href="#实验名称：用户与组群管理" class="headerlink" title="实验名称：用户与组群管理"></a>实验名称：用户与组群管理</h2><h3 id="一、实验目的和要求"><a href="#一、实验目的和要求" class="headerlink" title="一、实验目的和要求"></a>一、实验目的和要求</h3><ol><li><p>管理用户和组群的shell命令</p></li><li><p>掌握U盘的挂载与卸载</p></li></ol><h3 id="二、实验内容和原理"><a href="#二、实验内容和原理" class="headerlink" title="二、实验内容和原理"></a>二、实验内容和原理</h3><ol><li><p>查看&#x2F;etc目录下的passwd、shadow、group、gshadow文件，熟悉文件中各项的含义，特别是&#x2F;etc&#x2F;passwd文件。</p></li><li><p>修改root管理员的密码</p></li><li><p>将当前用户切换为root管理员，并且当前目录为root的主目录</p></li><li><p>创建一名为jason组群，并指定其GID为600.</p></li><li><p>创建temp1用户，并指定其主要组群为jason，用户ID为600。</p></li><li><p>用id命令查看temp1用户的UID、GID。</p></li><li><p>删除temp1用户密码，并尝试以temp1用户在其它的终端登录，看是否需要密码。</p></li><li><p>锁定temp1用户，并尝试以temp1用户登录，看是否能登录；然后再解锁temp1用户</p></li><li><p>修改temp1用户，使其用户名为user1，UID为601. 查看&#x2F;etc&#x2F;passwd文件的相关信息，看看有什么变化。</p></li><li><p>修改jason组群，使其组群名为beson，其GID为601。</p></li><li><p>创建test1、test2两个用户。</p></li><li><p>将用户test1、test2添加到beson组群中，查看&#x2F;etc目录 下的group、gshadow文件有何变化。</p></li><li><p>用userdel test1与userdel –r test2删除两个用户并查看&#x2F;home文件夹的变化情况。</p></li><li><p>尝试将U盘加载到&#x2F;mnt目录（若U盘已经加载先卸载）。</p></li><li><p>将U盘里的某个文件拷贝到当前用户的主目录中。</p></li><li><p>显示cpu、内存和进程的状态的相关信息。</p></li><li><p>执行命令cat，按Ctrl+z键，挂起进程cat。</p></li><li><p>查看当前系统中作业和进程的使用情况，并杀死刚才执行cat命令的进程。</p></li></ol><h3 id="三、实验环境"><a href="#三、实验环境" class="headerlink" title="三、实验环境"></a>三、实验环境</h3><p>硬件：计算机</p><p>软件：虚拟机+Linux操作系统</p><h3 id="四、算法描述及实验步骤"><a href="#四、算法描述及实验步骤" class="headerlink" title="四、算法描述及实验步骤"></a>四、算法描述及实验步骤</h3><p>1、</p><p>cat &#x2F;etc&#x2F;passwd</p><p>cat &#x2F;etc&#x2F;shadow</p><p>cat &#x2F;etc&#x2F;group</p><p>cat &#x2F;etc&#x2F;gshadow</p><p>2、修改root管理员的密码</p><p>passwd root 或者passwd</p><p>输入两次密码</p><p>3将当前用户切换为root管理员，并且当前目录为root的主目录</p><p>cd &#x2F;root</p><p>ls -a</p><p>4创建一名为jason组群，并指定其GID为600.</p><p>groupadd -g 600 jason<img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps34.jpg" alt="img"></p><p>输入cat &#x2F;etc&#x2F;group出现 jason : x : 600</p><p>5创建temp1用户，并指定其主要组群为jason，用户ID为600。</p><p>useradd -u 600 -g jason temp1</p><p>6用id命令查看temp1用户的UID、GID。</p><p>id temp1</p><p>7删除temp1用户密码，并尝试以temp1用户在其它的终端登录，看是否需要密码。</p><p>passwd -d temp1</p><p>whoami 查看当前用户</p><p>su temp1 提示需要密码。</p><p>8锁定temp1用户，并尝试以temp1用户登录，看是否能登录；然后再解锁temp1用户。</p><p>passwd -l temp1  不可以登入，提示认证失败。</p><p>passwd -u temp1  解锁后成功登入。</p><p>9修改temp1用户，使其用户名为user1，UID为601. 查看&#x2F;etc&#x2F;passwd文件的相关信息，看看有什么变化。</p><p>usermod -l user1 -d &#x2F;home&#x2F;temp1 -m temp1</p><p>usermod -u 601 user1</p><p>10修改jason组群，使其组群名为beson，其GID为601。</p><p>​groupmod -n besom jason</p><p>​groupmod -g 601 beson</p><p>11创建test1、test2两个用户。</p><p>useradd test1</p><p>useradd test2</p><p>12将用户test1、test2添加到beson组群中，查看&#x2F;etc目录 下的group、gshadow文件有何变化。</p><p>usermod -g beson test1</p><p>usermod -g beson test2</p><p>cat &#x2F;etc&#x2F;group</p><p>cat &#x2F;etc&#x2F;gshadow</p><p>13用userdel test1与userdel –r test2删除两个用户并查看&#x2F;home文件夹的变化情况。</p><p>userdel test1</p><p>userdel –r test2</p><p>14尝试将U盘加载到&#x2F;mnt目录（若U盘已经加载先卸载）。</p><p>mount -t vfat &#x2F;dev&#x2F;sdb1 &#x2F;mnt</p><p>15将U盘里的某个文件拷贝到当前用户的主目录中。</p><p>cd &#x2F;mnt</p><p>cp 1.txt &#x2F;alningby</p><p>16、 </p><p>top</p><p>17、 </p><p>cat</p><p>Ctrl+z</p><p>18查看当前系统中作业和进程的使用情况，并杀死刚才执行cat命令的进程。</p><p>jobs</p><p>fg</p><h3 id="五、调试过程"><a href="#五、调试过程" class="headerlink" title="五、调试过程"></a>五、调试过程</h3><p>1、</p><p>&#x2F;etc&#x2F;shadow 文件，用于存储 Linux 系统中用户的密码信息，又称为“影子文件”。</p><p>由于&#x2F;etc&#x2F;passwd允许所有用户读取，易导致用户密码泄露，因此 Linux 系统将用户的密码信息从 &#x2F;etc&#x2F;passwd 文件中分离出来，并单独放到了shadow文件中。</p><p>同 &#x2F;etc&#x2F;passwd 文件一样，文件中每行代表一个用户，同样使用 “:” 作为分隔符，不同之处在于，每行用户信息被划分为 9 个字段。每个字段的含义如下：</p><p>用户名：加密密码：最后一次修改时间：最小修改时间间隔：密码有效期：密码需要变更前的警告天数：密码过期后的宽限时间：账号失效时间：保留字段</p><p>加密密码是用散列算法算出的，无法倒推计算出真正的明文密码。</p><p>对于普通账户的密码遗失，可以通过 root 账户解决，它会重新给你配置好指定账户的密码，而不需知道你原有的密码（利用 root 的身份使用 passwd 命令即可）。</p><p>如果 root 账号的密码遗失，则需要重新启动进入单用户模式，系统会提供 root 权限的 bash 接口，此时可以用 passwd 命令修改账户密码；也可以通过挂载根目录，修改 &#x2F;etc&#x2F;shadow，将账户的 root 密码清空的方法，此方式可使用 root 无法密码即可登陆，登陆后使用 passwd 命令配置root密码。</p><h3 id="六、实验结果"><a href="#六、实验结果" class="headerlink" title="六、实验结果"></a>六、实验结果</h3><p>1、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps35.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps36.jpg" alt="img"><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps37.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps38.jpg" alt="img"> </p><p>2、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps39.jpg" alt="img"> </p><p>3、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps40.jpg" alt="img"> </p><p>4、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps41.jpg" alt="img"> </p><p>5、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps42.jpg" alt="img"> </p><p>6、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps43.jpg" alt="img"> </p><p>7、</p><p>删除密码后输入原来的密码也登入不了。</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps44.jpg" alt="img"> </p><p>查看passwd文件发现加密密码已经删除，即temp1没有密码。</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps45.jpg" alt="img"> </p><p>8、</p><p>锁定账户后登入不了，提示认证失败。</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps46.jpg" alt="img"> </p><p>解锁后又可以登入了。</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps47.jpg" alt="img"> </p><p>9、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps48.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps49.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps50.jpg" alt="img"> </p><p>10、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps51.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps52.jpg" alt="img"> </p><p>11、</p><p>useradd test1</p><p>​    useradd test2</p><p>12、</p><p>cat &#x2F;etc&#x2F;group</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps53.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps54.jpg" alt="img"> </p><p>cat &#x2F;etc&#x2F;gshadow</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps55.jpg" alt="img"> </p><p>13、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps56.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps57.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps58.jpg" alt="img"> </p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps59.jpg" alt="img"> </p><p>14、在真实机上插上U盘</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps60.jpg" alt="img"> </p><p>输入mount -t vfat &#x2F;dev&#x2F;sdb1 &#x2F;mnt</p><p>再进入&#x2F;mnt   cd &#x2F;mnt</p><p>查看ls -a</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps61.jpg" alt="img"> </p><p>15、</p><p>输入指令后：</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps62.jpg" alt="img"> </p><p>去主目录验证：</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps63.jpg" alt="img"> </p><p>成功在主目录下打开1.txt文件。</p><p>16、</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps64.jpg" alt="img"> </p><p>17、</p><p>cat</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps65.jpg" alt="img"> </p><p>18、</p><p>jobs结束后</p><p>fg</p><p><img src="/2022/10/29/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%BA%8C%EF%BC%89/wps66.jpg" alt="img"> </p><p>输入cat &#x2F;etc&#x2F;group出现jason:x:600</p><h3 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h3><p>在修改用户的UID或者GID等相关信息的时候记得把另一个终端的用户退了，或者使用命令sudo pkill -9 -u user1，正在使用的进程无法做出修改。</p><p>否则提示：</p><p>user user1 is currently used by process XXXX</p><p>XXXX为进程编号。</p><p>要熟练使用各种命令并进行验证。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 指令 </tag>
            
            <tag> 实验报告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机组成原理实验报告（一）</title>
      <link href="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="实验一-全加器实验"><a href="#实验一-全加器实验" class="headerlink" title="实验一 全加器实验"></a>实验一 全加器实验</h1><h3 id="1．-实验目的和要求"><a href="#1．-实验目的和要求" class="headerlink" title="1． 实验目的和要求"></a><strong>1．</strong> 实验目的和要求</h3><h4 id="目的："><a href="#目的：" class="headerlink" title="目的："></a>目的：</h4><p>1） 熟悉多思计算机组成原理网络虚拟实验系统的使用方法。 </p><p>2） 掌握全加器的逻辑结构和电路实现方法。</p><h4 id="要求："><a href="#要求：" class="headerlink" title="要求："></a>要求：</h4><p>1） 做好实验预习，复习全加器的原理，掌握实验元器件的功能特性。</p><p>2） 按照实验内容与步骤的要求，独立思考，认真仔细地完成实验。</p><p>3） 写出实验报告。</p><h3 id="2．实验原理"><a href="#2．实验原理" class="headerlink" title="2．实验原理"></a>2．实验原理</h3><p>  1 位二进制加法器有三个输入量：两个二进制数字 Ai、Bi 和一个低位的进位信号 Ci， 这三个值相加产生一个和输出 Si 以及一个向高位的进位输出 Ci+1，这种加法单元称为全加 器，其逻辑方程如下： </p><p>​Si&#x3D;Ai⊕Bi⊕Ci （1.1）</p><p>​          Ci+1&#x3D;AiBi+BiCi+CiAi</p><h3 id="3-实验环境"><a href="#3-实验环境" class="headerlink" title="3.实验环境"></a>3.实验环境</h3><p>  PC机器、IE10浏览器。</p><h3 id="4-操作方法与实验步骤"><a href="#4-操作方法与实验步骤" class="headerlink" title="4.操作方法与实验步骤"></a>4.操作方法与实验步骤</h3><p>  1.按照实验电路在虚拟实验系统上连接电路。</p><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps1.jpg" alt="img"> </p><p>2、在仿真系统上控制开关并做好记录。</p><p>3、做好总结，关闭仿真系统。</p><h3 id="5-实验内容及实验数据记录"><a href="#5-实验内容及实验数据记录" class="headerlink" title="5.实验内容及实验数据记录"></a>5.实验内容及实验数据记录</h3><ol><li>运行虚拟实验系统，从左边的实验设备列表选取所需组件拖到工作区中，按照图 1.1 所 示搭建实验电路，得到如图 1.2 所示的实验电路。</li></ol><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps2.jpg" alt="img"> </p><p>图 1.2 一位全加器模拟实验电路</p><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps3.png" alt="img"> </p><ol start="2"><li>打开电源开关，按表 1-1 中的输入信号设置数据开关，根据显示在指示灯上的运算结果 填写表 1-1 中的输出值。</li></ol><p>​表 1-1 一位全加器真值表</p><table><thead><tr><th align="center">输入</th><th align="center"></th><th align="center"></th><th align="center">输出</th><th align="center"></th></tr></thead><tbody><tr><td align="center">Ai</td><td align="center">Bi</td><td align="center">Ci</td><td align="center">Si</td><td align="center">Ci+1</td></tr><tr><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td></tr><tr><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">0</td></tr><tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td></tr><tr><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td></tr><tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td></tr></tbody></table><ol start="3"><li>关闭电源开关，增加元器件，实现一个 2 位串行进位并行加法器。用此加法器进行运 算，根据运算结果填写好表 1-2。</li></ol><p>​表 1-2 2位串行进位并行加法器真值表</p><table><thead><tr><th align="center">输入</th><th align="center">输出</th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center">A2</td><td align="center">A1</td><td align="center">B2</td><td align="center">B1</td><td align="center">C1</td><td align="center">S2</td><td align="center">S1</td><td align="center">C3</td></tr><tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">0</td></tr><tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">0</td></tr><tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td></tr><tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr><tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td></tr></tbody></table><h3 id="6-实验数据处理与分析"><a href="#6-实验数据处理与分析" class="headerlink" title="6.实验数据处理与分析"></a>6.实验数据处理与分析</h3><p>（1）一位全加器</p><p>①　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td><td align="center">0</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps4.jpg" alt="img"> </p><p>②　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps5.jpg" alt="img"> </p><p>③　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps6.jpg" alt="img"> </p><p>④　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">1</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps7.jpg" alt="img"> </p><p>⑤　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">0</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps8.jpg" alt="img"> </p><p>⑥　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps9.jpg" alt="img"> </p><p>⑦　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps10.jpg" alt="img"> </p><p>⑧　</p><table><thead><tr><th align="center">Ai</th><th align="center">Bi</th><th align="center">Ci</th><th align="center">Si</th><th align="center">Ci+1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps11.jpg" alt="img"> </p><p>（2）两位串行进位并行加法器</p><p>对于三个一位二进制a,b,c全加器，其中逻辑为异或。即是1异或0为1，0异或1为1。由图不难分析，先与非门逻辑再异或门逻辑，或是先异或门逻辑再与非门逻辑。也就不难得到如图所示的真值表。</p><p>对于一个2为串行进位并行加法器，将两个1位2进制加法器并联在一起。其中低位加法器的高位进位输出作为高位的输入C2.再分析异或门与非门的相关逻辑不难得出如图所示的2位串行进位并行加法器的真值表。</p><p>①　</p><table><thead><tr><th align="center">A2</th><th align="center">A1</th><th align="center">B2</th><th align="center">B1</th><th align="center">C1</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">0</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps12.jpg" alt="img"> </p><p>②　</p><table><thead><tr><th align="center">A2</th><th align="center">A1</th><th align="center">B2</th><th align="center">B1</th><th align="center">C1</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps13.jpg" alt="img"> </p><p>③　</p><table><thead><tr><th align="center">A2</th><th align="center">A1</th><th align="center">B2</th><th align="center">B1</th><th align="center">C1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">0</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps14.jpg" alt="img"> </p><p>④　</p><table><thead><tr><th align="center">A2</th><th align="center">A1</th><th align="center">B2</th><th align="center">B1</th><th align="center">C1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">0</td><td align="center">0</td><td align="center">1</td><td align="center">1</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps15.jpg" alt="img"> </p><p>⑤　</p><table><thead><tr><th align="center">A2</th><th align="center">A1</th><th align="center">B2</th><th align="center">B1</th><th align="center">C1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">0</td><td align="center">1</td><td align="center">1</td><td align="center">0</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps16.jpg" alt="img"> </p><p>⑥　</p><table><thead><tr><th align="center">A2</th><th align="center">A1</th><th align="center">B2</th><th align="center">B1</th><th align="center">C1</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td><td align="center">1</td></tr></tbody></table><p><img src="/2022/10/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%EF%BC%88%E4%B8%80%EF%BC%89/wps17.jpg" alt="img"> </p><h3 id="7-问题讨论"><a href="#7-问题讨论" class="headerlink" title="7.问题讨论"></a>7.问题讨论</h3><p>问：能使用全加器构造出补码加法&#x2F;减法器吗？</p><p>答：可以。因为当前计算机中加法和减法都是通过加法器来实现的。数值一律用补码来存储可以将符号位和其他位一起处理，便于加法和减法运算。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 实验报告 </tag>
            
            <tag> 计算机组成原理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu基础shell指令操作(一)</title>
      <link href="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="实验报告"><a href="#实验报告" class="headerlink" title="实验报告"></a>实验报告</h1><hr><h2 id="实验名称：shell命令验证"><a href="#实验名称：shell命令验证" class="headerlink" title="实验名称：shell命令验证"></a>实验名称：shell命令验证</h2><h3 id="一、实验目的和要求"><a href="#一、实验目的和要求" class="headerlink" title="一、实验目的和要求"></a>一、实验目的和要求</h3><p>字符界面下熟悉图形界面的转换、简单shell命令、输入输出重定向</p><h3 id="二、实验内容和原理"><a href="#二、实验内容和原理" class="headerlink" title="二、实验内容和原理"></a>二、实验内容和原理</h3><h4 id="（一）shell基本命令使用"><a href="#（一）shell基本命令使用" class="headerlink" title="（一）shell基本命令使用"></a>（一）shell基本命令使用</h4><ol><li><p>将图形化用户界面转换成虚拟终端，并将虚拟终端转换成图形化用户界面</p></li><li><p>请尝试字符界面下注销、重启、关机命令。</p></li><li><p>用date命令将系统时间设置为2021年10月9日15时00分。</p></li><li><p>cd命令将工作目录转换为&#x2F;boot,然后再返回用户主目录。</p></li><li><p>显示&#x2F;root文件夹下所有文件和目录（包括隐含文件和子文件夹下内容）</p></li><li><p>用cat命令显示&#x2F;root&#x2F;.bash_history文件内容，要求显示文件的每行必须有行号。</p></li><li><p>用more和less命令显示&#x2F;root&#x2F;.bash_history文件，感受各种翻页命令。</p></li><li><p>显示&#x2F;root&#x2F;.bash_history文件的前5行和后10行。</p></li><li><p>用man命令查看ls命令。</p></li><li><p>用命令清除当前终端内容。</p></li><li><p>用命令统计&#x2F;root&#x2F;.bash_history文件的行数。</p></li><li><p>查找&#x2F;etc文件夹下所有以字母c、b开头的文件和目录。</p></li><li><p>用cat命令创建f1和f2文件，将f1和f2文件内容合并到f3</p></li><li><p>将f3文件中的内容合并到f1，要求不能删除f1中原有的内容。</p></li><li><p>将cat  &#x2F;tmp&#x2F;tmp 执行错误结果存放到err文件中。</p></li><li><p>利用管道统计&#x2F;etc文件夹下文件与子目录的个数，并将统计结果存放到count文件中。</p></li><li><p>显示最近执行过的10条shell命令；清除历史命令</p></li><li><p>为ls &#x2F;root| wc –l命令 设置别名为count。</p></li><li><p>熟悉自动补全文件、目录名和自动补全命令名。</p></li></ol><h4 id="（二）文件系统与文件管理命令使用"><a href="#（二）文件系统与文件管理命令使用" class="headerlink" title="（二）文件系统与文件管理命令使用"></a>（二）文件系统与文件管理命令使用</h4><ol><li><p>创建一个以自己账号命名的文件。分别用数字模式和功能模式将该文件的权限修改为文件拥有者可以读、执行，但是不能写；同组用户具有写，但是不能读、执行；其他用户没有任何权限。</p></li><li><p>移除上面创建的文件文件所有者执行的权限。</p></li><li><p>将上面创建的文件所属组群修改为root。</p></li><li><p>将上面创建文件的文件所有者修改为root。</p></li><li><p>创建&#x2F;student和&#x2F;chen目录。</p></li><li><p>将上面创建文件拷贝到&#x2F;student目录下。</p></li><li><p>将&#x2F;student文件夹（包括子文件夹的内容）全部移到&#x2F;chen目录下。</p></li><li><p>删除&#x2F;chen文件夹。</p></li><li><p>在&#x2F;root文件夹下创建ts.txt文件，用ln命令创建ts.txt硬链接为ts1.lnk，符号链接为ts2.lnk,尝试在ts.txt、ts1.lnk、ts2.lnk三个文件中修改内容，观察另外两个文件的变化情况。</p></li><li><p>删除ts.txt文件，分别打开ts1.lnk、ts2.lnk文件看看是否能顺利打开。</p></li><li><p>在当前目录下文件所有者为root，文件小于10k的一般文件。</p></li><li><p>删除&#x2F;tmp目录下c开头且文件大小为0的普通文件</p></li><li><p>查找&#x2F;root&#x2F;.bashrc文件中包含if字符的行，并显示行号。</p></li><li><p>用du命令查看&#x2F;etc文件夹的情况，将其结果按照第一字段的数字大小进行排序。</p></li><li><p>用tar命令将&#x2F;usr&#x2F;local下的所有文档归档并压缩为a.tar.gz。</p></li><li><p>用tar命令解压a.tar.gz文件到&#x2F;tmp目录中。</p></li></ol><h3 id="三、实验环境"><a href="#三、实验环境" class="headerlink" title="三、实验环境"></a>三、实验环境</h3><p>硬件：计算机</p><p>软件：虚拟机+Linux操作系统</p><h3 id="四、算法描述及实验步骤"><a href="#四、算法描述及实验步骤" class="headerlink" title="四、算法描述及实验步骤"></a>四、算法描述及实验步骤</h3><h4 id="（一）shell基本命令使用-1"><a href="#（一）shell基本命令使用-1" class="headerlink" title="（一）shell基本命令使用"></a>（一）<em>shell基本命令使用</em></h4><ol><li>将图形化用户界面转换成虚拟终端，并将虚拟终端转换成图形化用户界面</li></ol><p>Ctrl + alt +F1 </p><p>Ctrl + alt +F7</p><ol start="2"><li>请尝试字符界面下注销、重启、关机命令。</li></ol><p>注销：logout</p><p>立即关机：shutdown now</p><p>重启：reboot</p><ol start="3"><li>用date命令将系统时间设置为2021年10月9日15时00分。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">date -s &quot;2021-10-9 15:00:00&quot;</span><br></pre></td></tr></table></figure><ol start="4"><li>cd命令将工作目录转换为&#x2F;boot,然后再返回用户主目录。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /boot</span><br><span class="line">cd ~</span><br></pre></td></tr></table></figure><ol start="5"><li>显示&#x2F;root文件夹下所有文件和目录（包括隐含文件和子文件夹下内容）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ccd root</span><br><span class="line">ls -a </span><br></pre></td></tr></table></figure><ol start="6"><li>用cat命令显示&#x2F;root&#x2F;.bash_history文件内容，要求显示文件的每行必须有行号。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n .bash_history</span><br></pre></td></tr></table></figure><ol start="7"><li>用more和less命令显示&#x2F;root&#x2F;.bash_history文件，感受各种翻页命令。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">more /root/.bash_history</span><br><span class="line"></span><br><span class="line">less /root/.bash_history</span><br></pre></td></tr></table></figure><ol start="8"><li>显示&#x2F;root&#x2F;.bash_history文件的前5行和后10行。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">head -n 5 .bash_history</span><br><span class="line"></span><br><span class="line">cat .bash_history | head -n5</span><br></pre></td></tr></table></figure><ol start="9"><li>用man命令查看ls命令。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man ls</span><br></pre></td></tr></table></figure><ol start="10"><li>用命令清除当前终端内容。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clear</span><br></pre></td></tr></table></figure><ol start="11"><li>用命令统计&#x2F;root&#x2F;.bash_history文件的行数。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /root/.bash_history | wc -l</span><br></pre></td></tr></table></figure><ol start="12"><li>查找&#x2F;etc文件夹下所有以字母c、b开头的文件和目录。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">locate /etc/c</span><br><span class="line"></span><br><span class="line">locate /etc/b</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find . -name &#x27;c*&#x27;</span><br><span class="line"></span><br><span class="line">find . -name &#x27;b*&#x27;</span><br></pre></td></tr></table></figure><ol start="13"><li>用cat命令创建f1和f2文件，将f1和f2文件内容合并到f3</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; f1</span><br><span class="line"></span><br><span class="line">cat &gt; f2</span><br><span class="line"></span><br><span class="line">cat f1 f2 &gt; f3</span><br></pre></td></tr></table></figure><ol start="14"><li>将f3文件中的内容合并到f1，要求不能删除f1中原有的内容。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat f3 &gt;&gt;f1</span><br></pre></td></tr></table></figure><ol start="15"><li>将cat  &#x2F;tmp&#x2F;tmp 执行错误结果存放到err文件中。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /tmp/tmp &gt;2 err</span><br></pre></td></tr></table></figure><ol start="16"><li>利用管道统计&#x2F;etc文件夹下文件与子目录的个数，并将统计结果存放到count文件中。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls /etc | wc -l &gt;count</span><br></pre></td></tr></table></figure><ol start="17"><li>显示最近执行过的10条shell命令；清除历史命令</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history 10</span><br></pre></td></tr></table></figure><p>清除当前shell指令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">history -c </span><br></pre></td></tr></table></figure><p>彻底删除历史命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &gt; /root/.bash_history</span><br></pre></td></tr></table></figure><ol start="18"><li>为ls &#x2F;root| wc –l命令 设置别名为count。</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias count = &#x27;ls /root | wc -l&#x27;</span><br></pre></td></tr></table></figure><ol start="19"><li>熟悉自动补全文件、目录名和自动补全命令名。</li></ol><p>补全文件名按一次键盘上的“Tab“键</p><p>目录名和自动补全命令名按两下“Tab”</p><h4 id="（二）文件系统与文件管理"><a href="#（二）文件系统与文件管理" class="headerlink" title="（二）文件系统与文件管理"></a>（二）文件系统与文件管理</h4><ol><li></li></ol><p>​<code>cat &gt; 3216021058</code>，</p><p>​数字模式<code>sudo chmod 520 321602,</code></p><p>​功能模式 <code>sudo chmod u=rx,g=w,o=- 321602</code></p><p>2.<code>chmod u-x 321602</code></p><p>3.<code>chgrp -R .root 321602</code></p><p>4.<code>chown -R root 321602</code></p><p>5.<code>mkdir student</code> </p><p><code>mkdir chen</code></p><p>6.<code>cp -a 321602 student</code> </p><p>7.<code>mv /root/student /root/chen</code></p><p>8.<code>rm -r chen</code></p><ol start="9"><li></li></ol><p><code>cat &gt; ts.txt</code></p><p><code>ln ts.txt ts1.lnk,</code></p><p><code>ln -s ts.txt ts2.lnk</code></p><p><code>cat &gt;&gt; ts.txt</code> </p><ol start="10"><li></li></ol><p><code>rm -r ts.txt</code></p><p><code>more ts1.txt</code></p><p><code>more ts2.txt</code></p><p>11.<code>find ./ -size -10k</code></p><p>12.<code>find /tmp -type f -size 0 -exec rm -rf &#123;&#125; \;</code></p><p>13</p><p><code>grep -rn “if” .bashrc</code></p><ol start="14"><li></li></ol><p><code>cd /etc</code></p><p>&#96;&#96;&#96;du -sh * | sort -nr&#96;</p><p>15.<code>tar -cvf a.tar.gz /usr/local</code></p><p>16.<code>tar -xvf a.tar.gz -C /tmp</code></p><p>五、调试过程</p><p>暂未发现错误，运行结果如下</p><h3 id="六、实验结果"><a href="#六、实验结果" class="headerlink" title="六、实验结果"></a>六、实验结果</h3><h4 id="（一）shell基本命令使用-2"><a href="#（一）shell基本命令使用-2" class="headerlink" title="（一）shell基本命令使用"></a>（一）shell基本命令使用</h4><p>桌面</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps1.jpg" alt="img"> </p><p>Ctrl+alt+F1进入终端</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps2.jpg" alt="img"> </p><p>Ctrl+alt+F7退出</p><ol start="2"><li></li></ol><p>logout</p><p>reboot</p><p>shutdown now</p><ol start="3"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps3.jpg" alt="img"> </p><ol start="4"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps4.jpg" alt="img"> </p><ol start="5"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps5.jpg" alt="img"> </p><ol start="6"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps6.jpg" alt="img"> </p><ol start="7"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps7.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps8.jpg" alt="img"> </p><ol start="8"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps9.jpg" alt="img"> </p><ol start="9"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps10.jpg" alt="img"> </p><ol start="10"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps11.jpg" alt="img"> </p><ol start="11"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps12.jpg" alt="img"> </p><ol start="12"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps13.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps14.jpg" alt="img"> </p><ol start="13"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps15.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps16.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps17.jpg" alt="img"> </p><ol start="14"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps18.jpg" alt="img"> </p><ol start="15"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps19.jpg" alt="img"> </p><ol start="16"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps20.jpg" alt="img"> </p><ol start="17"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps21.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps22.jpg" alt="img"> </p><ol start="18"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps23.jpg" alt="img"> </p><ol start="19"><li></li></ol><p>Tab</p><p>tab tab</p><h4 id="（二）文件系统与文件管理-1"><a href="#（二）文件系统与文件管理-1" class="headerlink" title="（二）文件系统与文件管理"></a>（二）文件系统与文件管理</h4><ol><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps24.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps25.jpg" alt="img"> </p><ol start="2"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps26.jpg" alt="img"> </p><p>验证：</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps27.jpg" alt="img"> </p><ol start="3"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps28.jpg" alt="img"> </p><ol start="4"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps29.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps30.jpg" alt="img"> </p><ol start="5"><li></li><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps31.jpg" alt="img"> </p><p>验证：<img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps32.jpg" alt="img"></p><ol start="7"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps33.jpg" alt="img"> </p><p>验证</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps34.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps35.jpg" alt="img"> </p><ol start="8"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps36.jpg" alt="img"> </p><p>验证</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps37.jpg" alt="img"> </p><ol start="9"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps38.jpg" alt="img"> </p><p>验证：</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps39.jpg" alt="img"> </p><p>10</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps40.jpg" alt="img"> </p><p>验证：发现原文件已经删除，打开失败提示failed</p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps41.jpg" alt="img"> </p><ol start="11"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps42.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps43.jpg" alt="img"> </p><ol start="12"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps44.jpg" alt="img"> </p><ol start="13"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps45.jpg" alt="img"> </p><ol start="14"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps46.jpg" alt="img"> </p><ol start="15"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps47.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps48.jpg" alt="img"> </p><ol start="16"><li></li></ol><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps49.jpg" alt="img"> </p><p><img src="/2022/10/22/Ubuntu%E5%9F%BA%E7%A1%80shell%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%EF%BC%88%E4%B8%80%EF%BC%89/wps50.jpg" alt="img"> </p><h3 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h3><p>1、虚拟终端相比图形化界面十分不友好，体验极差。</p><p>2、Ubuntu只适合当作兴趣爱好来使用。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> 指令 </tag>
            
            <tag> 实验报告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu系统中安装VMwaretools</title>
      <link href="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/"/>
      <url>/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/</url>
      
        <content type="html"><![CDATA[<p>Ubuntu版本：16.04 LTS<br>VMware版本：16.2.4</p><h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>安装Vmware的好处：可以自定义分辨率，方便交互；可以和物理机方便传文件</p><h3 id="一、打开虚拟机，右击Ubuntu选项卡，点击安装VMware-tools-因为我的虚拟机已经安装，所以显示重新安装Vmware-Tools"><a href="#一、打开虚拟机，右击Ubuntu选项卡，点击安装VMware-tools-因为我的虚拟机已经安装，所以显示重新安装Vmware-Tools" class="headerlink" title="一、打开虚拟机，右击Ubuntu选项卡，点击安装VMware tools(因为我的虚拟机已经安装，所以显示重新安装Vmware Tools)"></a>一、打开虚拟机，右击Ubuntu选项卡，点击安装VMware tools(因为我的虚拟机已经安装，所以显示重新安装Vmware Tools)</h3><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/屏幕截图 2022-10-19 203105.png" alt="屏幕截图 2022-10-19 203105" style="zoom:80%;"><h3 id="二、单击文件，在目录下出现VMware"><a href="#二、单击文件，在目录下出现VMware" class="headerlink" title="二、单击文件，在目录下出现VMware"></a>二、单击文件，在目录下出现VMware</h3><p><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ%E6%88%AA%E5%9B%BE20221019203412.png" alt="QQ截图20221019203412"></p><h3 id="三、右键，然后复制到Home文件夹下"><a href="#三、右键，然后复制到Home文件夹下" class="headerlink" title="三、右键，然后复制到Home文件夹下"></a>三、右键，然后复制到Home文件夹下</h3><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ截图20221019203614.png" alt="QQ截图20221019203614" style="zoom:80%;"><h3 id="四、在Home文件夹下右键复制过去的压缩包，点击”提取到此处“"><a href="#四、在Home文件夹下右键复制过去的压缩包，点击”提取到此处“" class="headerlink" title="四、在Home文件夹下右键复制过去的压缩包，点击”提取到此处“"></a>四、在Home文件夹下右键复制过去的压缩包，点击”提取到此处“</h3><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ截图20221019203821.png" alt="QQ截图20221019203821" style="zoom:80%;"><p>这时会出现.distrib文件</p><p><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ%E6%88%AA%E5%9B%BE20221019203835.png" alt="QQ截图20221019203835"></p><h3 id="五、双击进入，在空白处右键点击“在终端中打开”"><a href="#五、双击进入，在空白处右键点击“在终端中打开”" class="headerlink" title="五、双击进入，在空白处右键点击“在终端中打开”"></a>五、双击进入，在空白处右键点击“在终端中打开”</h3><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ截图20221019204129.png" alt="QQ截图20221019204129" style="zoom:80%;"><h3 id="六、输入："><a href="#六、输入：" class="headerlink" title="六、输入："></a>六、输入：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./vmware-install.pl </span><br></pre></td></tr></table></figure><p>回车后根据提示输入密码</p><p><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ%E6%88%AA%E5%9B%BE20221019204525.png" alt="QQ截图20221019204525"></p><p>回车</p><p><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ%E6%88%AA%E5%9B%BE20221019204824.png" alt="QQ截图20221019204824"></p><p>在第一个光标的位置输入yes，</p><p>然后一直回车，</p><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/QQ截图20221019204907.png" alt="QQ截图20221019204907" style="zoom:80%;"><p>直到出现下面的提示即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enjoy，</span><br><span class="line">--the VMware team</span><br></pre></td></tr></table></figure><h3 id="七、完成"><a href="#七、完成" class="headerlink" title="七、完成"></a>七、完成</h3><p>​至此已经安装成功！</p><p>​验证，选项卡的 “安装VMware Tools”变成 “重新安装VMware” 啦！</p><img src="/2022/10/19/%E5%9C%A8Ubuntu%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85VMwaretools/屏幕截图 2022-10-19 205152.png" alt="屏幕截图 2022-10-19 205152" style="zoom:80%;">]]></content>
      
      
      
        <tags>
            
            <tag> 安装教程 </tag>
            
            <tag> 虚拟机 </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux_Ubuntu(乌班图)虚拟机安装教程</title>
      <link href="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
      <url>/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="1-百度搜索Ubuntu镜像，选择北京理工大学镜像"><a href="#1-百度搜索Ubuntu镜像，选择北京理工大学镜像" class="headerlink" title="1.百度搜索Ubuntu镜像，选择北京理工大学镜像"></a>1.百度搜索Ubuntu镜像，选择北京理工大学镜像</h3><p>（<a href="https://zhuanlan.zhihu.com/p/159642755">Ubuntu镜像下载地址 - 知乎 (zhihu.com)</a>）</p><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/1.png" alt="BP"></p><h3 id="2-选择框选的版本下载"><a href="#2-选择框选的版本下载" class="headerlink" title="2.选择框选的版本下载"></a>2.选择框选的版本下载</h3><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/10.png" alt="BP"></p><h2 id="！以上是iso的准备教程，以下是在Vmare-workstation16-pro中操作"><a href="#！以上是iso的准备教程，以下是在Vmare-workstation16-pro中操作" class="headerlink" title="！以上是iso的准备教程，以下是在Vmare workstation16 pro中操作"></a>！以上是iso的准备教程，以下是在Vmare workstation16 pro中操作</h2><h3 id="1-进入vmare选择高级安装"><a href="#1-进入vmare选择高级安装" class="headerlink" title="1.进入vmare选择高级安装"></a>1.进入vmare选择高级安装</h3><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018120406076.png" alt="BP" style="zoom:80%;"><h3 id="2、下一步"><a href="#2、下一步" class="headerlink" title="2、下一步"></a>2、下一步</h3><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018120429057.png" alt="BP"></p><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018120500858.png" alt="BP"></p><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018120613105.png" alt="BP"></p><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018120650601.png" alt="BP"></p><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018120746210.png" alt="BP"></p><p>注意：若安装时卡在黑色界面就近行如下操作：</p><h3 id="1、关闭虚拟机，在左上角选择”打开电源时进入固件“"><a href="#1、关闭虚拟机，在左上角选择”打开电源时进入固件“" class="headerlink" title="1、关闭虚拟机，在左上角选择”打开电源时进入固件“"></a>1、关闭虚拟机，在左上角选择”打开电源时进入固件“</h3><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018121024504.png" alt="BP"></p><h3 id="2、按左键-选择”Boot“"><a href="#2、按左键-选择”Boot“" class="headerlink" title="2、按左键 选择”Boot“"></a>2、按左键 选择”Boot“</h3><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018121121578.png" alt="BP"></p><h3 id="3、把”Hard-Drive”放在第一位，关机重启"><a href="#3、把”Hard-Drive”放在第一位，关机重启" class="headerlink" title="3、把”Hard Drive”放在第一位，关机重启"></a>3、把”Hard Drive”放在第一位，关机重启</h3><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018121156701.png" alt="BP"></p><h3 id="4、成功进入界面！"><a href="#4、成功进入界面！" class="headerlink" title="4、成功进入界面！"></a><a href>4</a>、成功进入界面！</h3><p><img src="/2022/10/18/Linux-Ubuntu-%E4%B9%8C%E7%8F%AD%E5%9B%BE-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/image-20221018000531116.png" alt="BP"></p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 虚拟机 </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo搭配typora写博客上传图片</title>
      <link href="/2022/10/18/hexo%E6%90%AD%E9%85%8Dtypora%E5%86%99%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/"/>
      <url>/2022/10/18/hexo%E6%90%AD%E9%85%8Dtypora%E5%86%99%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<p> 一、到博客的根目录下执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install [https://github.com/CodeFalling/hexo-asset-image]--save </span><br></pre></td></tr></table></figure><p>命令来进行插件的安装。</p><p>二、到博客根目录下查看_config.yml 文件将post_asset_folder 设置为true </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder:true</span><br></pre></td></tr></table></figure><p>三、在博客跟目录下生成文章</p><p>​</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;XXXX&quot;</span><br></pre></td></tr></table></figure><p><img src="/2022/10/18/hexo%E6%90%AD%E9%85%8Dtypora%E5%86%99%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/1.png" alt="BP"></p><p>此时会看到同时生成了.md文件和同名的文件夹，文件夹内就存放博客所需的本地图片</p><p><img src="/2022/10/18/hexo%E6%90%AD%E9%85%8Dtypora%E5%86%99%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/3.png" alt="BP"></p><p><img src="/2022/10/18/hexo%E6%90%AD%E9%85%8Dtypora%E5%86%99%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/2.png" alt="BP"></p><p>四、图片书写格式如下</p><p><img src="/2022/10/18/hexo%E6%90%AD%E9%85%8Dtypora%E5%86%99%E5%8D%9A%E5%AE%A2%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/4.png" alt="BP"></p><p>五、最后hexo g ,hexo s本地预览，确认无误后hxeo d上传。</p>]]></content>
      
      
      <categories>
          
          <category> 博客 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python笔记</title>
      <link href="/2022/10/13/python/"/>
      <url>/2022/10/13/python/</url>
      
        <content type="html"><![CDATA[<p>在vscode使用 jieba 函数库的时候出现以下代码，但是可以正常剪切</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Building prefix <span class="built_in">dict</span> <span class="keyword">from</span> the default dictionary ...</span><br><span class="line">Loading model <span class="keyword">from</span> cache C:\Users\&lt;username&gt;\AppData\Local\Temp\jieba.cache</span><br><span class="line">Loading model cost <span class="number">0.445</span> seconds.</span><br><span class="line">Prefix <span class="built_in">dict</span> has been built successfully.</span><br></pre></td></tr></table></figure><p>需要在下面添加一行代码阻止上面的报错出现</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">jieba.setLogLevel(jieba.logging.INFO)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win2003 和 xp 下载及激活</title>
      <link href="/2022/08/24/VMWARE%E9%83%A8%E7%BD%B2/"/>
      <url>/2022/08/24/VMWARE%E9%83%A8%E7%BD%B2/</url>
      
        <content type="html"><![CDATA[<h4 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h4><p>2个win2003 ：windows Server 2003 Enterprise Edition<br>提供百度云盘下载链接  <a href="http://pan.baidu.com/s/1pKL9pwf">http://pan.baidu.com/s/1pKL9pwf</a></p><h5 id="2003序列号："><a href="#2003序列号：" class="headerlink" title="2003序列号："></a>2003序列号：</h5><p>MPQ6X-3MCCF-47H9T-TKC2F-T69WM<br>FGJCG-8Q883-MQPRF-W8FDB-QPV3Y<br>GGH24-F94R6-XJPR9-FW9XQ-DBDHM<br>BRKX3-BB88X-GP7VW-HYQJR-C7QHM<br>HYDGJ-3WY89-YJB68-H2DV2-BYT7M<br>BPQBT-4MTVT-CDQGB-BGVFP-MK8YB      √测试通过<br>FWRB6-WVPJW-HB6Q7-2MTYK-M8BQY<br>PR86X-KWMQK-6CJVG-RCXFX-WWKWM<br>PGCFX-RGRGX-VFHRX-WT6TJ-QVFFY<br>F8QV3-BTYMR-V4GHX-B43FM-DY6CB<br>MXC6T-JW7WQ-DY7H3-F8JV7-V9XWM<br>DR7QV-WQDC8-G4DP9-9TY2P-Y9CPB<br>HWX9H-KVPMC-3W2DJ-P2392-K9G8M</p><h5 id="————————————————"><a href="#————————————————" class="headerlink" title="————————————————"></a>————————————————</h5><h6 id="2个winxp：专业版本"><a href="#2个winxp：专业版本" class="headerlink" title="2个winxp：专业版本"></a>2个winxp：专业版本</h6><h6 id="Windows-XP专业版最新安装码"><a href="#Windows-XP专业版最新安装码" class="headerlink" title="Windows XP专业版最新安装码"></a>Windows XP专业版最新安装码</h6><p>MRX3F-47B9T-2487J-KWKMF-RPWBY<br>HTXH6-2JJC4-CDB6C-X38B4-C3GF3<br>RT4H2-8WYHG-QKK6K-WWHJ2-9427X<br>DYPVX-43TRT-YDBGB-7YQJX-CWXW7<br>HGM7B-YF7T7-8R7RF-Y6RPY-XTQ77<br>DJQJB-PC83T-FTGJC-CQTCK-RJD8D<br>VMMBM-8WK8W-H44YH-37B4M-KX8QR<br>XRCTF-Y68KJ-VVFTR-7BDFP-4PW7G<br>6RV7B-FYWR2-PW3C6-DDWDR-68X9C<br>KYMTD-BV7KP-RRM33-P3XKJ-RDKVD<br>X3WYK-H7CR8-KQBMV-7DP6X-W6YQQ<br>CQWK3-CCYJY-TQDFV-2HJDR-W3B2M<br>2RXYJ-VQWXM-J2V2R-CVXQT-Y6MPY<br>X7TVH-VJTFG-BK22B-XXG6D-27326<br>VYGXV-YM8VB-4RVQX-QXBMX-G3WV7</p><h6 id="WindowsXP可以无限次激活的密钥"><a href="#WindowsXP可以无限次激活的密钥" class="headerlink" title="WindowsXP可以无限次激活的密钥"></a>WindowsXP可以无限次激活的密钥</h6><p>CXGDD-GP2B2-RKWWD-HG3HY-VDJ7J<br>RK7J8-2PGYQ-P47VV-V6PMB-F6XPQ</p><h6 id="万能XP-sp2-CD-KEY，适用SP2"><a href="#万能XP-sp2-CD-KEY，适用SP2" class="headerlink" title="万能XP sp2 CD-KEY，适用SP2"></a>万能XP sp2 CD-KEY，适用SP2</h6><p>DG8FV-B9TKY-FRT9J-6CRCC-XPQ4G</p><p> 序列号收集于网络，侵删</p>]]></content>
      
      
      
        <tags>
            
            <tag> 虚拟机 </tag>
            
            <tag> VMware </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMmare workstation下载及激活</title>
      <link href="/2022/08/23/VM16Pro%E4%B8%8B%E8%BD%BD/"/>
      <url>/2022/08/23/VM16Pro%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<hr><p>下载地址：<a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html</a></p><h5 id="秘钥"><a href="#秘钥" class="headerlink" title="秘钥"></a>秘钥</h5><p>tips：重启系统后进入VM，提示需要输入激活码，把激活码复制进去就能使用了</p><h5 id="VM16激活码："><a href="#VM16激活码：" class="headerlink" title="VM16激活码："></a>VM16激活码：</h5><p>ZF3R0-FHED2-M80TY-8QYGC-NPKYF<br>YF390-0HF8P-M81RQ-2DXQE-M2UT6<br>ZF71R-DMX85-08DQY-8YMNC-PPHV8</p><h5 id="VM17激活码："><a href="#VM17激活码：" class="headerlink" title="VM17激活码："></a>VM17激活码：</h5><p>JU090-6039P-08409-8J0QH-2YR7</p><p>此激活码收集于网络</p>]]></content>
      
      
      
        <tags>
            
            <tag> 安装教程 </tag>
            
            <tag> 虚拟机 </tag>
            
            <tag> Vmware </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c语言报错1</title>
      <link href="/2021/11/28/c%E8%AF%AD%E8%A8%80%E6%8A%A5%E9%94%991/"/>
      <url>/2021/11/28/c%E8%AF%AD%E8%A8%80%E6%8A%A5%E9%94%991/</url>
      
        <content type="html"><![CDATA[<p>c语言报错<br>lvalue required as left operand of assignment<br>翻译为：<br>赋值的左操作数需要左值<br>原因：<br>计算值为 &#x3D;&#x3D; 或 ！&#x3D;</p><p>变量赋值为 &#x3D;</p><p>赋值语句的左边应该是变量，不能是表达式。而实际上，这里是一个比较表达式，所以要把赋值号（＝）改用关系运算符（＝＝）<br>例如<br>if((a%7&#x3D;0)&amp;&amp;(a%3&#x3D;0))<br>改正为<br>if((a%7&#x3D;&#x3D;0)&amp;&amp;(a%3&#x3D;&#x3D;0))</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>sql随记</title>
      <link href="/2021/11/20/sql/"/>
      <url>/2021/11/20/sql/</url>
      
        <content type="html"><![CDATA[<p>SQL注入原理<br>SQL注入攻击是通过将恶意的SQL查询或添加语句插入到应用的输入参数中，再在后台SQL服务器上解析执行进行的攻击，它目前是黑客对数据库进行攻击的最常用的手段之一。</p><p>SQL注入点<br>注入点可分为两大类: 数字型 和 字符型 </p><p>其中字符型又可以细分为 单引号字符型 , 双引号字符型 , 单&#x2F;双引号+括号的字符型</p><p>数字型注入</p><p>SQL语句拼接参数时 , 直接拼接参数本身 , 格式如下</p><p>SELECT * FROM users WHERE id&#x3D;$id<br>字符型注入</p><p>SQL语句拼接参数时 , 对参数包裹了单引号,双引号,或括号</p><p>单引号字符型 : 参数包裹了单引号 , 格式如下</p><p>SELECT * FROM users WHERE id&#x3D;’$id’<br> 单引号+括号字符型 : 参数包裹了单引号和括号 , 格式如下</p><p>SELECT * FROM users WHERE id&#x3D;(‘$id’)<br>双引号+括号字符型 : 参数包裹了双引号和括号 , 格式如下</p><p>$id &#x3D; ‘“‘ . $id . ‘“‘;<br>SELECT * FROM users WHERE id&#x3D;($id)<br> 字符型注入并非只有这三种 , SQL语句中可以将单引号,双引号,括号自由拼接</p><p>报错注入<br>把我们想要的内容以报错的的形式展示出来 。<br>函数：<br>1.extractvalue(目标xml文档，xml路径)<br>！路径不能出现非法路径，否则会报错！<br>select extractvalue(1,0x7e) 0x7e十六进制是‘<del>’<br>只要让他去报错就行。<br>2.concat():将多个字符串连接成一个字符串<br>语法：concat（str1,str2,…）<br>select contact(‘</del>‘,(select database()))</p><p>select extractvalue(1,concat(1,select datebase()))</p>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基本的Dos命令</title>
      <link href="/2021/10/31/%E5%9F%BA%E6%9C%AC%E7%9A%84Dos%E5%91%BD%E4%BB%A4/"/>
      <url>/2021/10/31/%E5%9F%BA%E6%9C%AC%E7%9A%84Dos%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<p>基本的DOS命令（磁盘操作系统）<br>1.|（空格）more  #将文件翻页显示 按空格翻页。<br>2.type 文件名.扩展名 | more 查看命令<br>3.dir c:\windows | more #查看c盘window目录下有什么文件。<br>4.echo创建文件<br>5.copy con(屏幕) qingshu.txt<br>..&#x2F;内容<br>CTRL+Z回车 结束命令<br>6.del 文件名.扩展名 #删除文件<br>7.del *.txt #删除.txt所有文件<br>  del <em>.</em> #删除所有文件<br> &#x2F;s &#x2F;q递增删除 逐级删除<br>8.md 文件名 #创建文件夹<br>9.attrib +h 文件名 #隐藏文件夹h(h hide)<br>   attrib -h 文件名 #取消隐藏<br>   attrib +h +s +a #<br>10.dir &#x2F;a 文件名 #浏览所有文件  dir也行<br>11.fsutill file creatnew d:\system.ini 230040304 #在d盘目录下快速创建一个230040304字节的 system.ini文件<br>12.assoc .txt&#x3D;exefile #修改关联性 将.txt文件修改为 .exe文件<br>    assoc .txt&#x3D;txtfile #修改回原来的关联性<br>13.shutdown -s -t 100 #100s后关机 定时关机<br>     shutdown -s -f -t 时间 -c “字符” #定时强制关机-c输入提示<br>     shutdown -r -t 时间 #定时重启，同时加-f，为强制关机<br>     shutdown -l #注销，通logoft命令相同<br>     shutdown -a#取消一切计时<br>14.copy .txt<br>15.ren 旧名. 新名 #重命名<br>16.d: #从c盘进入d盘<br>    cd a#从当前目录下进入a文件夹</p><pre><code> cd D:\文件名 \ 文件名 #指定去具体的文件下。</code></pre><p>copy haha.txt ..\b<br>百度：<br>将当前目录下的 1.txt 这个文件复制到 bak 目录下，并且更名为 a.txt，就输入 copy 1.txt bak\a.txt<br>将当前目录下的 1.txt 文件复制到 bak 目录下，就输入 copy 1.txt bak\</p>]]></content>
      
      
      
        <tags>
            
            <tag> 指令 </tag>
            
            <tag> DOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ip地址 dns初了解</title>
      <link href="/2021/10/28/ip%E5%9C%B0%E5%9D%80-dns%E5%88%9D%E4%BA%86%E8%A7%A3/"/>
      <url>/2021/10/28/ip%E5%9C%B0%E5%9D%80-dns%E5%88%9D%E4%BA%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>测试网络连通性（测试对方网络是否在线）<br>ping 目标ip地址          #测试网络连通性，有去有回可以成功通信！<br>ping -t 目标ip地址      #一直ping<br>ping -n 数字 目标Ip地址 #修改ping包的数量<br>ping -l 数字  #修改ping包的大小<br>以上ping后有空格<br>ps：如果ping不通，不一定是网络问题，可能是对方不在线，或者对方开着防火墙。</p><p>nslookup <a href="http://www.jd.com/">www.jd.com</a> #查新域名对应的ip地址<br>nslookup -qt&#x3D;ns <a href="http://www.xxxx.com/">www.XXXX.com</a> #查询域名使用的是哪一家DNS服务器<br>命令：ipconfig #查看ip基本信息<br>ipconfig  &#x2F;all #可以看到所有详细信息（DNS）</p>]]></content>
      
      
      
        <tags>
            
            <tag> ip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20220820测试</title>
      <link href="/2021/10/22/20220820/"/>
      <url>/2021/10/22/20220820/</url>
      
        <content type="html"><![CDATA[<p>20220820测试</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>常用的Hexo指令</title>
      <link href="/2021/10/22/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2/"/>
      <url>/2021/10/22/%E6%88%91%E7%9A%84%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<p>hexo安装<br>1 npm install hexo -g #安装<br>2 npm update hexo -g #升级<br>3 hexo init #初始化<br>简写<br>1 hexo n “我的博客” &#x3D;&#x3D; hexo new “我的博客” #新建文章<br>2 hexo p &#x3D;&#x3D; hexo publish<br>3 hexo g &#x3D;&#x3D; hexo generate#生成<br>4 hexo s &#x3D;&#x3D; hexo server #启动服务预览<br>5 hexo d &#x3D;&#x3D; hexo deploy#部署<br>服务器</p><p>复制代码<br>1 hexo server #Hexo 会监视文件变动并自动更新，】无须重启服务器。<br>2 hexo server -s #静态模式<br>3 hexo server -p 5000 #更改端口<br>4 hexo server -i 192.168.1.1 #自定义 IP<br>5 hexo clean #清除缓存 网页正常情况下可以忽略此条命令<br>6 hexo g #生成静态网页<br>7 hexo d #开始部署<br>复制代码<br>监视文件变动<br>1 hexo generate #使用 Hexo 生成静态文件快速而且简单<br>2 hexo generate –watch #监视文件变动<br>完成后部署<br>1 # 两个命令的作用是相同的<br>2 hexo generate –deploy<br>3 hexo deploy –generate<br>4 hexo deploy -g<br>5 hexo server -g</p><p>复制代码<br>1 hexo new “postName” #新建文章，注意要带双引号！！！！！<br>2 hexo new page “pageName” #新建页面<br>3 hexo generate #生成静态页面至public目录<br>4 hexo server #开启预览访问端口（默认端口4000，’ctrl + c’关闭server）<br>5 hexo deploy #将.deploy目录部署到GitHub<br>6 hexo new [layout] <title>;<br>7 hexo new photo “My Gallery”<br>8 hexo new “Hello World” –lang tw<br>复制代码</title></p><p>图片<br>复制代码<br>1 title: 使用Hexo搭建个人博客<br>2 layout: post<br>3 date: 2016-12-21 19:07:43<br>4 comments: true<br>5 categories: Blog<br>6 tags: [Hexo]<br>7 keywords: Hexo, Blog<br>8 description: 生命在于折腾，又把博客折腾到Hexo了。给Hexo点赞。<br>推送到服务器上<br>1 hexo n #写文章<br>2 hexo g #生成<br>3 hexo d #部署 #可与hexo g合并为 hexo d -g</p><p>1 npm install hexo-generator-feed –save<br>开启RSS功能 </p><p>编辑hexo&#x2F;_config.yml，添加如下代码：</p><p>1 rss: &#x2F;atom.xml #rss地址 默认即可</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
